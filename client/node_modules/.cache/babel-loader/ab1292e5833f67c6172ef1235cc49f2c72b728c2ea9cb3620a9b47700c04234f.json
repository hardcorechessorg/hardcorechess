{"ast":null,"code":"import _objectSpread from \"C:/Users/chich/chess-platform/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"C:/Users/chich/chess-platform/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n// @generated by Peggy 4.2.0.\n//\n// https://peggyjs.org/\n\nfunction rootNode(comment) {\n  return comment !== null ? {\n    comment,\n    variations: []\n  } : {\n    variations: []\n  };\n}\nfunction node(move, suffix, nag, comment, variations) {\n  const node = {\n    move,\n    variations\n  };\n  if (suffix) {\n    node.suffix = suffix;\n  }\n  if (nag) {\n    node.nag = nag;\n  }\n  if (comment !== null) {\n    node.comment = comment;\n  }\n  return node;\n}\nfunction lineToTree() {\n  for (var _len = arguments.length, nodes = new Array(_len), _key = 0; _key < _len; _key++) {\n    nodes[_key] = arguments[_key];\n  }\n  const [root, ...rest] = nodes;\n  let parent = root;\n  for (const child of rest) {\n    if (child !== null) {\n      parent.variations = [child, ...child.variations];\n      child.variations = [];\n      parent = child;\n    }\n  }\n  return root;\n}\nfunction pgn(headers, game) {\n  var _ref;\n  if (game.marker && game.marker.comment) {\n    let node = game.root;\n    while (true) {\n      const next = node.variations[0];\n      if (!next) {\n        node.comment = game.marker.comment;\n        break;\n      }\n      node = next;\n    }\n  }\n  return {\n    headers,\n    root: game.root,\n    result: (_ref = game.marker && game.marker.result) !== null && _ref !== void 0 ? _ref : undefined\n  };\n}\nfunction peg$subclass(child, parent) {\n  function C() {\n    this.constructor = child;\n  }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\nfunction peg$SyntaxError(message, expected, found, location) {\n  var self = Error.call(this, message);\n  // istanbul ignore next Check is a necessary evil to support older environments\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(self, peg$SyntaxError.prototype);\n  }\n  self.expected = expected;\n  self.found = found;\n  self.location = location;\n  self.name = \"SyntaxError\";\n  return self;\n}\npeg$subclass(peg$SyntaxError, Error);\nfunction peg$padEnd(str, targetLength, padString) {\n  padString = padString || \" \";\n  if (str.length > targetLength) {\n    return str;\n  }\n  targetLength -= str.length;\n  padString += padString.repeat(targetLength);\n  return str + padString.slice(0, targetLength);\n}\npeg$SyntaxError.prototype.format = function (sources) {\n  var str = \"Error: \" + this.message;\n  if (this.location) {\n    var src = null;\n    var k;\n    for (k = 0; k < sources.length; k++) {\n      if (sources[k].source === this.location.source) {\n        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);\n        break;\n      }\n    }\n    var s = this.location.start;\n    var offset_s = this.location.source && typeof this.location.source.offset === \"function\" ? this.location.source.offset(s) : s;\n    var loc = this.location.source + \":\" + offset_s.line + \":\" + offset_s.column;\n    if (src) {\n      var e = this.location.end;\n      var filler = peg$padEnd(\"\", offset_s.line.toString().length, ' ');\n      var line = src[s.line - 1];\n      var last = s.line === e.line ? e.column : line.length + 1;\n      var hatLen = last - s.column || 1;\n      str += \"\\n --> \" + loc + \"\\n\" + filler + \" |\\n\" + offset_s.line + \" | \" + line + \"\\n\" + filler + \" | \" + peg$padEnd(\"\", s.column - 1, ' ') + peg$padEnd(\"\", hatLen, \"^\");\n    } else {\n      str += \"\\n at \" + loc;\n    }\n  }\n  return str;\n};\npeg$SyntaxError.buildMessage = function (expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function (expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n    class: function (expectation) {\n      var escapedParts = expectation.parts.map(function (part) {\n        return Array.isArray(part) ? classEscape(part[0]) + \"-\" + classEscape(part[1]) : classEscape(part);\n      });\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts.join(\"\") + \"]\";\n    },\n    any: function () {\n      return \"any character\";\n    },\n    end: function () {\n      return \"end of input\";\n    },\n    other: function (expectation) {\n      return expectation.description;\n    }\n  };\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n  function literalEscape(s) {\n    return s.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, \"\\\\\\\"\").replace(/\\0/g, \"\\\\0\").replace(/\\t/g, \"\\\\t\").replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/[\\x00-\\x0F]/g, function (ch) {\n      return \"\\\\x0\" + hex(ch);\n    }).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) {\n      return \"\\\\x\" + hex(ch);\n    });\n  }\n  function classEscape(s) {\n    return s.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\]/g, \"\\\\]\").replace(/\\^/g, \"\\\\^\").replace(/-/g, \"\\\\-\").replace(/\\0/g, \"\\\\0\").replace(/\\t/g, \"\\\\t\").replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/[\\x00-\\x0F]/g, function (ch) {\n      return \"\\\\x0\" + hex(ch);\n    }).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) {\n      return \"\\\\x\" + hex(ch);\n    });\n  }\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n    descriptions.sort();\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n      default:\n        return descriptions.slice(0, -1).join(\", \") + \", or \" + descriptions[descriptions.length - 1];\n    }\n  }\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n  var peg$FAILED = {};\n  var peg$source = options.grammarSource;\n  var peg$startRuleFunctions = {\n    pgn: peg$parsepgn\n  };\n  var peg$startRuleFunction = peg$parsepgn;\n  var peg$c0 = \"[\";\n  var peg$c1 = \"\\\"\";\n  var peg$c2 = \"]\";\n  var peg$c3 = \".\";\n  var peg$c4 = \"O-O-O\";\n  var peg$c5 = \"O-O\";\n  var peg$c6 = \"0-0-0\";\n  var peg$c7 = \"0-0\";\n  var peg$c8 = \"$\";\n  var peg$c9 = \"{\";\n  var peg$c10 = \"}\";\n  var peg$c11 = \";\";\n  var peg$c12 = \"(\";\n  var peg$c13 = \")\";\n  var peg$c14 = \"1-0\";\n  var peg$c15 = \"0-1\";\n  var peg$c16 = \"1/2-1/2\";\n  var peg$c17 = \"*\";\n  var peg$r0 = /^[a-zA-Z]/;\n  var peg$r1 = /^[^\"]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[.]/;\n  var peg$r4 = /^[a-zA-Z1-8\\-=]/;\n  var peg$r5 = /^[+#]/;\n  var peg$r6 = /^[!?]/;\n  var peg$r7 = /^[^}]/;\n  var peg$r8 = /^[^\\r\\n]/;\n  var peg$r9 = /^[ \\t\\r\\n]/;\n  var peg$e0 = peg$otherExpectation(\"tag pair\");\n  var peg$e1 = peg$literalExpectation(\"[\", false);\n  var peg$e2 = peg$literalExpectation(\"\\\"\", false);\n  var peg$e3 = peg$literalExpectation(\"]\", false);\n  var peg$e4 = peg$otherExpectation(\"tag name\");\n  var peg$e5 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false);\n  var peg$e6 = peg$otherExpectation(\"tag value\");\n  var peg$e7 = peg$classExpectation([\"\\\"\"], true, false);\n  var peg$e8 = peg$otherExpectation(\"move number\");\n  var peg$e9 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e10 = peg$literalExpectation(\".\", false);\n  var peg$e11 = peg$classExpectation([\".\"], false, false);\n  var peg$e12 = peg$otherExpectation(\"standard algebraic notation\");\n  var peg$e13 = peg$literalExpectation(\"O-O-O\", false);\n  var peg$e14 = peg$literalExpectation(\"O-O\", false);\n  var peg$e15 = peg$literalExpectation(\"0-0-0\", false);\n  var peg$e16 = peg$literalExpectation(\"0-0\", false);\n  var peg$e17 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"1\", \"8\"], \"-\", \"=\"], false, false);\n  var peg$e18 = peg$classExpectation([\"+\", \"#\"], false, false);\n  var peg$e19 = peg$otherExpectation(\"suffix annotation\");\n  var peg$e20 = peg$classExpectation([\"!\", \"?\"], false, false);\n  var peg$e21 = peg$otherExpectation(\"NAG\");\n  var peg$e22 = peg$literalExpectation(\"$\", false);\n  var peg$e23 = peg$otherExpectation(\"brace comment\");\n  var peg$e24 = peg$literalExpectation(\"{\", false);\n  var peg$e25 = peg$classExpectation([\"}\"], true, false);\n  var peg$e26 = peg$literalExpectation(\"}\", false);\n  var peg$e27 = peg$otherExpectation(\"rest of line comment\");\n  var peg$e28 = peg$literalExpectation(\";\", false);\n  var peg$e29 = peg$classExpectation([\"\\r\", \"\\n\"], true, false);\n  var peg$e30 = peg$otherExpectation(\"variation\");\n  var peg$e31 = peg$literalExpectation(\"(\", false);\n  var peg$e32 = peg$literalExpectation(\")\", false);\n  var peg$e33 = peg$otherExpectation(\"game termination marker\");\n  var peg$e34 = peg$literalExpectation(\"1-0\", false);\n  var peg$e35 = peg$literalExpectation(\"0-1\", false);\n  var peg$e36 = peg$literalExpectation(\"1/2-1/2\", false);\n  var peg$e37 = peg$literalExpectation(\"*\", false);\n  var peg$e38 = peg$otherExpectation(\"whitespace\");\n  var peg$e39 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n  var peg$f0 = function (headers, game) {\n    return pgn(headers, game);\n  };\n  var peg$f1 = function (tagPairs) {\n    return Object.fromEntries(tagPairs);\n  };\n  var peg$f2 = function (tagName, tagValue) {\n    return [tagName, tagValue];\n  };\n  var peg$f3 = function (root, marker) {\n    return {\n      root,\n      marker\n    };\n  };\n  var peg$f4 = function (comment, moves) {\n    return lineToTree(rootNode(comment), ...moves.flat());\n  };\n  var peg$f5 = function (san, suffix, nag, comment, variations) {\n    return node(san, suffix, nag, comment, variations);\n  };\n  var peg$f6 = function (nag) {\n    return nag;\n  };\n  var peg$f7 = function (comment) {\n    return comment.replace(/[\\r\\n]+/g, \" \");\n  };\n  var peg$f8 = function (comment) {\n    return comment.trim();\n  };\n  var peg$f9 = function (line) {\n    return line;\n  };\n  var peg$f10 = function (result, comment) {\n    return {\n      result,\n      comment\n    };\n  };\n  var peg$currPos = options.peg$currPos | 0;\n  var peg$posDetailsCache = [{\n    line: 1,\n    column: 1\n  }];\n  var peg$maxFailPos = peg$currPos;\n  var peg$maxFailExpected = options.peg$maxFailExpected || [];\n  var peg$silentFails = options.peg$silentFails | 0;\n  var peg$result;\n  if (options.startRule) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n  function peg$literalExpectation(text, ignoreCase) {\n    return {\n      type: \"literal\",\n      text: text,\n      ignoreCase: ignoreCase\n    };\n  }\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return {\n      type: \"class\",\n      parts: parts,\n      inverted: inverted,\n      ignoreCase: ignoreCase\n    };\n  }\n  function peg$endExpectation() {\n    return {\n      type: \"end\"\n    };\n  }\n  function peg$otherExpectation(description) {\n    return {\n      type: \"other\",\n      description: description\n    };\n  }\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n    if (details) {\n      return details;\n    } else {\n      if (pos >= peg$posDetailsCache.length) {\n        p = peg$posDetailsCache.length - 1;\n      } else {\n        p = pos;\n        while (!peg$posDetailsCache[--p]) {}\n      }\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n        p++;\n      }\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n  function peg$computeLocation(startPos, endPos, offset) {\n    var startPosDetails = peg$computePosDetails(startPos);\n    var endPosDetails = peg$computePosDetails(endPos);\n    var res = {\n      source: peg$source,\n      start: {\n        offset: startPos,\n        line: startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line: endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n    return res;\n  }\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) {\n      return;\n    }\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n    peg$maxFailExpected.push(expected);\n  }\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected, found), expected, found, location);\n  }\n  function peg$parsepgn() {\n    var s0, s1, s2;\n    s0 = peg$currPos;\n    s1 = peg$parsetagPairSection();\n    s2 = peg$parsemoveTextSection();\n    s0 = peg$f0(s1, s2);\n    return s0;\n  }\n  function peg$parsetagPairSection() {\n    var s0, s1, s2;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsetagPair();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsetagPair();\n    }\n    s2 = peg$parse_();\n    s0 = peg$f1(s1);\n    return s0;\n  }\n  function peg$parsetagPair() {\n    var s0, s2, s4, s6, s7, s8, s10;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 91) {\n      s2 = peg$c0;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e1);\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      peg$parse_();\n      s4 = peg$parsetagName();\n      if (s4 !== peg$FAILED) {\n        peg$parse_();\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s6 = peg$c1;\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e2);\n          }\n        }\n        if (s6 !== peg$FAILED) {\n          s7 = peg$parsetagValue();\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s8 = peg$c1;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n            if (peg$silentFails === 0) {\n              peg$fail(peg$e2);\n            }\n          }\n          if (s8 !== peg$FAILED) {\n            peg$parse_();\n            if (input.charCodeAt(peg$currPos) === 93) {\n              s10 = peg$c2;\n              peg$currPos++;\n            } else {\n              s10 = peg$FAILED;\n              if (peg$silentFails === 0) {\n                peg$fail(peg$e3);\n              }\n            }\n            if (s10 !== peg$FAILED) {\n              s0 = peg$f2(s4, s7);\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e0);\n      }\n    }\n    return s0;\n  }\n  function peg$parsetagName() {\n    var s0, s1, s2;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r0.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e5);\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = input.charAt(peg$currPos);\n        if (peg$r0.test(s2)) {\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e5);\n          }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e4);\n      }\n    }\n    return s0;\n  }\n  function peg$parsetagValue() {\n    var s0, s1, s2;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r1.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e7);\n      }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = input.charAt(peg$currPos);\n      if (peg$r1.test(s2)) {\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e7);\n        }\n      }\n    }\n    s0 = input.substring(s0, peg$currPos);\n    peg$silentFails--;\n    s1 = peg$FAILED;\n    if (peg$silentFails === 0) {\n      peg$fail(peg$e6);\n    }\n    return s0;\n  }\n  function peg$parsemoveTextSection() {\n    var s0, s1, s3;\n    s0 = peg$currPos;\n    s1 = peg$parseline();\n    peg$parse_();\n    s3 = peg$parsegameTerminationMarker();\n    if (s3 === peg$FAILED) {\n      s3 = null;\n    }\n    peg$parse_();\n    s0 = peg$f3(s1, s3);\n    return s0;\n  }\n  function peg$parseline() {\n    var s0, s1, s2, s3;\n    s0 = peg$currPos;\n    s1 = peg$parsecomment();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    s2 = [];\n    s3 = peg$parsemove();\n    while (s3 !== peg$FAILED) {\n      s2.push(s3);\n      s3 = peg$parsemove();\n    }\n    s0 = peg$f4(s1, s2);\n    return s0;\n  }\n  function peg$parsemove() {\n    var s0, s4, s5, s6, s7, s8, s9, s10;\n    s0 = peg$currPos;\n    peg$parse_();\n    peg$parsemoveNumber();\n    peg$parse_();\n    s4 = peg$parsesan();\n    if (s4 !== peg$FAILED) {\n      s5 = peg$parsesuffixAnnotation();\n      if (s5 === peg$FAILED) {\n        s5 = null;\n      }\n      s6 = [];\n      s7 = peg$parsenag();\n      while (s7 !== peg$FAILED) {\n        s6.push(s7);\n        s7 = peg$parsenag();\n      }\n      s7 = peg$parse_();\n      s8 = peg$parsecomment();\n      if (s8 === peg$FAILED) {\n        s8 = null;\n      }\n      s9 = [];\n      s10 = peg$parsevariation();\n      while (s10 !== peg$FAILED) {\n        s9.push(s10);\n        s10 = peg$parsevariation();\n      }\n      s0 = peg$f5(s4, s5, s6, s8, s9);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    return s0;\n  }\n  function peg$parsemoveNumber() {\n    var s0, s1, s2, s3, s4, s5;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r2.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e9);\n      }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = input.charAt(peg$currPos);\n      if (peg$r2.test(s2)) {\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e9);\n        }\n      }\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c3;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e10);\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parse_();\n      s4 = [];\n      s5 = input.charAt(peg$currPos);\n      if (peg$r3.test(s5)) {\n        peg$currPos++;\n      } else {\n        s5 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e11);\n        }\n      }\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = input.charAt(peg$currPos);\n        if (peg$r3.test(s5)) {\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e11);\n          }\n        }\n      }\n      s1 = [s1, s2, s3, s4];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e8);\n      }\n    }\n    return s0;\n  }\n  function peg$parsesan() {\n    var s0, s1, s2, s3, s4, s5;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s2 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e13);\n      }\n    }\n    if (s2 === peg$FAILED) {\n      if (input.substr(peg$currPos, 3) === peg$c5) {\n        s2 = peg$c5;\n        peg$currPos += 3;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e14);\n        }\n      }\n      if (s2 === peg$FAILED) {\n        if (input.substr(peg$currPos, 5) === peg$c6) {\n          s2 = peg$c6;\n          peg$currPos += 5;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e15);\n          }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.substr(peg$currPos, 3) === peg$c7) {\n            s2 = peg$c7;\n            peg$currPos += 3;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) {\n              peg$fail(peg$e16);\n            }\n          }\n          if (s2 === peg$FAILED) {\n            s2 = peg$currPos;\n            s3 = input.charAt(peg$currPos);\n            if (peg$r0.test(s3)) {\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) {\n                peg$fail(peg$e5);\n              }\n            }\n            if (s3 !== peg$FAILED) {\n              s4 = [];\n              s5 = input.charAt(peg$currPos);\n              if (peg$r4.test(s5)) {\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) {\n                  peg$fail(peg$e17);\n                }\n              }\n              if (s5 !== peg$FAILED) {\n                while (s5 !== peg$FAILED) {\n                  s4.push(s5);\n                  s5 = input.charAt(peg$currPos);\n                  if (peg$r4.test(s5)) {\n                    peg$currPos++;\n                  } else {\n                    s5 = peg$FAILED;\n                    if (peg$silentFails === 0) {\n                      peg$fail(peg$e17);\n                    }\n                  }\n                }\n              } else {\n                s4 = peg$FAILED;\n              }\n              if (s4 !== peg$FAILED) {\n                s3 = [s3, s4];\n                s2 = s3;\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          }\n        }\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = input.charAt(peg$currPos);\n      if (peg$r5.test(s3)) {\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e18);\n        }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e12);\n      }\n    }\n    return s0;\n  }\n  function peg$parsesuffixAnnotation() {\n    var s0, s1, s2;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r6.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e20);\n      }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (s1.length >= 2) {\n        s2 = peg$FAILED;\n      } else {\n        s2 = input.charAt(peg$currPos);\n        if (peg$r6.test(s2)) {\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e20);\n          }\n        }\n      }\n    }\n    if (s1.length < 1) {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e19);\n      }\n    }\n    return s0;\n  }\n  function peg$parsenag() {\n    var s0, s2, s3, s4, s5;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 36) {\n      s2 = peg$c8;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e22);\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = input.charAt(peg$currPos);\n      if (peg$r2.test(s5)) {\n        peg$currPos++;\n      } else {\n        s5 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e9);\n        }\n      }\n      if (s5 !== peg$FAILED) {\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = input.charAt(peg$currPos);\n          if (peg$r2.test(s5)) {\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) {\n              peg$fail(peg$e9);\n            }\n          }\n        }\n      } else {\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s3 = input.substring(s3, peg$currPos);\n      } else {\n        s3 = s4;\n      }\n      if (s3 !== peg$FAILED) {\n        s0 = peg$f6(s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e21);\n      }\n    }\n    return s0;\n  }\n  function peg$parsecomment() {\n    var s0;\n    s0 = peg$parsebraceComment();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parserestOfLineComment();\n    }\n    return s0;\n  }\n  function peg$parsebraceComment() {\n    var s0, s1, s2, s3, s4;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 123) {\n      s1 = peg$c9;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e24);\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = [];\n      s4 = input.charAt(peg$currPos);\n      if (peg$r7.test(s4)) {\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e25);\n        }\n      }\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = input.charAt(peg$currPos);\n        if (peg$r7.test(s4)) {\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e25);\n          }\n        }\n      }\n      s2 = input.substring(s2, peg$currPos);\n      if (input.charCodeAt(peg$currPos) === 125) {\n        s3 = peg$c10;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e26);\n        }\n      }\n      if (s3 !== peg$FAILED) {\n        s0 = peg$f7(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e23);\n      }\n    }\n    return s0;\n  }\n  function peg$parserestOfLineComment() {\n    var s0, s1, s2, s3, s4;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 59) {\n      s1 = peg$c11;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e28);\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = [];\n      s4 = input.charAt(peg$currPos);\n      if (peg$r8.test(s4)) {\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e29);\n        }\n      }\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = input.charAt(peg$currPos);\n        if (peg$r8.test(s4)) {\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e29);\n          }\n        }\n      }\n      s2 = input.substring(s2, peg$currPos);\n      s0 = peg$f8(s2);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e27);\n      }\n    }\n    return s0;\n  }\n  function peg$parsevariation() {\n    var s0, s2, s3, s5;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s2 = peg$c12;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e31);\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseline();\n      if (s3 !== peg$FAILED) {\n        peg$parse_();\n        if (input.charCodeAt(peg$currPos) === 41) {\n          s5 = peg$c13;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e32);\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s0 = peg$f9(s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e30);\n      }\n    }\n    return s0;\n  }\n  function peg$parsegameTerminationMarker() {\n    var s0, s1, s3;\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 3) === peg$c14) {\n      s1 = peg$c14;\n      peg$currPos += 3;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e34);\n      }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 3) === peg$c15) {\n        s1 = peg$c15;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e35);\n        }\n      }\n      if (s1 === peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c16) {\n          s1 = peg$c16;\n          peg$currPos += 7;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) {\n            peg$fail(peg$e36);\n          }\n        }\n        if (s1 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 42) {\n            s1 = peg$c17;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) {\n              peg$fail(peg$e37);\n            }\n          }\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$parse_();\n      s3 = peg$parsecomment();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      s0 = peg$f10(s1, s3);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e33);\n      }\n    }\n    return s0;\n  }\n  function peg$parse_() {\n    var s0, s1;\n    peg$silentFails++;\n    s0 = [];\n    s1 = input.charAt(peg$currPos);\n    if (peg$r9.test(s1)) {\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) {\n        peg$fail(peg$e39);\n      }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      s1 = input.charAt(peg$currPos);\n      if (peg$r9.test(s1)) {\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) {\n          peg$fail(peg$e39);\n        }\n      }\n    }\n    peg$silentFails--;\n    s1 = peg$FAILED;\n    if (peg$silentFails === 0) {\n      peg$fail(peg$e38);\n    }\n    return s0;\n  }\n  peg$result = peg$startRuleFunction();\n  if (options.peg$library) {\n    return /** @type {any} */{\n      peg$result,\n      peg$currPos,\n      peg$FAILED,\n      peg$maxFailExpected,\n      peg$maxFailPos\n    };\n  }\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n    throw peg$buildStructuredError(peg$maxFailExpected, peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null, peg$maxFailPos < input.length ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1) : peg$computeLocation(peg$maxFailPos, peg$maxFailPos));\n  }\n}\n\n/**\n * @license\n * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\nconst MASK64 = 0xffffffffffffffffn;\nfunction rotl(x, k) {\n  return (x << k | x >> 64n - k) & 0xffffffffffffffffn;\n}\nfunction wrappingMul(x, y) {\n  return x * y & MASK64;\n}\n// xoroshiro128**\nfunction xoroshiro128(state) {\n  return function () {\n    let s0 = BigInt(state & MASK64);\n    let s1 = BigInt(state >> 64n & MASK64);\n    const result = wrappingMul(rotl(wrappingMul(s0, 5n), 7n), 9n);\n    s1 ^= s0;\n    s0 = (rotl(s0, 24n) ^ s1 ^ s1 << 16n) & MASK64;\n    s1 = rotl(s1, 37n);\n    state = s1 << 64n | s0;\n    return result;\n  };\n}\nconst rand = xoroshiro128(0xa187eb39cdcaed8f31c4b365b102e01en);\nconst PIECE_KEYS = Array.from({\n  length: 2\n}, () => Array.from({\n  length: 6\n}, () => Array.from({\n  length: 128\n}, () => rand())));\nconst EP_KEYS = Array.from({\n  length: 8\n}, () => rand());\nconst CASTLING_KEYS = Array.from({\n  length: 16\n}, () => rand());\nconst SIDE_KEY = rand();\nconst WHITE = 'w';\nconst BLACK = 'b';\nconst PAWN = 'p';\nconst KNIGHT = 'n';\nconst BISHOP = 'b';\nconst ROOK = 'r';\nconst QUEEN = 'q';\nconst KING = 'k';\nconst DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\nclass Move {\n  constructor(chess, internal) {\n    _defineProperty(this, \"color\", void 0);\n    _defineProperty(this, \"from\", void 0);\n    _defineProperty(this, \"to\", void 0);\n    _defineProperty(this, \"piece\", void 0);\n    _defineProperty(this, \"captured\", void 0);\n    _defineProperty(this, \"promotion\", void 0);\n    /**\n     * @deprecated This field is deprecated and will be removed in version 2.0.0.\n     * Please use move descriptor functions instead: `isCapture`, `isPromotion`,\n     * `isEnPassant`, `isKingsideCastle`, `isQueensideCastle`, `isCastle`, and\n     * `isBigPawn`\n     */\n    _defineProperty(this, \"flags\", void 0);\n    _defineProperty(this, \"san\", void 0);\n    _defineProperty(this, \"lan\", void 0);\n    _defineProperty(this, \"before\", void 0);\n    _defineProperty(this, \"after\", void 0);\n    const {\n      color,\n      piece,\n      from,\n      to,\n      flags,\n      captured,\n      promotion\n    } = internal;\n    const fromAlgebraic = algebraic(from);\n    const toAlgebraic = algebraic(to);\n    this.color = color;\n    this.piece = piece;\n    this.from = fromAlgebraic;\n    this.to = toAlgebraic;\n    /*\n     * HACK: The chess['_method']() calls below invoke private methods in the\n     * Chess class to generate SAN and FEN. It's a bit of a hack, but makes the\n     * code cleaner elsewhere.\n     */\n    this.san = chess['_moveToSan'](internal, chess['_moves']({\n      legal: true\n    }));\n    this.lan = fromAlgebraic + toAlgebraic;\n    this.before = chess.fen();\n    // Generate the FEN for the 'after' key\n    chess['_makeMove'](internal);\n    this.after = chess.fen();\n    chess['_undoMove']();\n    // Build the text representation of the move flags\n    this.flags = '';\n    for (const flag in BITS) {\n      if (BITS[flag] & flags) {\n        this.flags += FLAGS[flag];\n      }\n    }\n    if (captured) {\n      this.captured = captured;\n    }\n    if (promotion) {\n      this.promotion = promotion;\n      this.lan += promotion;\n    }\n  }\n  isCapture() {\n    return this.flags.indexOf(FLAGS['CAPTURE']) > -1;\n  }\n  isPromotion() {\n    return this.flags.indexOf(FLAGS['PROMOTION']) > -1;\n  }\n  isEnPassant() {\n    return this.flags.indexOf(FLAGS['EP_CAPTURE']) > -1;\n  }\n  isKingsideCastle() {\n    return this.flags.indexOf(FLAGS['KSIDE_CASTLE']) > -1;\n  }\n  isQueensideCastle() {\n    return this.flags.indexOf(FLAGS['QSIDE_CASTLE']) > -1;\n  }\n  isBigPawn() {\n    return this.flags.indexOf(FLAGS['BIG_PAWN']) > -1;\n  }\n}\nconst EMPTY = -1;\nconst FLAGS = {\n  NORMAL: 'n',\n  CAPTURE: 'c',\n  BIG_PAWN: 'b',\n  EP_CAPTURE: 'e',\n  PROMOTION: 'p',\n  KSIDE_CASTLE: 'k',\n  QSIDE_CASTLE: 'q',\n  NULL_MOVE: '-'\n};\n// prettier-ignore\nconst SQUARES = ['a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8', 'a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7', 'a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6', 'a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5', 'a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4', 'a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3', 'a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2', 'a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1'];\nconst BITS = {\n  NORMAL: 1,\n  CAPTURE: 2,\n  BIG_PAWN: 4,\n  EP_CAPTURE: 8,\n  PROMOTION: 16,\n  KSIDE_CASTLE: 32,\n  QSIDE_CASTLE: 64,\n  NULL_MOVE: 128\n};\n/* eslint-disable @typescript-eslint/naming-convention */\n// these are required, according to spec\nconst SEVEN_TAG_ROSTER = {\n  Event: '?',\n  Site: '?',\n  Date: '????.??.??',\n  Round: '?',\n  White: '?',\n  Black: '?',\n  Result: '*'\n};\n/**\n * These nulls are placeholders to fix the order of tags (as they appear in PGN spec); null values will be\n * eliminated in getHeaders()\n */\nconst SUPLEMENTAL_TAGS = {\n  WhiteTitle: null,\n  BlackTitle: null,\n  WhiteElo: null,\n  BlackElo: null,\n  WhiteUSCF: null,\n  BlackUSCF: null,\n  WhiteNA: null,\n  BlackNA: null,\n  WhiteType: null,\n  BlackType: null,\n  EventDate: null,\n  EventSponsor: null,\n  Section: null,\n  Stage: null,\n  Board: null,\n  Opening: null,\n  Variation: null,\n  SubVariation: null,\n  ECO: null,\n  NIC: null,\n  Time: null,\n  UTCTime: null,\n  UTCDate: null,\n  TimeControl: null,\n  SetUp: null,\n  FEN: null,\n  Termination: null,\n  Annotator: null,\n  Mode: null,\n  PlyCount: null\n};\nconst HEADER_TEMPLATE = _objectSpread(_objectSpread({}, SEVEN_TAG_ROSTER), SUPLEMENTAL_TAGS);\n/* eslint-enable @typescript-eslint/naming-convention */\n/*\n * NOTES ABOUT 0x88 MOVE GENERATION ALGORITHM\n * ----------------------------------------------------------------------------\n * From https://github.com/jhlywa/chess.js/issues/230\n *\n * A lot of people are confused when they first see the internal representation\n * of chess.js. It uses the 0x88 Move Generation Algorithm which internally\n * stores the board as an 8x16 array. This is purely for efficiency but has a\n * couple of interesting benefits:\n *\n * 1. 0x88 offers a very inexpensive \"off the board\" check. Bitwise AND (&) any\n *    square with 0x88, if the result is non-zero then the square is off the\n *    board. For example, assuming a knight square A8 (0 in 0x88 notation),\n *    there are 8 possible directions in which the knight can move. These\n *    directions are relative to the 8x16 board and are stored in the\n *    PIECE_OFFSETS map. One possible move is A8 - 18 (up one square, and two\n *    squares to the left - which is off the board). 0 - 18 = -18 & 0x88 = 0x88\n *    (because of two-complement representation of -18). The non-zero result\n *    means the square is off the board and the move is illegal. Take the\n *    opposite move (from A8 to C7), 0 + 18 = 18 & 0x88 = 0. A result of zero\n *    means the square is on the board.\n *\n * 2. The relative distance (or difference) between two squares on a 8x16 board\n *    is unique and can be used to inexpensively determine if a piece on a\n *    square can attack any other arbitrary square. For example, let's see if a\n *    pawn on E7 can attack E2. The difference between E7 (20) - E2 (100) is\n *    -80. We add 119 to make the ATTACKS array index non-negative (because the\n *    worst case difference is A8 - H1 = -119). The ATTACKS array contains a\n *    bitmask of pieces that can attack from that distance and direction.\n *    ATTACKS[-80 + 119=39] gives us 24 or 0b11000 in binary. Look at the\n *    PIECE_MASKS map to determine the mask for a given piece type. In our pawn\n *    example, we would check to see if 24 & 0x1 is non-zero, which it is\n *    not. So, naturally, a pawn on E7 can't attack a piece on E2. However, a\n *    rook can since 24 & 0x8 is non-zero. The only thing left to check is that\n *    there are no blocking pieces between E7 and E2. That's where the RAYS\n *    array comes in. It provides an offset (in this case 16) to add to E7 (20)\n *    to check for blocking pieces. E7 (20) + 16 = E6 (36) + 16 = E5 (52) etc.\n */\n// prettier-ignore\n// eslint-disable-next-line\nconst Ox88 = {\n  a8: 0,\n  b8: 1,\n  c8: 2,\n  d8: 3,\n  e8: 4,\n  f8: 5,\n  g8: 6,\n  h8: 7,\n  a7: 16,\n  b7: 17,\n  c7: 18,\n  d7: 19,\n  e7: 20,\n  f7: 21,\n  g7: 22,\n  h7: 23,\n  a6: 32,\n  b6: 33,\n  c6: 34,\n  d6: 35,\n  e6: 36,\n  f6: 37,\n  g6: 38,\n  h6: 39,\n  a5: 48,\n  b5: 49,\n  c5: 50,\n  d5: 51,\n  e5: 52,\n  f5: 53,\n  g5: 54,\n  h5: 55,\n  a4: 64,\n  b4: 65,\n  c4: 66,\n  d4: 67,\n  e4: 68,\n  f4: 69,\n  g4: 70,\n  h4: 71,\n  a3: 80,\n  b3: 81,\n  c3: 82,\n  d3: 83,\n  e3: 84,\n  f3: 85,\n  g3: 86,\n  h3: 87,\n  a2: 96,\n  b2: 97,\n  c2: 98,\n  d2: 99,\n  e2: 100,\n  f2: 101,\n  g2: 102,\n  h2: 103,\n  a1: 112,\n  b1: 113,\n  c1: 114,\n  d1: 115,\n  e1: 116,\n  f1: 117,\n  g1: 118,\n  h1: 119\n};\nconst PAWN_OFFSETS = {\n  b: [16, 32, 17, 15],\n  w: [-16, -32, -17, -15]\n};\nconst PIECE_OFFSETS = {\n  n: [-18, -33, -31, -14, 18, 33, 31, 14],\n  b: [-17, -15, 17, 15],\n  r: [-16, 1, 16, -1],\n  q: [-17, -16, -15, 1, 17, 16, 15, -1],\n  k: [-17, -16, -15, 1, 17, 16, 15, -1]\n};\n// prettier-ignore\nconst ATTACKS = [20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20, 0, 0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0, 0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0, 24, 24, 24, 24, 24, 24, 56, 0, 56, 24, 24, 24, 24, 24, 24, 0, 0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0, 0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0, 20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20];\n// prettier-ignore\nconst RAYS = [17, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 15, 0, 0, 17, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 15, 0, 0, 0, 0, 17, 0, 0, 0, 0, 16, 0, 0, 0, 0, 15, 0, 0, 0, 0, 0, 0, 17, 0, 0, 0, 16, 0, 0, 0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 17, 0, 0, 16, 0, 0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 0, 16, 0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 16, 15, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, -1, -1, -1, -1, -1, -1, -1, 0, 0, 0, 0, 0, 0, 0, -15, -16, -17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -15, 0, -16, 0, -17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -15, 0, 0, -16, 0, 0, -17, 0, 0, 0, 0, 0, 0, 0, 0, -15, 0, 0, 0, -16, 0, 0, 0, -17, 0, 0, 0, 0, 0, 0, -15, 0, 0, 0, 0, -16, 0, 0, 0, 0, -17, 0, 0, 0, 0, -15, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, -17, 0, 0, -15, 0, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, 0, -17];\nconst PIECE_MASKS = {\n  p: 0x1,\n  n: 0x2,\n  b: 0x4,\n  r: 0x8,\n  q: 0x10,\n  k: 0x20\n};\nconst SYMBOLS = 'pnbrqkPNBRQK';\nconst PROMOTIONS = [KNIGHT, BISHOP, ROOK, QUEEN];\nconst RANK_1 = 7;\nconst RANK_2 = 6;\n/*\n * const RANK_3 = 5\n * const RANK_4 = 4\n * const RANK_5 = 3\n * const RANK_6 = 2\n */\nconst RANK_7 = 1;\nconst RANK_8 = 0;\nconst SIDES = {\n  [KING]: BITS.KSIDE_CASTLE,\n  [QUEEN]: BITS.QSIDE_CASTLE\n};\nconst ROOKS = {\n  w: [{\n    square: Ox88.a1,\n    flag: BITS.QSIDE_CASTLE\n  }, {\n    square: Ox88.h1,\n    flag: BITS.KSIDE_CASTLE\n  }],\n  b: [{\n    square: Ox88.a8,\n    flag: BITS.QSIDE_CASTLE\n  }, {\n    square: Ox88.h8,\n    flag: BITS.KSIDE_CASTLE\n  }]\n};\nconst SECOND_RANK = {\n  b: RANK_7,\n  w: RANK_2\n};\nconst SAN_NULLMOVE = '--';\n// Extracts the zero-based rank of an 0x88 square.\nfunction rank(square) {\n  return square >> 4;\n}\n// Extracts the zero-based file of an 0x88 square.\nfunction file(square) {\n  return square & 0xf;\n}\nfunction isDigit(c) {\n  return '0123456789'.indexOf(c) !== -1;\n}\n// Converts a 0x88 square to algebraic notation.\nfunction algebraic(square) {\n  const f = file(square);\n  const r = rank(square);\n  return 'abcdefgh'.substring(f, f + 1) + '87654321'.substring(r, r + 1);\n}\nfunction swapColor(color) {\n  return color === WHITE ? BLACK : WHITE;\n}\nfunction validateFen(fen) {\n  // 1st criterion: 6 space-seperated fields?\n  const tokens = fen.split(/\\s+/);\n  if (tokens.length !== 6) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: must contain six space-delimited fields'\n    };\n  }\n  // 2nd criterion: move number field is a integer value > 0?\n  const moveNumber = parseInt(tokens[5], 10);\n  if (isNaN(moveNumber) || moveNumber <= 0) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: move number must be a positive integer'\n    };\n  }\n  // 3rd criterion: half move counter is an integer >= 0?\n  const halfMoves = parseInt(tokens[4], 10);\n  if (isNaN(halfMoves) || halfMoves < 0) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: half move counter number must be a non-negative integer'\n    };\n  }\n  // 4th criterion: 4th field is a valid e.p.-string?\n  if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: en-passant square is invalid'\n    };\n  }\n  // 5th criterion: 3th field is a valid castle-string?\n  if (/[^kKqQ-]/.test(tokens[2])) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: castling availability is invalid'\n    };\n  }\n  // 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)?\n  if (!/^(w|b)$/.test(tokens[1])) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: side-to-move is invalid'\n    };\n  }\n  // 7th criterion: 1st field contains 8 rows?\n  const rows = tokens[0].split('/');\n  if (rows.length !== 8) {\n    return {\n      ok: false,\n      error: \"Invalid FEN: piece data does not contain 8 '/'-delimited rows\"\n    };\n  }\n  // 8th criterion: every row is valid?\n  for (let i = 0; i < rows.length; i++) {\n    // check for right sum of fields AND not two numbers in succession\n    let sumFields = 0;\n    let previousWasNumber = false;\n    for (let k = 0; k < rows[i].length; k++) {\n      if (isDigit(rows[i][k])) {\n        if (previousWasNumber) {\n          return {\n            ok: false,\n            error: 'Invalid FEN: piece data is invalid (consecutive number)'\n          };\n        }\n        sumFields += parseInt(rows[i][k], 10);\n        previousWasNumber = true;\n      } else {\n        if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n          return {\n            ok: false,\n            error: 'Invalid FEN: piece data is invalid (invalid piece)'\n          };\n        }\n        sumFields += 1;\n        previousWasNumber = false;\n      }\n    }\n    if (sumFields !== 8) {\n      return {\n        ok: false,\n        error: 'Invalid FEN: piece data is invalid (too many squares in rank)'\n      };\n    }\n  }\n  // 9th criterion: is en-passant square legal?\n  if (tokens[3][1] == '3' && tokens[1] == 'w' || tokens[3][1] == '6' && tokens[1] == 'b') {\n    return {\n      ok: false,\n      error: 'Invalid FEN: illegal en-passant square'\n    };\n  }\n  // 10th criterion: does chess position contain exact two kings?\n  const kings = [{\n    color: 'white',\n    regex: /K/g\n  }, {\n    color: 'black',\n    regex: /k/g\n  }];\n  for (const {\n    color,\n    regex\n  } of kings) {\n    if (!regex.test(tokens[0])) {\n      return {\n        ok: false,\n        error: \"Invalid FEN: missing \".concat(color, \" king\")\n      };\n    }\n    if ((tokens[0].match(regex) || []).length > 1) {\n      return {\n        ok: false,\n        error: \"Invalid FEN: too many \".concat(color, \" kings\")\n      };\n    }\n  }\n  // 11th criterion: are any pawns on the first or eighth rows?\n  if (Array.from(rows[0] + rows[7]).some(char => char.toUpperCase() === 'P')) {\n    return {\n      ok: false,\n      error: 'Invalid FEN: some pawns are on the edge rows'\n    };\n  }\n  return {\n    ok: true\n  };\n}\n// this function is used to uniquely identify ambiguous moves\nfunction getDisambiguator(move, moves) {\n  const from = move.from;\n  const to = move.to;\n  const piece = move.piece;\n  let ambiguities = 0;\n  let sameRank = 0;\n  let sameFile = 0;\n  for (let i = 0, len = moves.length; i < len; i++) {\n    const ambigFrom = moves[i].from;\n    const ambigTo = moves[i].to;\n    const ambigPiece = moves[i].piece;\n    /*\n     * if a move of the same piece type ends on the same to square, we'll need\n     * to add a disambiguator to the algebraic notation\n     */\n    if (piece === ambigPiece && from !== ambigFrom && to === ambigTo) {\n      ambiguities++;\n      if (rank(from) === rank(ambigFrom)) {\n        sameRank++;\n      }\n      if (file(from) === file(ambigFrom)) {\n        sameFile++;\n      }\n    }\n  }\n  if (ambiguities > 0) {\n    if (sameRank > 0 && sameFile > 0) {\n      /*\n       * if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      return algebraic(from);\n    } else if (sameFile > 0) {\n      /*\n       * if the moving piece rests on the same file, use the rank symbol as the\n       * disambiguator\n       */\n      return algebraic(from).charAt(1);\n    } else {\n      // else use the file symbol\n      return algebraic(from).charAt(0);\n    }\n  }\n  return '';\n}\nfunction addMove(moves, color, from, to, piece) {\n  let captured = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n  let flags = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : BITS.NORMAL;\n  const r = rank(to);\n  if (piece === PAWN && (r === RANK_1 || r === RANK_8)) {\n    for (let i = 0; i < PROMOTIONS.length; i++) {\n      const promotion = PROMOTIONS[i];\n      moves.push({\n        color,\n        from,\n        to,\n        piece,\n        captured,\n        promotion,\n        flags: flags | BITS.PROMOTION\n      });\n    }\n  } else {\n    moves.push({\n      color,\n      from,\n      to,\n      piece,\n      captured,\n      flags\n    });\n  }\n}\nfunction inferPieceType(san) {\n  let pieceType = san.charAt(0);\n  if (pieceType >= 'a' && pieceType <= 'h') {\n    const matches = san.match(/[a-h]\\d.*[a-h]\\d/);\n    if (matches) {\n      return undefined;\n    }\n    return PAWN;\n  }\n  pieceType = pieceType.toLowerCase();\n  if (pieceType === 'o') {\n    return KING;\n  }\n  return pieceType;\n}\n// parses all of the decorators out of a SAN string\nfunction strippedSan(move) {\n  return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '');\n}\nclass Chess {\n  constructor() {\n    let fen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_POSITION;\n    let {\n      skipValidation = false\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _defineProperty(this, \"_board\", new Array(128));\n    _defineProperty(this, \"_turn\", WHITE);\n    _defineProperty(this, \"_header\", {});\n    _defineProperty(this, \"_kings\", {\n      w: EMPTY,\n      b: EMPTY\n    });\n    _defineProperty(this, \"_epSquare\", -1);\n    _defineProperty(this, \"_halfMoves\", 0);\n    _defineProperty(this, \"_moveNumber\", 0);\n    _defineProperty(this, \"_history\", []);\n    _defineProperty(this, \"_comments\", {});\n    _defineProperty(this, \"_castling\", {\n      w: 0,\n      b: 0\n    });\n    _defineProperty(this, \"_hash\", 0n);\n    // tracks number of times a position has been seen for repetition checking\n    _defineProperty(this, \"_positionCount\", new Map());\n    this.load(fen, {\n      skipValidation\n    });\n  }\n  clear() {\n    let {\n      preserveHeaders = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this._board = new Array(128);\n    this._kings = {\n      w: EMPTY,\n      b: EMPTY\n    };\n    this._turn = WHITE;\n    this._castling = {\n      w: 0,\n      b: 0\n    };\n    this._epSquare = EMPTY;\n    this._halfMoves = 0;\n    this._moveNumber = 1;\n    this._history = [];\n    this._comments = {};\n    this._header = preserveHeaders ? this._header : _objectSpread({}, HEADER_TEMPLATE);\n    this._hash = this._computeHash();\n    this._positionCount = new Map();\n    /*\n     * Delete the SetUp and FEN headers (if preserved), the board is empty and\n     * these headers don't make sense in this state. They'll get added later\n     * via .load() or .put()\n     */\n    this._header['SetUp'] = null;\n    this._header['FEN'] = null;\n  }\n  load(fen) {\n    let {\n      skipValidation = false,\n      preserveHeaders = false\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let tokens = fen.split(/\\s+/);\n    // append commonly omitted fen tokens\n    if (tokens.length >= 2 && tokens.length < 6) {\n      const adjustments = ['-', '-', '0', '1'];\n      fen = tokens.concat(adjustments.slice(-(6 - tokens.length))).join(' ');\n    }\n    tokens = fen.split(/\\s+/);\n    if (!skipValidation) {\n      const {\n        ok,\n        error\n      } = validateFen(fen);\n      if (!ok) {\n        throw new Error(error);\n      }\n    }\n    const position = tokens[0];\n    let square = 0;\n    this.clear({\n      preserveHeaders\n    });\n    for (let i = 0; i < position.length; i++) {\n      const piece = position.charAt(i);\n      if (piece === '/') {\n        square += 8;\n      } else if (isDigit(piece)) {\n        square += parseInt(piece, 10);\n      } else {\n        const color = piece < 'a' ? WHITE : BLACK;\n        this._put({\n          type: piece.toLowerCase(),\n          color\n        }, algebraic(square));\n        square++;\n      }\n    }\n    this._turn = tokens[1];\n    if (tokens[2].indexOf('K') > -1) {\n      this._castling.w |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      this._castling.w |= BITS.QSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      this._castling.b |= BITS.KSIDE_CASTLE;\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      this._castling.b |= BITS.QSIDE_CASTLE;\n    }\n    this._epSquare = tokens[3] === '-' ? EMPTY : Ox88[tokens[3]];\n    this._halfMoves = parseInt(tokens[4], 10);\n    this._moveNumber = parseInt(tokens[5], 10);\n    this._hash = this._computeHash();\n    this._updateSetup(fen);\n    this._incPositionCount();\n  }\n  fen() {\n    let {\n      forceEnpassantSquare = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let empty = 0;\n    let fen = '';\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      if (this._board[i]) {\n        if (empty > 0) {\n          fen += empty;\n          empty = 0;\n        }\n        const {\n          color,\n          type: piece\n        } = this._board[i];\n        fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n      } else {\n        empty++;\n      }\n      if (i + 1 & 0x88) {\n        if (empty > 0) {\n          fen += empty;\n        }\n        if (i !== Ox88.h1) {\n          fen += '/';\n        }\n        empty = 0;\n        i += 8;\n      }\n    }\n    let castling = '';\n    if (this._castling[WHITE] & BITS.KSIDE_CASTLE) {\n      castling += 'K';\n    }\n    if (this._castling[WHITE] & BITS.QSIDE_CASTLE) {\n      castling += 'Q';\n    }\n    if (this._castling[BLACK] & BITS.KSIDE_CASTLE) {\n      castling += 'k';\n    }\n    if (this._castling[BLACK] & BITS.QSIDE_CASTLE) {\n      castling += 'q';\n    }\n    // do we have an empty castling flag?\n    castling = castling || '-';\n    let epSquare = '-';\n    /*\n     * only print the ep square if en passant is a valid move (pawn is present\n     * and ep capture is not pinned)\n     */\n    if (this._epSquare !== EMPTY) {\n      if (forceEnpassantSquare) {\n        epSquare = algebraic(this._epSquare);\n      } else {\n        const bigPawnSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n        const squares = [bigPawnSquare + 1, bigPawnSquare - 1];\n        for (const square of squares) {\n          var _this$_board$square, _this$_board$square2;\n          // is the square off the board?\n          if (square & 0x88) {\n            continue;\n          }\n          const color = this._turn;\n          // is there a pawn that can capture the epSquare?\n          if (((_this$_board$square = this._board[square]) === null || _this$_board$square === void 0 ? void 0 : _this$_board$square.color) === color && ((_this$_board$square2 = this._board[square]) === null || _this$_board$square2 === void 0 ? void 0 : _this$_board$square2.type) === PAWN) {\n            // if the pawn makes an ep capture, does it leave its king in check?\n            this._makeMove({\n              color,\n              from: square,\n              to: this._epSquare,\n              piece: PAWN,\n              captured: PAWN,\n              flags: BITS.EP_CAPTURE\n            });\n            const isLegal = !this._isKingAttacked(color);\n            this._undoMove();\n            // if ep is legal, break and set the ep square in the FEN output\n            if (isLegal) {\n              epSquare = algebraic(this._epSquare);\n              break;\n            }\n          }\n        }\n      }\n    }\n    return [fen, this._turn, castling, epSquare, this._halfMoves, this._moveNumber].join(' ');\n  }\n  _pieceKey(i) {\n    if (!this._board[i]) {\n      return 0n;\n    }\n    const {\n      color,\n      type\n    } = this._board[i];\n    const colorIndex = {\n      w: 0,\n      b: 1\n    }[color];\n    const typeIndex = {\n      p: 0,\n      n: 1,\n      b: 2,\n      r: 3,\n      q: 4,\n      k: 5\n    }[type];\n    return PIECE_KEYS[colorIndex][typeIndex][i];\n  }\n  _epKey() {\n    return this._epSquare === EMPTY ? 0n : EP_KEYS[this._epSquare & 7];\n  }\n  _castlingKey() {\n    const index = this._castling.w >> 5 | this._castling.b >> 3;\n    return CASTLING_KEYS[index];\n  }\n  _computeHash() {\n    let hash = 0n;\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      // did we run off the end of the board\n      if (i & 0x88) {\n        i += 7;\n        continue;\n      }\n      if (this._board[i]) {\n        hash ^= this._pieceKey(i);\n      }\n    }\n    hash ^= this._epKey();\n    hash ^= this._castlingKey();\n    if (this._turn === 'b') {\n      hash ^= SIDE_KEY;\n    }\n    return hash;\n  }\n  /*\n   * Called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object. If the FEN\n   * is equal to the default position, the SetUp and FEN are deleted the setup\n   * is only updated if history.length is zero, ie moves haven't been made.\n   */\n  _updateSetup(fen) {\n    if (this._history.length > 0) return;\n    if (fen !== DEFAULT_POSITION) {\n      this._header['SetUp'] = '1';\n      this._header['FEN'] = fen;\n    } else {\n      this._header['SetUp'] = null;\n      this._header['FEN'] = null;\n    }\n  }\n  reset() {\n    this.load(DEFAULT_POSITION);\n  }\n  get(square) {\n    return this._board[Ox88[square]];\n  }\n  findPiece(piece) {\n    const squares = [];\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      var _this$_board$i;\n      // did we run off the end of the board\n      if (i & 0x88) {\n        i += 7;\n        continue;\n      }\n      // if empty square or wrong color\n      if (!this._board[i] || ((_this$_board$i = this._board[i]) === null || _this$_board$i === void 0 ? void 0 : _this$_board$i.color) !== piece.color) {\n        continue;\n      }\n      // check if square contains the requested piece\n      if (this._board[i].color === piece.color && this._board[i].type === piece.type) {\n        squares.push(algebraic(i));\n      }\n    }\n    return squares;\n  }\n  put(_ref2, square) {\n    let {\n      type,\n      color\n    } = _ref2;\n    if (this._put({\n      type,\n      color\n    }, square)) {\n      this._updateCastlingRights();\n      this._updateEnPassantSquare();\n      this._updateSetup(this.fen());\n      return true;\n    }\n    return false;\n  }\n  _set(sq, piece) {\n    this._hash ^= this._pieceKey(sq);\n    this._board[sq] = piece;\n    this._hash ^= this._pieceKey(sq);\n  }\n  _put(_ref3, square) {\n    let {\n      type,\n      color\n    } = _ref3;\n    // check for piece\n    if (SYMBOLS.indexOf(type.toLowerCase()) === -1) {\n      return false;\n    }\n    // check for valid square\n    if (!(square in Ox88)) {\n      return false;\n    }\n    const sq = Ox88[square];\n    // don't let the user place more than one king\n    if (type == KING && !(this._kings[color] == EMPTY || this._kings[color] == sq)) {\n      return false;\n    }\n    const currentPieceOnSquare = this._board[sq];\n    // if one of the kings will be replaced by the piece from args, set the `_kings` respective entry to `EMPTY`\n    if (currentPieceOnSquare && currentPieceOnSquare.type === KING) {\n      this._kings[currentPieceOnSquare.color] = EMPTY;\n    }\n    this._set(sq, {\n      type: type,\n      color: color\n    });\n    if (type === KING) {\n      this._kings[color] = sq;\n    }\n    return true;\n  }\n  _clear(sq) {\n    this._hash ^= this._pieceKey(sq);\n    delete this._board[sq];\n  }\n  remove(square) {\n    const piece = this.get(square);\n    this._clear(Ox88[square]);\n    if (piece && piece.type === KING) {\n      this._kings[piece.color] = EMPTY;\n    }\n    this._updateCastlingRights();\n    this._updateEnPassantSquare();\n    this._updateSetup(this.fen());\n    return piece;\n  }\n  _updateCastlingRights() {\n    var _this$_board$Ox88$e, _this$_board$Ox88$e2, _this$_board$Ox88$e3, _this$_board$Ox88$e4, _this$_board$Ox88$a, _this$_board$Ox88$a2, _this$_board$Ox88$h, _this$_board$Ox88$h2, _this$_board$Ox88$a3, _this$_board$Ox88$a4, _this$_board$Ox88$h3, _this$_board$Ox88$h4;\n    this._hash ^= this._castlingKey();\n    const whiteKingInPlace = ((_this$_board$Ox88$e = this._board[Ox88.e1]) === null || _this$_board$Ox88$e === void 0 ? void 0 : _this$_board$Ox88$e.type) === KING && ((_this$_board$Ox88$e2 = this._board[Ox88.e1]) === null || _this$_board$Ox88$e2 === void 0 ? void 0 : _this$_board$Ox88$e2.color) === WHITE;\n    const blackKingInPlace = ((_this$_board$Ox88$e3 = this._board[Ox88.e8]) === null || _this$_board$Ox88$e3 === void 0 ? void 0 : _this$_board$Ox88$e3.type) === KING && ((_this$_board$Ox88$e4 = this._board[Ox88.e8]) === null || _this$_board$Ox88$e4 === void 0 ? void 0 : _this$_board$Ox88$e4.color) === BLACK;\n    if (!whiteKingInPlace || ((_this$_board$Ox88$a = this._board[Ox88.a1]) === null || _this$_board$Ox88$a === void 0 ? void 0 : _this$_board$Ox88$a.type) !== ROOK || ((_this$_board$Ox88$a2 = this._board[Ox88.a1]) === null || _this$_board$Ox88$a2 === void 0 ? void 0 : _this$_board$Ox88$a2.color) !== WHITE) {\n      this._castling.w &= -65;\n    }\n    if (!whiteKingInPlace || ((_this$_board$Ox88$h = this._board[Ox88.h1]) === null || _this$_board$Ox88$h === void 0 ? void 0 : _this$_board$Ox88$h.type) !== ROOK || ((_this$_board$Ox88$h2 = this._board[Ox88.h1]) === null || _this$_board$Ox88$h2 === void 0 ? void 0 : _this$_board$Ox88$h2.color) !== WHITE) {\n      this._castling.w &= -33;\n    }\n    if (!blackKingInPlace || ((_this$_board$Ox88$a3 = this._board[Ox88.a8]) === null || _this$_board$Ox88$a3 === void 0 ? void 0 : _this$_board$Ox88$a3.type) !== ROOK || ((_this$_board$Ox88$a4 = this._board[Ox88.a8]) === null || _this$_board$Ox88$a4 === void 0 ? void 0 : _this$_board$Ox88$a4.color) !== BLACK) {\n      this._castling.b &= -65;\n    }\n    if (!blackKingInPlace || ((_this$_board$Ox88$h3 = this._board[Ox88.h8]) === null || _this$_board$Ox88$h3 === void 0 ? void 0 : _this$_board$Ox88$h3.type) !== ROOK || ((_this$_board$Ox88$h4 = this._board[Ox88.h8]) === null || _this$_board$Ox88$h4 === void 0 ? void 0 : _this$_board$Ox88$h4.color) !== BLACK) {\n      this._castling.b &= -33;\n    }\n    this._hash ^= this._castlingKey();\n  }\n  _updateEnPassantSquare() {\n    var _this$_board$currentS, _this$_board$currentS2;\n    if (this._epSquare === EMPTY) {\n      return;\n    }\n    const startSquare = this._epSquare + (this._turn === WHITE ? -16 : 16);\n    const currentSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n    const attackers = [currentSquare + 1, currentSquare - 1];\n    if (this._board[startSquare] !== null || this._board[this._epSquare] !== null || ((_this$_board$currentS = this._board[currentSquare]) === null || _this$_board$currentS === void 0 ? void 0 : _this$_board$currentS.color) !== swapColor(this._turn) || ((_this$_board$currentS2 = this._board[currentSquare]) === null || _this$_board$currentS2 === void 0 ? void 0 : _this$_board$currentS2.type) !== PAWN) {\n      this._hash ^= this._epKey();\n      this._epSquare = EMPTY;\n      return;\n    }\n    const canCapture = square => {\n      var _this$_board$square3, _this$_board$square4;\n      return !(square & 0x88) && ((_this$_board$square3 = this._board[square]) === null || _this$_board$square3 === void 0 ? void 0 : _this$_board$square3.color) === this._turn && ((_this$_board$square4 = this._board[square]) === null || _this$_board$square4 === void 0 ? void 0 : _this$_board$square4.type) === PAWN;\n    };\n    if (!attackers.some(canCapture)) {\n      this._hash ^= this._epKey();\n      this._epSquare = EMPTY;\n    }\n  }\n  _attacked(color, square, verbose) {\n    const attackers = [];\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      // did we run off the end of the board\n      if (i & 0x88) {\n        i += 7;\n        continue;\n      }\n      // if empty square or wrong color\n      if (this._board[i] === undefined || this._board[i].color !== color) {\n        continue;\n      }\n      const piece = this._board[i];\n      const difference = i - square;\n      // skip - to/from square are the same\n      if (difference === 0) {\n        continue;\n      }\n      const index = difference + 119;\n      if (ATTACKS[index] & PIECE_MASKS[piece.type]) {\n        if (piece.type === PAWN) {\n          if (difference > 0 && piece.color === WHITE || difference <= 0 && piece.color === BLACK) {\n            if (!verbose) {\n              return true;\n            } else {\n              attackers.push(algebraic(i));\n            }\n          }\n          continue;\n        }\n        // if the piece is a knight or a king\n        if (piece.type === 'n' || piece.type === 'k') {\n          if (!verbose) {\n            return true;\n          } else {\n            attackers.push(algebraic(i));\n            continue;\n          }\n        }\n        const offset = RAYS[index];\n        let j = i + offset;\n        let blocked = false;\n        while (j !== square) {\n          if (this._board[j] != null) {\n            blocked = true;\n            break;\n          }\n          j += offset;\n        }\n        if (!blocked) {\n          if (!verbose) {\n            return true;\n          } else {\n            attackers.push(algebraic(i));\n            continue;\n          }\n        }\n      }\n    }\n    if (verbose) {\n      return attackers;\n    } else {\n      return false;\n    }\n  }\n  attackers(square, attackedBy) {\n    if (!attackedBy) {\n      return this._attacked(this._turn, Ox88[square], true);\n    } else {\n      return this._attacked(attackedBy, Ox88[square], true);\n    }\n  }\n  _isKingAttacked(color) {\n    const square = this._kings[color];\n    return square === -1 ? false : this._attacked(swapColor(color), square);\n  }\n  hash() {\n    return this._hash.toString(16);\n  }\n  isAttacked(square, attackedBy) {\n    return this._attacked(attackedBy, Ox88[square]);\n  }\n  isCheck() {\n    return this._isKingAttacked(this._turn);\n  }\n  inCheck() {\n    return this.isCheck();\n  }\n  isCheckmate() {\n    return this.isCheck() && this._moves().length === 0;\n  }\n  isStalemate() {\n    return !this.isCheck() && this._moves().length === 0;\n  }\n  isInsufficientMaterial() {\n    /*\n     * k.b. vs k.b. (of opposite colors) with mate in 1:\n     * 8/8/8/8/1b6/8/B1k5/K7 b - - 0 1\n     *\n     * k.b. vs k.n. with mate in 1:\n     * 8/8/8/8/1n6/8/B7/K1k5 b - - 2 1\n     */\n    const pieces = {\n      b: 0,\n      n: 0,\n      r: 0,\n      q: 0,\n      k: 0,\n      p: 0\n    };\n    const bishops = [];\n    let numPieces = 0;\n    let squareColor = 0;\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      squareColor = (squareColor + 1) % 2;\n      if (i & 0x88) {\n        i += 7;\n        continue;\n      }\n      const piece = this._board[i];\n      if (piece) {\n        pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1;\n        if (piece.type === BISHOP) {\n          bishops.push(squareColor);\n        }\n        numPieces++;\n      }\n    }\n    // k vs. k\n    if (numPieces === 2) {\n      return true;\n    } else if (\n    // k vs. kn .... or .... k vs. kb\n    numPieces === 3 && (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)) {\n      return true;\n    } else if (numPieces === pieces[BISHOP] + 2) {\n      // kb vs. kb where any number of bishops are all on the same color\n      let sum = 0;\n      const len = bishops.length;\n      for (let i = 0; i < len; i++) {\n        sum += bishops[i];\n      }\n      if (sum === 0 || sum === len) {\n        return true;\n      }\n    }\n    return false;\n  }\n  isThreefoldRepetition() {\n    return this._getPositionCount(this._hash) >= 3;\n  }\n  isDrawByFiftyMoves() {\n    return this._halfMoves >= 100; // 50 moves per side = 100 half moves\n  }\n  isDraw() {\n    return this.isDrawByFiftyMoves() || this.isStalemate() || this.isInsufficientMaterial() || this.isThreefoldRepetition();\n  }\n  isGameOver() {\n    return this.isCheckmate() || this.isDraw();\n  }\n  moves() {\n    let {\n      verbose = false,\n      square = undefined,\n      piece = undefined\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const moves = this._moves({\n      square,\n      piece\n    });\n    if (verbose) {\n      return moves.map(move => new Move(this, move));\n    } else {\n      return moves.map(move => this._moveToSan(move, moves));\n    }\n  }\n  _moves() {\n    let {\n      legal = true,\n      piece = undefined,\n      square = undefined\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const forSquare = square ? square.toLowerCase() : undefined;\n    const forPiece = piece === null || piece === void 0 ? void 0 : piece.toLowerCase();\n    const moves = [];\n    const us = this._turn;\n    const them = swapColor(us);\n    let firstSquare = Ox88.a8;\n    let lastSquare = Ox88.h1;\n    let singleSquare = false;\n    // are we generating moves for a single square?\n    if (forSquare) {\n      // illegal square, return empty moves\n      if (!(forSquare in Ox88)) {\n        return [];\n      } else {\n        firstSquare = lastSquare = Ox88[forSquare];\n        singleSquare = true;\n      }\n    }\n    for (let from = firstSquare; from <= lastSquare; from++) {\n      // did we run off the end of the board\n      if (from & 0x88) {\n        from += 7;\n        continue;\n      }\n      // empty square or opponent, skip\n      if (!this._board[from] || this._board[from].color === them) {\n        continue;\n      }\n      const {\n        type\n      } = this._board[from];\n      let to;\n      if (type === PAWN) {\n        if (forPiece && forPiece !== type) continue;\n        // single square, non-capturing\n        to = from + PAWN_OFFSETS[us][0];\n        if (!this._board[to]) {\n          addMove(moves, us, from, to, PAWN);\n          // double square\n          to = from + PAWN_OFFSETS[us][1];\n          if (SECOND_RANK[us] === rank(from) && !this._board[to]) {\n            addMove(moves, us, from, to, PAWN, undefined, BITS.BIG_PAWN);\n          }\n        }\n        // pawn captures\n        for (let j = 2; j < 4; j++) {\n          var _this$_board$to;\n          to = from + PAWN_OFFSETS[us][j];\n          if (to & 0x88) continue;\n          if (((_this$_board$to = this._board[to]) === null || _this$_board$to === void 0 ? void 0 : _this$_board$to.color) === them) {\n            addMove(moves, us, from, to, PAWN, this._board[to].type, BITS.CAPTURE);\n          } else if (to === this._epSquare) {\n            addMove(moves, us, from, to, PAWN, PAWN, BITS.EP_CAPTURE);\n          }\n        }\n      } else {\n        if (forPiece && forPiece !== type) continue;\n        for (let j = 0, len = PIECE_OFFSETS[type].length; j < len; j++) {\n          const offset = PIECE_OFFSETS[type][j];\n          to = from;\n          while (true) {\n            to += offset;\n            if (to & 0x88) break;\n            if (!this._board[to]) {\n              addMove(moves, us, from, to, type);\n            } else {\n              // own color, stop loop\n              if (this._board[to].color === us) break;\n              addMove(moves, us, from, to, type, this._board[to].type, BITS.CAPTURE);\n              break;\n            }\n            /* break, if knight or king */\n            if (type === KNIGHT || type === KING) break;\n          }\n        }\n      }\n    }\n    /*\n     * check for castling if we're:\n     *   a) generating all moves, or\n     *   b) doing single square move generation on the king's square\n     */\n    if (forPiece === undefined || forPiece === KING) {\n      if (!singleSquare || lastSquare === this._kings[us]) {\n        // king-side castling\n        if (this._castling[us] & BITS.KSIDE_CASTLE) {\n          const castlingFrom = this._kings[us];\n          const castlingTo = castlingFrom + 2;\n          if (!this._board[castlingFrom + 1] && !this._board[castlingTo] && !this._attacked(them, this._kings[us]) && !this._attacked(them, castlingFrom + 1) && !this._attacked(them, castlingTo)) {\n            addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.KSIDE_CASTLE);\n          }\n        }\n        // queen-side castling\n        if (this._castling[us] & BITS.QSIDE_CASTLE) {\n          const castlingFrom = this._kings[us];\n          const castlingTo = castlingFrom - 2;\n          if (!this._board[castlingFrom - 1] && !this._board[castlingFrom - 2] && !this._board[castlingFrom - 3] && !this._attacked(them, this._kings[us]) && !this._attacked(them, castlingFrom - 1) && !this._attacked(them, castlingTo)) {\n            addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.QSIDE_CASTLE);\n          }\n        }\n      }\n    }\n    /*\n     * return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal || this._kings[us] === -1) {\n      return moves;\n    }\n    // filter out illegal moves\n    const legalMoves = [];\n    for (let i = 0, len = moves.length; i < len; i++) {\n      this._makeMove(moves[i]);\n      if (!this._isKingAttacked(us)) {\n        legalMoves.push(moves[i]);\n      }\n      this._undoMove();\n    }\n    return legalMoves;\n  }\n  move(move) {\n    let {\n      strict = false\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    /*\n     * The move function can be called with in the following parameters:\n     *\n     * .move('Nxb7')       <- argument is a case-sensitive SAN string\n     *\n     * .move({ from: 'h7', <- argument is a move object\n     *         to :'h8',\n     *         promotion: 'q' })\n     *\n     *\n     * An optional strict argument may be supplied to tell chess.js to\n     * strictly follow the SAN specification.\n     */\n    let moveObj = null;\n    if (typeof move === 'string') {\n      moveObj = this._moveFromSan(move, strict);\n    } else if (move === null) {\n      moveObj = this._moveFromSan(SAN_NULLMOVE, strict);\n    } else if (typeof move === 'object') {\n      const moves = this._moves();\n      // convert the pretty move object to an ugly move object\n      for (let i = 0, len = moves.length; i < len; i++) {\n        if (move.from === algebraic(moves[i].from) && move.to === algebraic(moves[i].to) && (!('promotion' in moves[i]) || move.promotion === moves[i].promotion)) {\n          moveObj = moves[i];\n          break;\n        }\n      }\n    }\n    // failed to find move\n    if (!moveObj) {\n      if (typeof move === 'string') {\n        throw new Error(\"Invalid move: \".concat(move));\n      } else {\n        throw new Error(\"Invalid move: \".concat(JSON.stringify(move)));\n      }\n    }\n    //disallow null moves when in check\n    if (this.isCheck() && moveObj.flags & BITS.NULL_MOVE) {\n      throw new Error('Null move not allowed when in check');\n    }\n    /*\n     * need to make a copy of move because we can't generate SAN after the move\n     * is made\n     */\n    const prettyMove = new Move(this, moveObj);\n    this._makeMove(moveObj);\n    this._incPositionCount();\n    return prettyMove;\n  }\n  _push(move) {\n    this._history.push({\n      move,\n      kings: {\n        b: this._kings.b,\n        w: this._kings.w\n      },\n      turn: this._turn,\n      castling: {\n        b: this._castling.b,\n        w: this._castling.w\n      },\n      epSquare: this._epSquare,\n      halfMoves: this._halfMoves,\n      moveNumber: this._moveNumber\n    });\n  }\n  _movePiece(from, to) {\n    this._hash ^= this._pieceKey(from);\n    this._board[to] = this._board[from];\n    delete this._board[from];\n    this._hash ^= this._pieceKey(to);\n  }\n  _makeMove(move) {\n    const us = this._turn;\n    const them = swapColor(us);\n    this._push(move);\n    if (move.flags & BITS.NULL_MOVE) {\n      if (us === BLACK) {\n        this._moveNumber++;\n      }\n      this._halfMoves++;\n      this._turn = them;\n      this._epSquare = EMPTY;\n      return;\n    }\n    this._hash ^= this._epKey();\n    this._hash ^= this._castlingKey();\n    if (move.captured) {\n      this._hash ^= this._pieceKey(move.to);\n    }\n    this._movePiece(move.from, move.to);\n    // if ep capture, remove the captured pawn\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (this._turn === BLACK) {\n        this._clear(move.to - 16);\n      } else {\n        this._clear(move.to + 16);\n      }\n    }\n    // if pawn promotion, replace with new piece\n    if (move.promotion) {\n      this._clear(move.to);\n      this._set(move.to, {\n        type: move.promotion,\n        color: us\n      });\n    }\n    // if we moved the king\n    if (this._board[move.to].type === KING) {\n      this._kings[us] = move.to;\n      // if we castled, move the rook next to the king\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        const castlingTo = move.to - 1;\n        const castlingFrom = move.to + 1;\n        this._movePiece(castlingFrom, castlingTo);\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        const castlingTo = move.to + 1;\n        const castlingFrom = move.to - 2;\n        this._movePiece(castlingFrom, castlingTo);\n      }\n      // turn off castling\n      this._castling[us] = 0;\n    }\n    // turn off castling if we move a rook\n    if (this._castling[us]) {\n      for (let i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (move.from === ROOKS[us][i].square && this._castling[us] & ROOKS[us][i].flag) {\n          this._castling[us] ^= ROOKS[us][i].flag;\n          break;\n        }\n      }\n    }\n    // turn off castling if we capture a rook\n    if (this._castling[them]) {\n      for (let i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (move.to === ROOKS[them][i].square && this._castling[them] & ROOKS[them][i].flag) {\n          this._castling[them] ^= ROOKS[them][i].flag;\n          break;\n        }\n      }\n    }\n    this._hash ^= this._castlingKey();\n    // if big pawn move, update the en passant square\n    if (move.flags & BITS.BIG_PAWN) {\n      var _this$_board, _this$_board2, _this$_board3, _this$_board4;\n      let epSquare;\n      if (us === BLACK) {\n        epSquare = move.to - 16;\n      } else {\n        epSquare = move.to + 16;\n      }\n      if (!(move.to - 1 & 0x88) && ((_this$_board = this._board[move.to - 1]) === null || _this$_board === void 0 ? void 0 : _this$_board.type) === PAWN && ((_this$_board2 = this._board[move.to - 1]) === null || _this$_board2 === void 0 ? void 0 : _this$_board2.color) === them || !(move.to + 1 & 0x88) && ((_this$_board3 = this._board[move.to + 1]) === null || _this$_board3 === void 0 ? void 0 : _this$_board3.type) === PAWN && ((_this$_board4 = this._board[move.to + 1]) === null || _this$_board4 === void 0 ? void 0 : _this$_board4.color) === them) {\n        this._epSquare = epSquare;\n        this._hash ^= this._epKey();\n      } else {\n        this._epSquare = EMPTY;\n      }\n    } else {\n      this._epSquare = EMPTY;\n    }\n    // reset the 50 move counter if a pawn is moved or a piece is captured\n    if (move.piece === PAWN) {\n      this._halfMoves = 0;\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      this._halfMoves = 0;\n    } else {\n      this._halfMoves++;\n    }\n    if (us === BLACK) {\n      this._moveNumber++;\n    }\n    this._turn = them;\n    this._hash ^= SIDE_KEY;\n  }\n  undo() {\n    const hash = this._hash;\n    const move = this._undoMove();\n    if (move) {\n      const prettyMove = new Move(this, move);\n      this._decPositionCount(hash);\n      return prettyMove;\n    }\n    return null;\n  }\n  _undoMove() {\n    const old = this._history.pop();\n    if (old === undefined) {\n      return null;\n    }\n    this._hash ^= this._epKey();\n    this._hash ^= this._castlingKey();\n    const move = old.move;\n    this._kings = old.kings;\n    this._turn = old.turn;\n    this._castling = old.castling;\n    this._epSquare = old.epSquare;\n    this._halfMoves = old.halfMoves;\n    this._moveNumber = old.moveNumber;\n    this._hash ^= this._epKey();\n    this._hash ^= this._castlingKey();\n    this._hash ^= SIDE_KEY;\n    const us = this._turn;\n    const them = swapColor(us);\n    if (move.flags & BITS.NULL_MOVE) {\n      return move;\n    }\n    this._movePiece(move.to, move.from);\n    // to undo any promotions\n    if (move.piece) {\n      this._clear(move.from);\n      this._set(move.from, {\n        type: move.piece,\n        color: us\n      });\n    }\n    if (move.captured) {\n      if (move.flags & BITS.EP_CAPTURE) {\n        // en passant capture\n        let index;\n        if (us === BLACK) {\n          index = move.to - 16;\n        } else {\n          index = move.to + 16;\n        }\n        this._set(index, {\n          type: PAWN,\n          color: them\n        });\n      } else {\n        // regular capture\n        this._set(move.to, {\n          type: move.captured,\n          color: them\n        });\n      }\n    }\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      let castlingTo, castlingFrom;\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castlingTo = move.to + 1;\n        castlingFrom = move.to - 1;\n      } else {\n        castlingTo = move.to - 2;\n        castlingFrom = move.to + 1;\n      }\n      this._movePiece(castlingFrom, castlingTo);\n    }\n    return move;\n  }\n  pgn() {\n    let {\n      newline = '\\n',\n      maxWidth = 0\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    /*\n     * using the specification from http://www.chessclub.com/help/PGN-spec\n     * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n     */\n    const result = [];\n    let headerExists = false;\n    /* add the PGN header information */\n    for (const i in this._header) {\n      /*\n       * TODO: order of enumerated properties in header object is not\n       * guaranteed, see ECMA-262 spec (section 12.6.4)\n       *\n       * By using HEADER_TEMPLATE, the order of tags should be preserved; we\n       * do have to check for null placeholders, though, and omit them\n       */\n      const headerTag = this._header[i];\n      if (headerTag) result.push(\"[\".concat(i, \" \\\"\").concat(this._header[i], \"\\\"]\") + newline);\n      headerExists = true;\n    }\n    if (headerExists && this._history.length) {\n      result.push(newline);\n    }\n    const appendComment = moveString => {\n      const comment = this._comments[this.fen()];\n      if (typeof comment !== 'undefined') {\n        const delimiter = moveString.length > 0 ? ' ' : '';\n        moveString = \"\".concat(moveString).concat(delimiter, \"{\").concat(comment, \"}\");\n      }\n      return moveString;\n    };\n    // pop all of history onto reversed_history\n    const reversedHistory = [];\n    while (this._history.length > 0) {\n      reversedHistory.push(this._undoMove());\n    }\n    const moves = [];\n    let moveString = '';\n    // special case of a commented starting position with no moves\n    if (reversedHistory.length === 0) {\n      moves.push(appendComment(''));\n    }\n    // build the list of moves.  a move_string looks like: \"3. e3 e6\"\n    while (reversedHistory.length > 0) {\n      moveString = appendComment(moveString);\n      const move = reversedHistory.pop();\n      // make TypeScript stop complaining about move being undefined\n      if (!move) {\n        break;\n      }\n      // if the position started with black to move, start PGN with #. ...\n      if (!this._history.length && move.color === 'b') {\n        const prefix = \"\".concat(this._moveNumber, \". ...\");\n        // is there a comment preceding the first move?\n        moveString = moveString ? \"\".concat(moveString, \" \").concat(prefix) : prefix;\n      } else if (move.color === 'w') {\n        // store the previous generated move_string if we have one\n        if (moveString.length) {\n          moves.push(moveString);\n        }\n        moveString = this._moveNumber + '.';\n      }\n      moveString = moveString + ' ' + this._moveToSan(move, this._moves({\n        legal: true\n      }));\n      this._makeMove(move);\n    }\n    // are there any other leftover moves?\n    if (moveString.length) {\n      moves.push(appendComment(moveString));\n    }\n    // is there a result? (there ALWAYS has to be a result according to spec; see Seven Tag Roster)\n    moves.push(this._header.Result || '*');\n    /*\n     * history should be back to what it was before we started generating PGN,\n     * so join together moves\n     */\n    if (maxWidth === 0) {\n      return result.join('') + moves.join(' ');\n    }\n    // TODO (jah): huh?\n    const strip = function () {\n      if (result.length > 0 && result[result.length - 1] === ' ') {\n        result.pop();\n        return true;\n      }\n      return false;\n    };\n    // NB: this does not preserve comment whitespace.\n    const wrapComment = function (width, move) {\n      for (const token of move.split(' ')) {\n        if (!token) {\n          continue;\n        }\n        if (width + token.length > maxWidth) {\n          while (strip()) {\n            width--;\n          }\n          result.push(newline);\n          width = 0;\n        }\n        result.push(token);\n        width += token.length;\n        result.push(' ');\n        width++;\n      }\n      if (strip()) {\n        width--;\n      }\n      return width;\n    };\n    // wrap the PGN output at max_width\n    let currentWidth = 0;\n    for (let i = 0; i < moves.length; i++) {\n      if (currentWidth + moves[i].length > maxWidth) {\n        if (moves[i].includes('{')) {\n          currentWidth = wrapComment(currentWidth, moves[i]);\n          continue;\n        }\n      }\n      // if the current move will push past max_width\n      if (currentWidth + moves[i].length > maxWidth && i !== 0) {\n        // don't end the line with whitespace\n        if (result[result.length - 1] === ' ') {\n          result.pop();\n        }\n        result.push(newline);\n        currentWidth = 0;\n      } else if (i !== 0) {\n        result.push(' ');\n        currentWidth++;\n      }\n      result.push(moves[i]);\n      currentWidth += moves[i].length;\n    }\n    return result.join('');\n  }\n  /**\n   * @deprecated Use `setHeader` and `getHeaders` instead. This method will return null header tags (which is not what you want)\n   */\n  header() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    for (let i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {\n        this._header[args[i]] = args[i + 1];\n      }\n    }\n    return this._header;\n  }\n  // TODO: value validation per spec\n  setHeader(key, value) {\n    var _ref4;\n    this._header[key] = (_ref4 = value !== null && value !== void 0 ? value : SEVEN_TAG_ROSTER[key]) !== null && _ref4 !== void 0 ? _ref4 : null;\n    return this.getHeaders();\n  }\n  removeHeader(key) {\n    if (key in this._header) {\n      this._header[key] = SEVEN_TAG_ROSTER[key] || null;\n      return true;\n    }\n    return false;\n  }\n  // return only non-null headers (omit placemarker nulls)\n  getHeaders() {\n    const nonNullHeaders = {};\n    for (const [key, value] of Object.entries(this._header)) {\n      if (value !== null) {\n        nonNullHeaders[key] = value;\n      }\n    }\n    return nonNullHeaders;\n  }\n  loadPgn(pgn) {\n    let {\n      strict = false,\n      newlineChar = '\\r?\\n'\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // If newlineChar is not the default, replace all instances with \\n\n    if (newlineChar !== '\\r?\\n') {\n      pgn = pgn.replace(new RegExp(newlineChar, 'g'), '\\n');\n    }\n    const parsedPgn = peg$parse(pgn);\n    // Put the board in the starting position\n    this.reset();\n    // parse PGN header\n    const headers = parsedPgn.headers;\n    let fen = '';\n    for (const key in headers) {\n      // check to see user is including fen (possibly with wrong tag case)\n      if (key.toLowerCase() === 'fen') {\n        fen = headers[key];\n      }\n      this.header(key, headers[key]);\n    }\n    /*\n     * the permissive parser should attempt to load a fen tag, even if it's the\n     * wrong case and doesn't include a corresponding [SetUp \"1\"] tag\n     */\n    if (!strict) {\n      if (fen) {\n        this.load(fen, {\n          preserveHeaders: true\n        });\n      }\n    } else {\n      /*\n       * strict parser - load the starting position indicated by [Setup '1']\n       * and [FEN position]\n       */\n      if (headers['SetUp'] === '1') {\n        if (!('FEN' in headers)) {\n          throw new Error('Invalid PGN: FEN tag must be supplied with SetUp tag');\n        }\n        // don't clear the headers when loading\n        this.load(headers['FEN'], {\n          preserveHeaders: true\n        });\n      }\n    }\n    let node = parsedPgn.root;\n    while (node) {\n      if (node.move) {\n        const move = this._moveFromSan(node.move, strict);\n        if (move == null) {\n          throw new Error(\"Invalid move in PGN: \".concat(node.move));\n        } else {\n          this._makeMove(move);\n          this._incPositionCount();\n        }\n      }\n      if (node.comment !== undefined) {\n        this._comments[this.fen()] = node.comment;\n      }\n      node = node.variations[0];\n    }\n    /*\n     * Per section 8.2.6 of the PGN spec, the Result tag pair must match match\n     * the termination marker. Only do this when headers are present, but the\n     * result tag is missing\n     */\n    const result = parsedPgn.result;\n    if (result && Object.keys(this._header).length && this._header['Result'] !== result) {\n      this.setHeader('Result', result);\n    }\n  }\n  /*\n   * Convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} strict Use the strict SAN parser. It will throw errors\n   * on overly disambiguated moves (see below):\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  _moveToSan(move, moves) {\n    let output = '';\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O';\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O';\n    } else if (move.flags & BITS.NULL_MOVE) {\n      return SAN_NULLMOVE;\n    } else {\n      if (move.piece !== PAWN) {\n        const disambiguator = getDisambiguator(move, moves);\n        output += move.piece.toUpperCase() + disambiguator;\n      }\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0];\n        }\n        output += 'x';\n      }\n      output += algebraic(move.to);\n      if (move.promotion) {\n        output += '=' + move.promotion.toUpperCase();\n      }\n    }\n    this._makeMove(move);\n    if (this.isCheck()) {\n      if (this.isCheckmate()) {\n        output += '#';\n      } else {\n        output += '+';\n      }\n    }\n    this._undoMove();\n    return output;\n  }\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  _moveFromSan(move) {\n    let strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    // strip off any move decorations: e.g Nf3+?! becomes Nf3\n    let cleanMove = strippedSan(move);\n    if (!strict) {\n      if (cleanMove === '0-0') {\n        cleanMove = 'O-O';\n      } else if (cleanMove === '0-0-0') {\n        cleanMove = 'O-O-O';\n      }\n    }\n    //first implementation of null with a dummy move (black king moves from a8 to a8), maybe this can be implemented better\n    if (cleanMove == SAN_NULLMOVE) {\n      const res = {\n        color: this._turn,\n        from: 0,\n        to: 0,\n        piece: 'k',\n        flags: BITS.NULL_MOVE\n      };\n      return res;\n    }\n    let pieceType = inferPieceType(cleanMove);\n    let moves = this._moves({\n      legal: true,\n      piece: pieceType\n    });\n    // strict parser\n    for (let i = 0, len = moves.length; i < len; i++) {\n      if (cleanMove === strippedSan(this._moveToSan(moves[i], moves))) {\n        return moves[i];\n      }\n    }\n    // the strict parser failed\n    if (strict) {\n      return null;\n    }\n    let piece = undefined;\n    let matches = undefined;\n    let from = undefined;\n    let to = undefined;\n    let promotion = undefined;\n    /*\n     * The default permissive (non-strict) parser allows the user to parse\n     * non-standard chess notations. This parser is only run after the strict\n     * Standard Algebraic Notation (SAN) parser has failed.\n     *\n     * When running the permissive parser, we'll run a regex to grab the piece, the\n     * to/from square, and an optional promotion piece. This regex will\n     * parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,\n     * f7f8q, b1c3\n     *\n     * NOTE: Some positions and moves may be ambiguous when using the permissive\n     * parser. For example, in this position: 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1,\n     * the move b1c3 may be interpreted as Nc3 or B1c3 (a disambiguated bishop\n     * move). In these cases, the permissive parser will default to the most\n     * basic interpretation (which is b1c3 parsing to Nc3).\n     */\n    let overlyDisambiguated = false;\n    matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);\n    if (matches) {\n      piece = matches[1];\n      from = matches[2];\n      to = matches[3];\n      promotion = matches[4];\n      if (from.length == 1) {\n        overlyDisambiguated = true;\n      }\n    } else {\n      /*\n       * The [a-h]?[1-8]? portion of the regex below handles moves that may be\n       * overly disambiguated (e.g. Nge7 is unnecessary and non-standard when\n       * there is one legal knight move to e7). In this case, the value of\n       * 'from' variable will be a rank or file, not a square.\n       */\n      matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/);\n      if (matches) {\n        piece = matches[1];\n        from = matches[2];\n        to = matches[3];\n        promotion = matches[4];\n        if (from.length == 1) {\n          overlyDisambiguated = true;\n        }\n      }\n    }\n    pieceType = inferPieceType(cleanMove);\n    moves = this._moves({\n      legal: true,\n      piece: piece ? piece : pieceType\n    });\n    if (!to) {\n      return null;\n    }\n    for (let i = 0, len = moves.length; i < len; i++) {\n      if (!from) {\n        // if there is no from square, it could be just 'x' missing from a capture\n        if (cleanMove === strippedSan(this._moveToSan(moves[i], moves)).replace('x', '')) {\n          return moves[i];\n        }\n        // hand-compare move properties with the results from our permissive regex\n      } else if ((!piece || piece.toLowerCase() == moves[i].piece) && Ox88[from] == moves[i].from && Ox88[to] == moves[i].to && (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n        return moves[i];\n      } else if (overlyDisambiguated) {\n        /*\n         * SPECIAL CASE: we parsed a move string that may have an unneeded\n         * rank/file disambiguator (e.g. Nge7).  The 'from' variable will\n         */\n        const square = algebraic(moves[i].from);\n        if ((!piece || piece.toLowerCase() == moves[i].piece) && Ox88[to] == moves[i].to && (from == square[0] || from == square[1]) && (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n          return moves[i];\n        }\n      }\n    }\n    return null;\n  }\n  ascii() {\n    let s = '   +------------------------+\\n';\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      // display the rank\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |';\n      }\n      if (this._board[i]) {\n        const piece = this._board[i].type;\n        const color = this._board[i].color;\n        const symbol = color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n        s += ' ' + symbol + ' ';\n      } else {\n        s += ' . ';\n      }\n      if (i + 1 & 0x88) {\n        s += '|\\n';\n        i += 8;\n      }\n    }\n    s += '   +------------------------+\\n';\n    s += '     a  b  c  d  e  f  g  h';\n    return s;\n  }\n  perft(depth) {\n    const moves = this._moves({\n      legal: false\n    });\n    let nodes = 0;\n    const color = this._turn;\n    for (let i = 0, len = moves.length; i < len; i++) {\n      this._makeMove(moves[i]);\n      if (!this._isKingAttacked(color)) {\n        if (depth - 1 > 0) {\n          nodes += this.perft(depth - 1);\n        } else {\n          nodes++;\n        }\n      }\n      this._undoMove();\n    }\n    return nodes;\n  }\n  setTurn(color) {\n    if (this._turn == color) {\n      return false;\n    }\n    this.move('--');\n    return true;\n  }\n  turn() {\n    return this._turn;\n  }\n  board() {\n    const output = [];\n    let row = [];\n    for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n      if (this._board[i] == null) {\n        row.push(null);\n      } else {\n        row.push({\n          square: algebraic(i),\n          type: this._board[i].type,\n          color: this._board[i].color\n        });\n      }\n      if (i + 1 & 0x88) {\n        output.push(row);\n        row = [];\n        i += 8;\n      }\n    }\n    return output;\n  }\n  squareColor(square) {\n    if (square in Ox88) {\n      const sq = Ox88[square];\n      return (rank(sq) + file(sq)) % 2 === 0 ? 'light' : 'dark';\n    }\n    return null;\n  }\n  history() {\n    let {\n      verbose = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const reversedHistory = [];\n    const moveHistory = [];\n    while (this._history.length > 0) {\n      reversedHistory.push(this._undoMove());\n    }\n    while (true) {\n      const move = reversedHistory.pop();\n      if (!move) {\n        break;\n      }\n      if (verbose) {\n        moveHistory.push(new Move(this, move));\n      } else {\n        moveHistory.push(this._moveToSan(move, this._moves()));\n      }\n      this._makeMove(move);\n    }\n    return moveHistory;\n  }\n  /*\n   * Keeps track of position occurrence counts for the purpose of repetition\n   * checking. Old positions are removed from the map if their counts are reduced to 0.\n   */\n  _getPositionCount(hash) {\n    var _this$_positionCount$;\n    return (_this$_positionCount$ = this._positionCount.get(hash)) !== null && _this$_positionCount$ !== void 0 ? _this$_positionCount$ : 0;\n  }\n  _incPositionCount() {\n    var _this$_positionCount$2;\n    this._positionCount.set(this._hash, ((_this$_positionCount$2 = this._positionCount.get(this._hash)) !== null && _this$_positionCount$2 !== void 0 ? _this$_positionCount$2 : 0) + 1);\n  }\n  _decPositionCount(hash) {\n    var _this$_positionCount$3;\n    const currentCount = (_this$_positionCount$3 = this._positionCount.get(hash)) !== null && _this$_positionCount$3 !== void 0 ? _this$_positionCount$3 : 0;\n    if (currentCount === 1) {\n      this._positionCount.delete(hash);\n    } else {\n      this._positionCount.set(hash, currentCount - 1);\n    }\n  }\n  _pruneComments() {\n    const reversedHistory = [];\n    const currentComments = {};\n    const copyComment = fen => {\n      if (fen in this._comments) {\n        currentComments[fen] = this._comments[fen];\n      }\n    };\n    while (this._history.length > 0) {\n      reversedHistory.push(this._undoMove());\n    }\n    copyComment(this.fen());\n    while (true) {\n      const move = reversedHistory.pop();\n      if (!move) {\n        break;\n      }\n      this._makeMove(move);\n      copyComment(this.fen());\n    }\n    this._comments = currentComments;\n  }\n  getComment() {\n    return this._comments[this.fen()];\n  }\n  setComment(comment) {\n    this._comments[this.fen()] = comment.replace('{', '[').replace('}', ']');\n  }\n  /**\n   * @deprecated Renamed to `removeComment` for consistency\n   */\n  deleteComment() {\n    return this.removeComment();\n  }\n  removeComment() {\n    const comment = this._comments[this.fen()];\n    delete this._comments[this.fen()];\n    return comment;\n  }\n  getComments() {\n    this._pruneComments();\n    return Object.keys(this._comments).map(fen => {\n      return {\n        fen: fen,\n        comment: this._comments[fen]\n      };\n    });\n  }\n  /**\n   * @deprecated Renamed to `removeComments` for consistency\n   */\n  deleteComments() {\n    return this.removeComments();\n  }\n  removeComments() {\n    this._pruneComments();\n    return Object.keys(this._comments).map(fen => {\n      const comment = this._comments[fen];\n      delete this._comments[fen];\n      return {\n        fen: fen,\n        comment: comment\n      };\n    });\n  }\n  setCastlingRights(color, rights) {\n    for (const side of [KING, QUEEN]) {\n      if (rights[side] !== undefined) {\n        if (rights[side]) {\n          this._castling[color] |= SIDES[side];\n        } else {\n          this._castling[color] &= ~SIDES[side];\n        }\n      }\n    }\n    this._updateCastlingRights();\n    const result = this.getCastlingRights(color);\n    return (rights[KING] === undefined || rights[KING] === result[KING]) && (rights[QUEEN] === undefined || rights[QUEEN] === result[QUEEN]);\n  }\n  getCastlingRights(color) {\n    return {\n      [KING]: (this._castling[color] & SIDES[KING]) !== 0,\n      [QUEEN]: (this._castling[color] & SIDES[QUEEN]) !== 0\n    };\n  }\n  moveNumber() {\n    return this._moveNumber;\n  }\n}\nexport { BISHOP, BLACK, Chess, DEFAULT_POSITION, KING, KNIGHT, Move, PAWN, QUEEN, ROOK, SEVEN_TAG_ROSTER, SQUARES, WHITE, validateFen, xoroshiro128 };","map":{"version":3,"names":["rootNode","comment","variations","node","move","suffix","nag","lineToTree","_len","arguments","length","nodes","Array","_key","root","rest","parent","child","pgn","headers","game","_ref","marker","next","result","undefined","peg$subclass","C","constructor","prototype","peg$SyntaxError","message","expected","found","location","self","Error","call","Object","setPrototypeOf","name","peg$padEnd","str","targetLength","padString","repeat","slice","format","sources","src","k","source","text","split","s","start","offset_s","offset","loc","line","column","e","end","filler","toString","last","hatLen","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","parts","map","part","isArray","classEscape","inverted","join","any","other","description","hex","ch","charCodeAt","toUpperCase","replace","describeExpectation","type","describeExpected","descriptions","i","j","sort","describeFound","peg$parse","input","options","peg$FAILED","peg$source","grammarSource","peg$startRuleFunctions","peg$parsepgn","peg$startRuleFunction","peg$c0","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$r0","peg$r1","peg$r2","peg$r3","peg$r4","peg$r5","peg$r6","peg$r7","peg$r8","peg$r9","peg$e0","peg$otherExpectation","peg$e1","peg$literalExpectation","peg$e2","peg$e3","peg$e4","peg$e5","peg$classExpectation","peg$e6","peg$e7","peg$e8","peg$e9","peg$e10","peg$e11","peg$e12","peg$e13","peg$e14","peg$e15","peg$e16","peg$e17","peg$e18","peg$e19","peg$e20","peg$e21","peg$e22","peg$e23","peg$e24","peg$e25","peg$e26","peg$e27","peg$e28","peg$e29","peg$e30","peg$e31","peg$e32","peg$e33","peg$e34","peg$e35","peg$e36","peg$e37","peg$e38","peg$e39","peg$f0","peg$f1","tagPairs","fromEntries","peg$f2","tagName","tagValue","peg$f3","peg$f4","moves","flat","peg$f5","san","peg$f6","peg$f7","peg$f8","trim","peg$f9","peg$f10","peg$currPos","peg$posDetailsCache","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","peg$result","startRule","ignoreCase","peg$endExpectation","peg$computePosDetails","pos","details","p","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","res","peg$fail","push","peg$buildStructuredError","s0","s1","s2","peg$parsetagPairSection","peg$parsemoveTextSection","peg$parsetagPair","peg$parse_","s4","s6","s7","s8","s10","peg$parsetagName","peg$parsetagValue","charAt","test","substring","s3","peg$parseline","peg$parsegameTerminationMarker","peg$parsecomment","peg$parsemove","s5","s9","peg$parsemoveNumber","peg$parsesan","peg$parsesuffixAnnotation","peg$parsenag","peg$parsevariation","substr","peg$parsebraceComment","peg$parserestOfLineComment","peg$library","MASK64","rotl","x","wrappingMul","y","xoroshiro128","state","BigInt","rand","PIECE_KEYS","from","EP_KEYS","CASTLING_KEYS","SIDE_KEY","WHITE","BLACK","PAWN","KNIGHT","BISHOP","ROOK","QUEEN","KING","DEFAULT_POSITION","Move","chess","internal","_defineProperty","color","piece","to","flags","captured","promotion","fromAlgebraic","algebraic","toAlgebraic","legal","lan","before","fen","after","flag","BITS","FLAGS","isCapture","indexOf","isPromotion","isEnPassant","isKingsideCastle","isQueensideCastle","isBigPawn","EMPTY","NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE","NULL_MOVE","SQUARES","SEVEN_TAG_ROSTER","Event","Site","Date","Round","White","Black","Result","SUPLEMENTAL_TAGS","WhiteTitle","BlackTitle","WhiteElo","BlackElo","WhiteUSCF","BlackUSCF","WhiteNA","BlackNA","WhiteType","BlackType","EventDate","EventSponsor","Section","Stage","Board","Opening","Variation","SubVariation","ECO","NIC","Time","UTCTime","UTCDate","TimeControl","SetUp","FEN","Termination","Annotator","Mode","PlyCount","HEADER_TEMPLATE","_objectSpread","Ox88","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1","PAWN_OFFSETS","b","w","PIECE_OFFSETS","n","r","q","ATTACKS","RAYS","PIECE_MASKS","SYMBOLS","PROMOTIONS","RANK_1","RANK_2","RANK_7","RANK_8","SIDES","ROOKS","square","SECOND_RANK","SAN_NULLMOVE","rank","file","isDigit","c","f","swapColor","validateFen","tokens","ok","error","moveNumber","parseInt","isNaN","halfMoves","rows","sumFields","previousWasNumber","kings","regex","concat","match","some","char","getDisambiguator","ambiguities","sameRank","sameFile","len","ambigFrom","ambigTo","ambigPiece","addMove","inferPieceType","pieceType","matches","toLowerCase","strippedSan","Chess","skipValidation","Map","load","clear","preserveHeaders","_board","_kings","_turn","_castling","_epSquare","_halfMoves","_moveNumber","_history","_comments","_header","_hash","_computeHash","_positionCount","adjustments","position","_put","_updateSetup","_incPositionCount","forceEnpassantSquare","empty","castling","epSquare","bigPawnSquare","squares","_this$_board$square","_this$_board$square2","_makeMove","isLegal","_isKingAttacked","_undoMove","_pieceKey","colorIndex","typeIndex","_epKey","_castlingKey","index","hash","reset","get","findPiece","_this$_board$i","put","_ref2","_updateCastlingRights","_updateEnPassantSquare","_set","sq","_ref3","currentPieceOnSquare","_clear","remove","_this$_board$Ox88$e","_this$_board$Ox88$e2","_this$_board$Ox88$e3","_this$_board$Ox88$e4","_this$_board$Ox88$a","_this$_board$Ox88$a2","_this$_board$Ox88$h","_this$_board$Ox88$h2","_this$_board$Ox88$a3","_this$_board$Ox88$a4","_this$_board$Ox88$h3","_this$_board$Ox88$h4","whiteKingInPlace","blackKingInPlace","_this$_board$currentS","_this$_board$currentS2","startSquare","currentSquare","attackers","canCapture","_this$_board$square3","_this$_board$square4","_attacked","verbose","difference","blocked","attackedBy","isAttacked","isCheck","inCheck","isCheckmate","_moves","isStalemate","isInsufficientMaterial","pieces","bishops","numPieces","squareColor","sum","isThreefoldRepetition","_getPositionCount","isDrawByFiftyMoves","isDraw","isGameOver","_moveToSan","forSquare","forPiece","us","them","firstSquare","lastSquare","singleSquare","_this$_board$to","castlingFrom","castlingTo","legalMoves","strict","moveObj","_moveFromSan","JSON","stringify","prettyMove","_push","turn","_movePiece","_this$_board","_this$_board2","_this$_board3","_this$_board4","undo","_decPositionCount","old","pop","newline","maxWidth","headerExists","headerTag","appendComment","moveString","delimiter","reversedHistory","prefix","strip","wrapComment","width","token","currentWidth","includes","header","_len2","args","_key2","setHeader","key","value","_ref4","getHeaders","removeHeader","nonNullHeaders","entries","loadPgn","newlineChar","RegExp","parsedPgn","keys","output","disambiguator","cleanMove","overlyDisambiguated","ascii","symbol","perft","depth","setTurn","board","row","history","moveHistory","_this$_positionCount$","_this$_positionCount$2","set","_this$_positionCount$3","currentCount","delete","_pruneComments","currentComments","copyComment","getComment","setComment","deleteComment","removeComment","getComments","deleteComments","removeComments","setCastlingRights","rights","side","getCastlingRights"],"sources":["C:\\Users\\chich\\chess-platform\\client\\node_modules\\chess.js\\src\\pgn.js","../../../src/chess.ts"],"sourcesContent":["// @generated by Peggy 4.2.0.\n//\n// https://peggyjs.org/\n\n\n\n  function rootNode(comment) {\n  \treturn comment !== null ? { comment, variations: [] } : { variations: []}\n  }\n\n  function node(move, suffix, nag, comment, variations) {\n  \tconst node = { move, variations }\n\n    if (suffix) {\n    \tnode.suffix = suffix\n    }\n\n    if (nag) {\n    \tnode.nag = nag\n    }\n\n    if (comment !== null) {\n    \tnode.comment = comment\n    }\n\n    return node\n  }\n\n  function lineToTree(...nodes) {\n  \tconst [root, ...rest] = nodes;\n\n    let parent = root\n\n    for (const child of rest) {\n    \tif (child !== null) {\n        \tparent.variations = [child, ...child.variations]\n            child.variations = []\n            parent = child\n        }\n    }\n\n  \treturn root\n  }\n\n  function pgn(headers, game) {\n  \tif (game.marker && game.marker.comment) {\n    \tlet node = game.root\n        while (true) {\n        \tconst next = node.variations[0]\n            if (!next) {\n            \tnode.comment = game.marker.comment\n            \tbreak\n            }\n            node = next\n        }\n    }\n\n  \treturn {\n    \theaders,\n        root: game.root,\n        result: (game.marker && game.marker.result) ?? undefined\n    }\n  }\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  var self = Error.call(this, message);\n  // istanbul ignore next Check is a necessary evil to support older environments\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(self, peg$SyntaxError.prototype);\n  }\n  self.expected = expected;\n  self.found = found;\n  self.location = location;\n  self.name = \"SyntaxError\";\n  return self;\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\nfunction peg$padEnd(str, targetLength, padString) {\n  padString = padString || \" \";\n  if (str.length > targetLength) { return str; }\n  targetLength -= str.length;\n  padString += padString.repeat(targetLength);\n  return str + padString.slice(0, targetLength);\n}\n\npeg$SyntaxError.prototype.format = function(sources) {\n  var str = \"Error: \" + this.message;\n  if (this.location) {\n    var src = null;\n    var k;\n    for (k = 0; k < sources.length; k++) {\n      if (sources[k].source === this.location.source) {\n        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);\n        break;\n      }\n    }\n    var s = this.location.start;\n    var offset_s = (this.location.source && (typeof this.location.source.offset === \"function\"))\n      ? this.location.source.offset(s)\n      : s;\n    var loc = this.location.source + \":\" + offset_s.line + \":\" + offset_s.column;\n    if (src) {\n      var e = this.location.end;\n      var filler = peg$padEnd(\"\", offset_s.line.toString().length, ' ');\n      var line = src[s.line - 1];\n      var last = s.line === e.line ? e.column : line.length + 1;\n      var hatLen = (last - s.column) || 1;\n      str += \"\\n --> \" + loc + \"\\n\"\n          + filler + \" |\\n\"\n          + offset_s.line + \" | \" + line + \"\\n\"\n          + filler + \" | \" + peg$padEnd(\"\", s.column - 1, ' ')\n          + peg$padEnd(\"\", hatLen, \"^\");\n    } else {\n      str += \"\\n at \" + loc;\n    }\n  }\n  return str;\n};\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts.join(\"\") + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n  var peg$source = options.grammarSource;\n\n  var peg$startRuleFunctions = { pgn: peg$parsepgn };\n  var peg$startRuleFunction = peg$parsepgn;\n\n  var peg$c0 = \"[\";\n  var peg$c1 = \"\\\"\";\n  var peg$c2 = \"]\";\n  var peg$c3 = \".\";\n  var peg$c4 = \"O-O-O\";\n  var peg$c5 = \"O-O\";\n  var peg$c6 = \"0-0-0\";\n  var peg$c7 = \"0-0\";\n  var peg$c8 = \"$\";\n  var peg$c9 = \"{\";\n  var peg$c10 = \"}\";\n  var peg$c11 = \";\";\n  var peg$c12 = \"(\";\n  var peg$c13 = \")\";\n  var peg$c14 = \"1-0\";\n  var peg$c15 = \"0-1\";\n  var peg$c16 = \"1/2-1/2\";\n  var peg$c17 = \"*\";\n\n  var peg$r0 = /^[a-zA-Z]/;\n  var peg$r1 = /^[^\"]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[.]/;\n  var peg$r4 = /^[a-zA-Z1-8\\-=]/;\n  var peg$r5 = /^[+#]/;\n  var peg$r6 = /^[!?]/;\n  var peg$r7 = /^[^}]/;\n  var peg$r8 = /^[^\\r\\n]/;\n  var peg$r9 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$otherExpectation(\"tag pair\");\n  var peg$e1 = peg$literalExpectation(\"[\", false);\n  var peg$e2 = peg$literalExpectation(\"\\\"\", false);\n  var peg$e3 = peg$literalExpectation(\"]\", false);\n  var peg$e4 = peg$otherExpectation(\"tag name\");\n  var peg$e5 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false);\n  var peg$e6 = peg$otherExpectation(\"tag value\");\n  var peg$e7 = peg$classExpectation([\"\\\"\"], true, false);\n  var peg$e8 = peg$otherExpectation(\"move number\");\n  var peg$e9 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e10 = peg$literalExpectation(\".\", false);\n  var peg$e11 = peg$classExpectation([\".\"], false, false);\n  var peg$e12 = peg$otherExpectation(\"standard algebraic notation\");\n  var peg$e13 = peg$literalExpectation(\"O-O-O\", false);\n  var peg$e14 = peg$literalExpectation(\"O-O\", false);\n  var peg$e15 = peg$literalExpectation(\"0-0-0\", false);\n  var peg$e16 = peg$literalExpectation(\"0-0\", false);\n  var peg$e17 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"1\", \"8\"], \"-\", \"=\"], false, false);\n  var peg$e18 = peg$classExpectation([\"+\", \"#\"], false, false);\n  var peg$e19 = peg$otherExpectation(\"suffix annotation\");\n  var peg$e20 = peg$classExpectation([\"!\", \"?\"], false, false);\n  var peg$e21 = peg$otherExpectation(\"NAG\");\n  var peg$e22 = peg$literalExpectation(\"$\", false);\n  var peg$e23 = peg$otherExpectation(\"brace comment\");\n  var peg$e24 = peg$literalExpectation(\"{\", false);\n  var peg$e25 = peg$classExpectation([\"}\"], true, false);\n  var peg$e26 = peg$literalExpectation(\"}\", false);\n  var peg$e27 = peg$otherExpectation(\"rest of line comment\");\n  var peg$e28 = peg$literalExpectation(\";\", false);\n  var peg$e29 = peg$classExpectation([\"\\r\", \"\\n\"], true, false);\n  var peg$e30 = peg$otherExpectation(\"variation\");\n  var peg$e31 = peg$literalExpectation(\"(\", false);\n  var peg$e32 = peg$literalExpectation(\")\", false);\n  var peg$e33 = peg$otherExpectation(\"game termination marker\");\n  var peg$e34 = peg$literalExpectation(\"1-0\", false);\n  var peg$e35 = peg$literalExpectation(\"0-1\", false);\n  var peg$e36 = peg$literalExpectation(\"1/2-1/2\", false);\n  var peg$e37 = peg$literalExpectation(\"*\", false);\n  var peg$e38 = peg$otherExpectation(\"whitespace\");\n  var peg$e39 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(headers, game) { return pgn(headers, game) };\n  var peg$f1 = function(tagPairs) { return Object.fromEntries(tagPairs) };\n  var peg$f2 = function(tagName, tagValue) { return [tagName, tagValue] };\n  var peg$f3 = function(root, marker) { return { root, marker} };\n  var peg$f4 = function(comment, moves) { return lineToTree(rootNode(comment), ...moves.flat()) };\n  var peg$f5 = function(san, suffix, nag, comment, variations) { return node(san, suffix, nag, comment, variations) };\n  var peg$f6 = function(nag) { return nag };\n  var peg$f7 = function(comment) { return comment.replace(/[\\r\\n]+/g, \" \") };\n  var peg$f8 = function(comment) { return comment.trim() };\n  var peg$f9 = function(line) { return line };\n  var peg$f10 = function(result, comment) { return { result, comment } };\n  var peg$currPos = options.peg$currPos | 0;\n  var peg$savedPos = peg$currPos;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$maxFailPos = peg$currPos;\n  var peg$maxFailExpected = options.peg$maxFailExpected || [];\n  var peg$silentFails = options.peg$silentFails | 0;\n\n  var peg$result;\n\n  if (options.startRule) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return {\n      source: peg$source,\n      start: peg$savedPos,\n      end: peg$currPos\n    };\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      if (pos >= peg$posDetailsCache.length) {\n        p = peg$posDetailsCache.length - 1;\n      } else {\n        p = pos;\n        while (!peg$posDetailsCache[--p]) {}\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos, offset) {\n    var startPosDetails = peg$computePosDetails(startPos);\n    var endPosDetails = peg$computePosDetails(endPos);\n\n    var res = {\n      source: peg$source,\n      start: {\n        offset: startPos,\n        line: startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line: endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n    if (offset && peg$source && (typeof peg$source.offset === \"function\")) {\n      res.start = peg$source.offset(res.start);\n      res.end = peg$source.offset(res.end);\n    }\n    return res;\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsepgn() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parsetagPairSection();\n    s2 = peg$parsemoveTextSection();\n    peg$savedPos = s0;\n    s0 = peg$f0(s1, s2);\n\n    return s0;\n  }\n\n  function peg$parsetagPairSection() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsetagPair();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsetagPair();\n    }\n    s2 = peg$parse_();\n    peg$savedPos = s0;\n    s0 = peg$f1(s1);\n\n    return s0;\n  }\n\n  function peg$parsetagPair() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 91) {\n      s2 = peg$c0;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e1); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parse_();\n      s4 = peg$parsetagName();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parse_();\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s6 = peg$c1;\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e2); }\n        }\n        if (s6 !== peg$FAILED) {\n          s7 = peg$parsetagValue();\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s8 = peg$c1;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$e2); }\n          }\n          if (s8 !== peg$FAILED) {\n            s9 = peg$parse_();\n            if (input.charCodeAt(peg$currPos) === 93) {\n              s10 = peg$c2;\n              peg$currPos++;\n            } else {\n              s10 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$e3); }\n            }\n            if (s10 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s0 = peg$f2(s4, s7);\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e0); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsetagName() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r0.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e5); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = input.charAt(peg$currPos);\n        if (peg$r0.test(s2)) {\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e5); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e4); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsetagValue() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r1.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e7); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = input.charAt(peg$currPos);\n      if (peg$r1.test(s2)) {\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e7); }\n      }\n    }\n    s0 = input.substring(s0, peg$currPos);\n    peg$silentFails--;\n    s1 = peg$FAILED;\n    if (peg$silentFails === 0) { peg$fail(peg$e6); }\n\n    return s0;\n  }\n\n  function peg$parsemoveTextSection() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parseline();\n    s2 = peg$parse_();\n    s3 = peg$parsegameTerminationMarker();\n    if (s3 === peg$FAILED) {\n      s3 = null;\n    }\n    s4 = peg$parse_();\n    peg$savedPos = s0;\n    s0 = peg$f3(s1, s3);\n\n    return s0;\n  }\n\n  function peg$parseline() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecomment();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    s2 = [];\n    s3 = peg$parsemove();\n    while (s3 !== peg$FAILED) {\n      s2.push(s3);\n      s3 = peg$parsemove();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f4(s1, s2);\n\n    return s0;\n  }\n\n  function peg$parsemove() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10;\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    s2 = peg$parsemoveNumber();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parse_();\n    s4 = peg$parsesan();\n    if (s4 !== peg$FAILED) {\n      s5 = peg$parsesuffixAnnotation();\n      if (s5 === peg$FAILED) {\n        s5 = null;\n      }\n      s6 = [];\n      s7 = peg$parsenag();\n      while (s7 !== peg$FAILED) {\n        s6.push(s7);\n        s7 = peg$parsenag();\n      }\n      s7 = peg$parse_();\n      s8 = peg$parsecomment();\n      if (s8 === peg$FAILED) {\n        s8 = null;\n      }\n      s9 = [];\n      s10 = peg$parsevariation();\n      while (s10 !== peg$FAILED) {\n        s9.push(s10);\n        s10 = peg$parsevariation();\n      }\n      peg$savedPos = s0;\n      s0 = peg$f5(s4, s5, s6, s8, s9);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveNumber() {\n    var s0, s1, s2, s3, s4, s5;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r2.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e9); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = input.charAt(peg$currPos);\n      if (peg$r2.test(s2)) {\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e9); }\n      }\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c3;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e10); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parse_();\n      s4 = [];\n      s5 = input.charAt(peg$currPos);\n      if (peg$r3.test(s5)) {\n        peg$currPos++;\n      } else {\n        s5 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e11); }\n      }\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = input.charAt(peg$currPos);\n        if (peg$r3.test(s5)) {\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e11); }\n        }\n      }\n      s1 = [s1, s2, s3, s4];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e8); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsesan() {\n    var s0, s1, s2, s3, s4, s5;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s2 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e13); }\n    }\n    if (s2 === peg$FAILED) {\n      if (input.substr(peg$currPos, 3) === peg$c5) {\n        s2 = peg$c5;\n        peg$currPos += 3;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e14); }\n      }\n      if (s2 === peg$FAILED) {\n        if (input.substr(peg$currPos, 5) === peg$c6) {\n          s2 = peg$c6;\n          peg$currPos += 5;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e15); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.substr(peg$currPos, 3) === peg$c7) {\n            s2 = peg$c7;\n            peg$currPos += 3;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$e16); }\n          }\n          if (s2 === peg$FAILED) {\n            s2 = peg$currPos;\n            s3 = input.charAt(peg$currPos);\n            if (peg$r0.test(s3)) {\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$e5); }\n            }\n            if (s3 !== peg$FAILED) {\n              s4 = [];\n              s5 = input.charAt(peg$currPos);\n              if (peg$r4.test(s5)) {\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$e17); }\n              }\n              if (s5 !== peg$FAILED) {\n                while (s5 !== peg$FAILED) {\n                  s4.push(s5);\n                  s5 = input.charAt(peg$currPos);\n                  if (peg$r4.test(s5)) {\n                    peg$currPos++;\n                  } else {\n                    s5 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$e17); }\n                  }\n                }\n              } else {\n                s4 = peg$FAILED;\n              }\n              if (s4 !== peg$FAILED) {\n                s3 = [s3, s4];\n                s2 = s3;\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          }\n        }\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = input.charAt(peg$currPos);\n      if (peg$r5.test(s3)) {\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e18); }\n      }\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e12); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsesuffixAnnotation() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = input.charAt(peg$currPos);\n    if (peg$r6.test(s2)) {\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e20); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (s1.length >= 2) {\n        s2 = peg$FAILED;\n      } else {\n        s2 = input.charAt(peg$currPos);\n        if (peg$r6.test(s2)) {\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e20); }\n        }\n      }\n    }\n    if (s1.length < 1) {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    } else {\n      s0 = s1;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e19); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenag() {\n    var s0, s1, s2, s3, s4, s5;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 36) {\n      s2 = peg$c8;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e22); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = input.charAt(peg$currPos);\n      if (peg$r2.test(s5)) {\n        peg$currPos++;\n      } else {\n        s5 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e9); }\n      }\n      if (s5 !== peg$FAILED) {\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = input.charAt(peg$currPos);\n          if (peg$r2.test(s5)) {\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$e9); }\n          }\n        }\n      } else {\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s3 = input.substring(s3, peg$currPos);\n      } else {\n        s3 = s4;\n      }\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f6(s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e21); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomment() {\n    var s0;\n\n    s0 = peg$parsebraceComment();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parserestOfLineComment();\n    }\n\n    return s0;\n  }\n\n  function peg$parsebraceComment() {\n    var s0, s1, s2, s3, s4;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 123) {\n      s1 = peg$c9;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e24); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = [];\n      s4 = input.charAt(peg$currPos);\n      if (peg$r7.test(s4)) {\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e25); }\n      }\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = input.charAt(peg$currPos);\n        if (peg$r7.test(s4)) {\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e25); }\n        }\n      }\n      s2 = input.substring(s2, peg$currPos);\n      if (input.charCodeAt(peg$currPos) === 125) {\n        s3 = peg$c10;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e26); }\n      }\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f7(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e23); }\n    }\n\n    return s0;\n  }\n\n  function peg$parserestOfLineComment() {\n    var s0, s1, s2, s3, s4;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 59) {\n      s1 = peg$c11;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e28); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = [];\n      s4 = input.charAt(peg$currPos);\n      if (peg$r8.test(s4)) {\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e29); }\n      }\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = input.charAt(peg$currPos);\n        if (peg$r8.test(s4)) {\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e29); }\n        }\n      }\n      s2 = input.substring(s2, peg$currPos);\n      peg$savedPos = s0;\n      s0 = peg$f8(s2);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e27); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsevariation() {\n    var s0, s1, s2, s3, s4, s5;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s2 = peg$c12;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e31); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseline();\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parse_();\n        if (input.charCodeAt(peg$currPos) === 41) {\n          s5 = peg$c13;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e32); }\n        }\n        if (s5 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f9(s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e30); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsegameTerminationMarker() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 3) === peg$c14) {\n      s1 = peg$c14;\n      peg$currPos += 3;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e34); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 3) === peg$c15) {\n        s1 = peg$c15;\n        peg$currPos += 3;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e35); }\n      }\n      if (s1 === peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c16) {\n          s1 = peg$c16;\n          peg$currPos += 7;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$e36); }\n        }\n        if (s1 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 42) {\n            s1 = peg$c17;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$e37); }\n          }\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      s3 = peg$parsecomment();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      peg$savedPos = s0;\n      s0 = peg$f10(s1, s3);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e33); }\n    }\n\n    return s0;\n  }\n\n  function peg$parse_() {\n    var s0, s1;\n\n    peg$silentFails++;\n    s0 = [];\n    s1 = input.charAt(peg$currPos);\n    if (peg$r9.test(s1)) {\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$e39); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      s1 = input.charAt(peg$currPos);\n      if (peg$r9.test(s1)) {\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$e39); }\n      }\n    }\n    peg$silentFails--;\n    s1 = peg$FAILED;\n    if (peg$silentFails === 0) { peg$fail(peg$e38); }\n\n    return s0;\n  }\n\n  peg$result = peg$startRuleFunction();\n\n  if (options.peg$library) {\n    return /** @type {any} */ ({\n      peg$result,\n      peg$currPos,\n      peg$FAILED,\n      peg$maxFailExpected,\n      peg$maxFailPos\n    });\n  }\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nconst peg$allowedStartRules = [\n  \"pgn\"\n];\n\nexport {\n  peg$allowedStartRules as StartRules,\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n",""],"mappings":"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C,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACjD,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAG,CAAC,EAAE,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAChD,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EACjD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,GAC7C;AAED;AACA,MAAMC,IAAI,GAAG,CACV,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAE,CAAC,EAC5D,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAG,EAAE,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAE,CAAC,EAC5D,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAE,CAAC,EAC9D,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,GAAG,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAC,IACzD;AAED,MAAMC,WAAW,GAAG;EAAE3N,CAAC,EAAE,GAAG;EAAEsN,CAAC,EAAE,GAAG;EAAEH,CAAC,EAAE,GAAG;EAAEI,CAAC,EAAE,GAAG;EAAEC,CAAC,EAAE,IAAI;EAAEtX,CAAC,EAAE;AAAI,CAAE;AAExE,MAAM0X,OAAO,GAAG,cAAc;AAE9B,MAAMC,UAAU,GAAkB,CAACjK,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,CAAC;AAE/D,MAAM+J,MAAM,GAAG,CAAC;AAChB,MAAMC,MAAM,GAAG,CAAC;AAChB;;;;;AAKG;AACH,MAAMC,MAAM,GAAG,CAAC;AAChB,MAAMC,MAAM,GAAG,CAAC;AAEhB,MAAMC,KAAK,GAAG;EACZ,CAAClK,IAAI,GAAGqB,IAAI,CAACe,YAAY;EACzB,CAACrC,KAAK,GAAGsB,IAAI,CAACgB;CACf;AAED,MAAM8H,KAAK,GAAG;EACZf,CAAC,EAAE,CACD;IAAEgB,MAAM,EAAEnF,IAAI,CAACyD,EAAE;IAAEtH,IAAI,EAAEC,IAAI,CAACgB;EAAY,CAAE,EAC5C;IAAE+H,MAAM,EAAEnF,IAAI,CAACgE,EAAE;IAAE7H,IAAI,EAAEC,IAAI,CAACe;EAAY,CAAE,CAC7C;EACD+G,CAAC,EAAE,CACD;IAAEiB,MAAM,EAAEnF,IAAI,CAACC,EAAE;IAAE9D,IAAI,EAAEC,IAAI,CAACgB;EAAY,CAAE,EAC5C;IAAE+H,MAAM,EAAEnF,IAAI,CAACQ,EAAE;IAAErE,IAAI,EAAEC,IAAI,CAACe;EAAY,CAAE;CAE/C;AAED,MAAMiI,WAAW,GAAG;EAAElB,CAAC,EAAEa,MAAM;EAAEZ,CAAC,EAAEW;AAAM,CAAE;AAI5C,MAAMO,YAAY,GAAG,IAAI;AAEzB;AACA,SAASC,IAAIA,CAACH,MAAc;EAC1B,OAAOA,MAAM,IAAI,CAAC;AACpB;AAEA;AACA,SAASI,IAAIA,CAACJ,MAAc;EAC1B,OAAOA,MAAM,GAAG,GAAG;AACrB;AAEA,SAASK,OAAOA,CAACC,CAAS;EACxB,OAAO,YAAY,CAAClJ,OAAO,CAACkJ,CAAC,CAAC,KAAK,EAAE;AACvC;AAEA;AACA,SAAS7J,SAASA,CAACuJ,MAAc;EAC/B,MAAMO,CAAC,GAAGH,IAAI,CAACJ,MAAM,CAAC;EACtB,MAAMb,CAAC,GAAGgB,IAAI,CAACH,MAAM,CAAC;EACtB,OAAQ,UAAU,CAAC1M,SAAS,CAACiN,CAAC,EAAEA,CAAC,GAAG,CAAC,CAAC,GACpC,UAAU,CAACjN,SAAS,CAAC6L,CAAC,EAAEA,CAAC,GAAG,CAAC,CAAC;AAClC;AAEA,SAASqB,SAASA,CAACtK,KAAY;EAC7B,OAAOA,KAAK,KAAKb,KAAK,GAAGC,KAAK,GAAGD,KAAK;AACxC;AAEM,SAAUoL,WAAWA,CAAC3J,GAAW;;EAErC,MAAM4J,MAAM,GAAG5J,GAAG,CAAC7O,KAAK,CAAC,KAAK,CAAC;EAC/B,IAAIyY,MAAM,CAACpb,MAAM,KAAK,CAAC,EAAE;IACvB,OAAO;MACLqb,EAAE,EAAE,KAAK;MACTC,KAAK,EAAE;KACR;EACF;;EAGD,MAAMC,UAAU,GAAGC,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EAC1C,IAAIK,KAAK,CAACF,UAAU,CAAC,IAAIA,UAAU,IAAI,CAAC,EAAE;IACxC,OAAO;MACLF,EAAE,EAAE,KAAK;MACTC,KAAK,EAAE;KACR;EACF;;EAGD,MAAMI,SAAS,GAAGF,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EACzC,IAAIK,KAAK,CAACC,SAAS,CAAC,IAAIA,SAAS,GAAG,CAAC,EAAE;IACrC,OAAO;MACLL,EAAE,EAAE,KAAK;MACTC,KAAK,EACH;KACH;EACF;;EAGD,IAAI,CAAC,sBAAsB,CAACvN,IAAI,CAACqN,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;IAC3C,OAAO;MAAEC,EAAE,EAAE,KAAK;MAAEC,KAAK,EAAE;IAA2C,CAAE;EACzE;;EAGD,IAAI,UAAU,CAACvN,IAAI,CAACqN,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;IAC9B,OAAO;MAAEC,EAAE,EAAE,KAAK;MAAEC,KAAK,EAAE;IAA+C,CAAE;EAC7E;;EAGD,IAAI,CAAC,SAAS,CAACvN,IAAI,CAACqN,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;IAC9B,OAAO;MAAEC,EAAE,EAAE,KAAK;MAAEC,KAAK,EAAE;IAAsC,CAAE;EACpE;;EAGD,MAAMK,IAAI,GAAGP,MAAM,CAAC,CAAC,CAAC,CAACzY,KAAK,CAAC,GAAG,CAAC;EACjC,IAAIgZ,IAAI,CAAC3b,MAAM,KAAK,CAAC,EAAE;IACrB,OAAO;MACLqb,EAAE,EAAE,KAAK;MACTC,KAAK,EAAE;KACR;EACF;;EAGD,KAAK,IAAInW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwW,IAAI,CAAC3b,MAAM,EAAEmF,CAAC,EAAE,EAAE;;IAEpC,IAAIyW,SAAS,GAAG,CAAC;IACjB,IAAIC,iBAAiB,GAAG,KAAK;IAE7B,KAAK,IAAIrZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmZ,IAAI,CAACxW,CAAC,CAAC,CAACnF,MAAM,EAAEwC,CAAC,EAAE,EAAE;MACvC,IAAIuY,OAAO,CAACY,IAAI,CAACxW,CAAC,CAAC,CAAC3C,CAAC,CAAC,CAAC,EAAE;QACvB,IAAIqZ,iBAAiB,EAAE;UACrB,OAAO;YACLR,EAAE,EAAE,KAAK;YACTC,KAAK,EAAE;WACR;QACF;QACDM,SAAS,IAAIJ,QAAQ,CAACG,IAAI,CAACxW,CAAC,CAAC,CAAC3C,CAAC,CAAC,EAAE,EAAE,CAAC;QACrCqZ,iBAAiB,GAAG,IAAI;MACzB,OAAM;QACL,IAAI,CAAC,kBAAkB,CAAC9N,IAAI,CAAC4N,IAAI,CAACxW,CAAC,CAAC,CAAC3C,CAAC,CAAC,CAAC,EAAE;UACxC,OAAO;YACL6Y,EAAE,EAAE,KAAK;YACTC,KAAK,EAAE;WACR;QACF;QACDM,SAAS,IAAI,CAAC;QACdC,iBAAiB,GAAG,KAAK;MAC1B;IACF;IACD,IAAID,SAAS,KAAK,CAAC,EAAE;MACnB,OAAO;QACLP,EAAE,EAAE,KAAK;QACTC,KAAK,EAAE;OACR;IACF;EACF;;EAGD,IACGF,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAIA,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,IACvCA,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAIA,MAAM,CAAC,CAAC,CAAC,IAAI,GAAI,EACzC;IACA,OAAO;MAAEC,EAAE,EAAE,KAAK;MAAEC,KAAK,EAAE;IAAwC,CAAE;EACtE;;EAGD,MAAMQ,KAAK,GAAG,CACZ;IAAElL,KAAK,EAAE,OAAO;IAAEmL,KAAK,EAAE;EAAI,CAAE,EAC/B;IAAEnL,KAAK,EAAE,OAAO;IAAEmL,KAAK,EAAE;EAAI,CAAE,CAChC;EAED,KAAK,MAAM;IAAEnL,KAAK;IAAEmL;EAAK,CAAE,IAAID,KAAK,EAAE;IACpC,IAAI,CAACC,KAAK,CAAChO,IAAI,CAACqN,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;MAC1B,OAAO;QAAEC,EAAE,EAAE,KAAK;QAAEC,KAAK,0BAAAU,MAAA,CAA0BpL,KAAK;MAAO,CAAE;IAClE;IAED,IAAI,CAACwK,MAAM,CAAC,CAAC,CAAC,CAACa,KAAK,CAACF,KAAK,CAAC,IAAI,EAAE,EAAE/b,MAAM,GAAG,CAAC,EAAE;MAC7C,OAAO;QAAEqb,EAAE,EAAE,KAAK;QAAEC,KAAK,2BAAAU,MAAA,CAA2BpL,KAAK;MAAQ,CAAE;IACpE;EACF;;EAGD,IACE1Q,KAAK,CAACyP,IAAI,CAACgM,IAAI,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC,CAAC,CAACO,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACtX,WAAW,EAAE,KAAK,GAAG,CAAC,EACxE;IACA,OAAO;MACLwW,EAAE,EAAE,KAAK;MACTC,KAAK,EAAE;KACR;EACF;EAED,OAAO;IAAED,EAAE,EAAE;EAAI,CAAE;AACrB;AAEA;AACA,SAASe,gBAAgBA,CAAC1c,IAAkB,EAAEsL,KAAqB;EACjE,MAAM2E,IAAI,GAAGjQ,IAAI,CAACiQ,IAAI;EACtB,MAAMmB,EAAE,GAAGpR,IAAI,CAACoR,EAAE;EAClB,MAAMD,KAAK,GAAGnR,IAAI,CAACmR,KAAK;EAExB,IAAIwL,WAAW,GAAG,CAAC;EACnB,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,QAAQ,GAAG,CAAC;EAEhB,KAAK,IAAIpX,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;IAChD,MAAMsX,SAAS,GAAGzR,KAAK,CAAC7F,CAAC,CAAC,CAACwK,IAAI;IAC/B,MAAM+M,OAAO,GAAG1R,KAAK,CAAC7F,CAAC,CAAC,CAAC2L,EAAE;IAC3B,MAAM6L,UAAU,GAAG3R,KAAK,CAAC7F,CAAC,CAAC,CAAC0L,KAAK;IAEjC;;;AAGG;IACH,IAAIA,KAAK,KAAK8L,UAAU,IAAIhN,IAAI,KAAK8M,SAAS,IAAI3L,EAAE,KAAK4L,OAAO,EAAE;MAChEL,WAAW,EAAE;MAEb,IAAIxB,IAAI,CAAClL,IAAI,CAAC,KAAKkL,IAAI,CAAC4B,SAAS,CAAC,EAAE;QAClCH,QAAQ,EAAE;MACX;MAED,IAAIxB,IAAI,CAACnL,IAAI,CAAC,KAAKmL,IAAI,CAAC2B,SAAS,CAAC,EAAE;QAClCF,QAAQ,EAAE;MACX;IACF;EACF;EAED,IAAIF,WAAW,GAAG,CAAC,EAAE;IACnB,IAAIC,QAAQ,GAAG,CAAC,IAAIC,QAAQ,GAAG,CAAC,EAAE;MAChC;;;AAGG;MACH,OAAOpL,SAAS,CAACxB,IAAI,CAAC;IACvB,OAAM,IAAI4M,QAAQ,GAAG,CAAC,EAAE;MACvB;;;AAGG;MACH,OAAOpL,SAAS,CAACxB,IAAI,CAAC,CAAC7B,MAAM,CAAC,CAAC,CAAC;IACjC,OAAM;;MAEL,OAAOqD,SAAS,CAACxB,IAAI,CAAC,CAAC7B,MAAM,CAAC,CAAC,CAAC;IACjC;EACF;EAED,OAAO,EAAE;AACX;AAEA,SAAS8O,OAAOA,CACd5R,KAAqB,EACrB4F,KAAY,EACZjB,IAAY,EACZmB,EAAU,EACVD,KAAkB,EAES;EAAA,IAD3BG,QAAoC,GAAAjR,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAAgB,SAAS;EAAA,IAC7CgQ,KAAgB,GAAAhR,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAA4R,IAAI,CAACU,MAAM;EAE3B,MAAMwH,CAAC,GAAGgB,IAAI,CAAC/J,EAAE,CAAC;EAElB,IAAID,KAAK,KAAKZ,IAAI,KAAK4J,CAAC,KAAKO,MAAM,IAAIP,CAAC,KAAKU,MAAM,CAAC,EAAE;IACpD,KAAK,IAAIpV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgV,UAAU,CAACna,MAAM,EAAEmF,CAAC,EAAE,EAAE;MAC1C,MAAM8L,SAAS,GAAGkJ,UAAU,CAAChV,CAAC,CAAC;MAC/B6F,KAAK,CAAC8B,IAAI,CAAC;QACT8D,KAAK;QACLjB,IAAI;QACJmB,EAAE;QACFD,KAAK;QACLG,QAAQ;QACRC,SAAS;QACTF,KAAK,EAAEA,KAAK,GAAGY,IAAI,CAACc;MACrB,EAAC;IACH;EACF,OAAM;IACLzH,KAAK,CAAC8B,IAAI,CAAC;MACT8D,KAAK;MACLjB,IAAI;MACJmB,EAAE;MACFD,KAAK;MACLG,QAAQ;MACRD;IACD,EAAC;EACH;AACH;AAEA,SAAS8L,cAAcA,CAAC1R,GAAW;EACjC,IAAI2R,SAAS,GAAG3R,GAAG,CAAC2C,MAAM,CAAC,CAAC,CAAC;EAC7B,IAAIgP,SAAS,IAAI,GAAG,IAAIA,SAAS,IAAI,GAAG,EAAE;IACxC,MAAMC,OAAO,GAAG5R,GAAG,CAAC8Q,KAAK,CAAC,kBAAkB,CAAC;IAC7C,IAAIc,OAAO,EAAE;MACX,OAAOhc,SAAS;IACjB;IACD,OAAOkP,IAAI;EACZ;EACD6M,SAAS,GAAGA,SAAS,CAACE,WAAW,EAAE;EACnC,IAAIF,SAAS,KAAK,GAAG,EAAE;IACrB,OAAOxM,IAAI;EACZ;EACD,OAAOwM,SAAwB;AACjC;AAEA;AACA,SAASG,WAAWA,CAACvd,IAAY;EAC/B,OAAOA,IAAI,CAACoF,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;AACzD;MAEaoY,KAAK;EAiBhBhc,WAAYA,CAAA,EAAuD;IAAA,IAAvDsQ,GAAG,GAAAzR,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAGwQ,gBAAgB;IAAA,IAAE;MAAE4M,cAAc,GAAG;IAAK,CAAE,GAAApd,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAG,EAAE;IAAA4Q,eAAA,iBAhBlD,IAAIzQ,KAAK,CAAQ,GAAG,CAAC;IAAAyQ,eAAA,gBACfZ,KAAK;IAAAY,eAAA,kBACqB,EAAE;IAAAA,eAAA,iBACX;MAAE+I,CAAC,EAAEtH,KAAK;MAAEqH,CAAC,EAAErH;IAAK,CAAE;IAAAzB,eAAA,oBAC1C,EAAE;IAAAA,eAAA,qBACD,CAAC;IAAAA,eAAA,sBACA,CAAC;IAAAA,eAAA,mBACO,EAAE;IAAAA,eAAA,oBACY,EAAE;IAAAA,eAAA,oBACH;MAAE+I,CAAC,EAAE,CAAC;MAAED,CAAC,EAAE;IAAC,CAAE;IAAA9I,eAAA,gBAEzC,EAAE;;4CAGO,IAAIyM,GAAG,EAAkB;IAGhD,IAAI,CAACC,IAAI,CAAC7L,GAAG,EAAE;MAAE2L;IAAc,CAAE,CAAC;;EAGpCG,KAAKA,CAAA,EAAiC;IAAA,IAAhC;MAAEC,eAAe,GAAG;IAAK,CAAE,GAAAxd,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAG,EAAE;IACpC,IAAI,CAACyd,MAAM,GAAG,IAAItd,KAAK,CAAQ,GAAG,CAAC;IACnC,IAAI,CAACud,MAAM,GAAG;MAAE/D,CAAC,EAAEtH,KAAK;MAAEqH,CAAC,EAAErH;IAAK,CAAE;IACpC,IAAI,CAACsL,KAAK,GAAG3N,KAAK;IAClB,IAAI,CAAC4N,SAAS,GAAG;MAAEjE,CAAC,EAAE,CAAC;MAAED,CAAC,EAAE;IAAC,CAAE;IAC/B,IAAI,CAACmE,SAAS,GAAGxL,KAAK;IACtB,IAAI,CAACyL,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,OAAO,GAAGV,eAAe,GAAG,IAAI,CAACU,OAAO,GAAA3I,aAAA,KAAQD,eAAe,CAAE;IACtE,IAAI,CAAC6I,KAAK,GAAG,IAAI,CAACC,YAAY,EAAE;IAChC,IAAI,CAACC,cAAc,GAAG,IAAIhB,GAAG,EAAkB;IAE/C;;;;AAIG;IACH,IAAI,CAACa,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI;IAC5B,IAAI,CAACA,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI;;EAG5BZ,IAAIA,CAAC7L,GAAW,EAA0D;IAAA,IAAxD;MAAE2L,cAAc,GAAG,KAAK;MAAEI,eAAe,GAAG;IAAK,CAAE,GAAAxd,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAG,EAAE;IACxE,IAAIqb,MAAM,GAAG5J,GAAG,CAAC7O,KAAK,CAAC,KAAK,CAAC;;IAG7B,IAAIyY,MAAM,CAACpb,MAAM,IAAI,CAAC,IAAIob,MAAM,CAACpb,MAAM,GAAG,CAAC,EAAE;MAC3C,MAAMqe,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;MACxC7M,GAAG,GAAG4J,MAAM,CAACY,MAAM,CAACqC,WAAW,CAACjc,KAAK,CAAC,EAAE,CAAC,GAAGgZ,MAAM,CAACpb,MAAM,CAAC,CAAC,CAAC,CAACsE,IAAI,CAAC,GAAG,CAAC;IACvE;IAED8W,MAAM,GAAG5J,GAAG,CAAC7O,KAAK,CAAC,KAAK,CAAC;IAEzB,IAAI,CAACwa,cAAc,EAAE;MACnB,MAAM;QAAE9B,EAAE;QAAEC;MAAK,CAAE,GAAGH,WAAW,CAAC3J,GAAG,CAAC;MACtC,IAAI,CAAC6J,EAAE,EAAE;QACP,MAAM,IAAI3Z,KAAK,CAAC4Z,KAAK,CAAC;MACvB;IACF;IAED,MAAMgD,QAAQ,GAAGlD,MAAM,CAAC,CAAC,CAAC;IAC1B,IAAIV,MAAM,GAAG,CAAC;IAEd,IAAI,CAAC4C,KAAK,CAAC;MAAEC;IAAe,CAAE,CAAC;IAE/B,KAAK,IAAIpY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmZ,QAAQ,CAACte,MAAM,EAAEmF,CAAC,EAAE,EAAE;MACxC,MAAM0L,KAAK,GAAGyN,QAAQ,CAACxQ,MAAM,CAAC3I,CAAC,CAAC;MAEhC,IAAI0L,KAAK,KAAK,GAAG,EAAE;QACjB6J,MAAM,IAAI,CAAC;MACZ,OAAM,IAAIK,OAAO,CAAClK,KAAK,CAAC,EAAE;QACzB6J,MAAM,IAAIc,QAAQ,CAAC3K,KAAK,EAAE,EAAE,CAAC;MAC9B,OAAM;QACL,MAAMD,KAAK,GAAGC,KAAK,GAAG,GAAG,GAAGd,KAAK,GAAGC,KAAK;QACzC,IAAI,CAACuO,IAAI,CACP;UAAEvZ,IAAI,EAAE6L,KAAK,CAACmM,WAAW,EAAiB;UAAEpM;QAAK,CAAE,EACnDO,SAAS,CAACuJ,MAAM,CAAC,CAClB;QACDA,MAAM,EAAE;MACT;IACF;IAED,IAAI,CAACgD,KAAK,GAAGtC,MAAM,CAAC,CAAC,CAAU;IAE/B,IAAIA,MAAM,CAAC,CAAC,CAAC,CAACtJ,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE;MAC/B,IAAI,CAAC6L,SAAS,CAACjE,CAAC,IAAI/H,IAAI,CAACe,YAAY;IACtC;IACD,IAAI0I,MAAM,CAAC,CAAC,CAAC,CAACtJ,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE;MAC/B,IAAI,CAAC6L,SAAS,CAACjE,CAAC,IAAI/H,IAAI,CAACgB,YAAY;IACtC;IACD,IAAIyI,MAAM,CAAC,CAAC,CAAC,CAACtJ,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE;MAC/B,IAAI,CAAC6L,SAAS,CAAClE,CAAC,IAAI9H,IAAI,CAACe,YAAY;IACtC;IACD,IAAI0I,MAAM,CAAC,CAAC,CAAC,CAACtJ,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE;MAC/B,IAAI,CAAC6L,SAAS,CAAClE,CAAC,IAAI9H,IAAI,CAACgB,YAAY;IACtC;IAED,IAAI,CAACiL,SAAS,GAAGxC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGhJ,KAAK,GAAGmD,IAAI,CAAC6F,MAAM,CAAC,CAAC,CAAW,CAAC;IACtE,IAAI,CAACyC,UAAU,GAAGrC,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IACzC,IAAI,CAAC0C,WAAW,GAAGtC,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IAE1C,IAAI,CAAC8C,KAAK,GAAG,IAAI,CAACC,YAAY,EAAE;IAChC,IAAI,CAACK,YAAY,CAAChN,GAAG,CAAC;IACtB,IAAI,CAACiN,iBAAiB,EAAE;;EAG1BjN,GAAGA,CAAA,EAEuC;IAAA,IAFtC;MACFkN,oBAAoB,GAAG;IAAK,IAAA3e,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MACU,EAAE;IACxC,IAAI4e,KAAK,GAAG,CAAC;IACb,IAAInN,GAAG,GAAG,EAAE;IAEZ,KAAK,IAAIrM,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;MACvC,IAAI,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,EAAE;QAClB,IAAIwZ,KAAK,GAAG,CAAC,EAAE;UACbnN,GAAG,IAAImN,KAAK;UACZA,KAAK,GAAG,CAAC;QACV;QACD,MAAM;UAAE/N,KAAK;UAAE5L,IAAI,EAAE6L;QAAK,CAAE,GAAG,IAAI,CAAC2M,MAAM,CAACrY,CAAC,CAAC;QAE7CqM,GAAG,IAAIZ,KAAK,KAAKb,KAAK,GAAGc,KAAK,CAAChM,WAAW,EAAE,GAAGgM,KAAK,CAACmM,WAAW,EAAE;MACnE,OAAM;QACL2B,KAAK,EAAE;MACR;MAED,IAAKxZ,CAAC,GAAG,CAAC,GAAI,IAAI,EAAE;QAClB,IAAIwZ,KAAK,GAAG,CAAC,EAAE;UACbnN,GAAG,IAAImN,KAAK;QACb;QAED,IAAIxZ,CAAC,KAAKoQ,IAAI,CAACgE,EAAE,EAAE;UACjB/H,GAAG,IAAI,GAAG;QACX;QAEDmN,KAAK,GAAG,CAAC;QACTxZ,CAAC,IAAI,CAAC;MACP;IACF;IAED,IAAIyZ,QAAQ,GAAG,EAAE;IACjB,IAAI,IAAI,CAACjB,SAAS,CAAC5N,KAAK,CAAC,GAAG4B,IAAI,CAACe,YAAY,EAAE;MAC7CkM,QAAQ,IAAI,GAAG;IAChB;IACD,IAAI,IAAI,CAACjB,SAAS,CAAC5N,KAAK,CAAC,GAAG4B,IAAI,CAACgB,YAAY,EAAE;MAC7CiM,QAAQ,IAAI,GAAG;IAChB;IACD,IAAI,IAAI,CAACjB,SAAS,CAAC3N,KAAK,CAAC,GAAG2B,IAAI,CAACe,YAAY,EAAE;MAC7CkM,QAAQ,IAAI,GAAG;IAChB;IACD,IAAI,IAAI,CAACjB,SAAS,CAAC3N,KAAK,CAAC,GAAG2B,IAAI,CAACgB,YAAY,EAAE;MAC7CiM,QAAQ,IAAI,GAAG;IAChB;;IAGDA,QAAQ,GAAGA,QAAQ,IAAI,GAAG;IAE1B,IAAIC,QAAQ,GAAG,GAAG;IAClB;;;AAGG;IACH,IAAI,IAAI,CAACjB,SAAS,KAAKxL,KAAK,EAAE;MAC5B,IAAIsM,oBAAoB,EAAE;QACxBG,QAAQ,GAAG1N,SAAS,CAAC,IAAI,CAACyM,SAAS,CAAC;MACrC,OAAM;QACL,MAAMkB,aAAa,GAAG,IAAI,CAAClB,SAAS,IAAI,IAAI,CAACF,KAAK,KAAK3N,KAAK,GAAG,EAAE,GAAG,GAAG,CAAC;QACxE,MAAMgP,OAAO,GAAG,CAACD,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAG,CAAC,CAAC;QAEtD,KAAK,MAAMpE,MAAM,IAAIqE,OAAO,EAAE;UAAA,IAAAC,mBAAA,EAAAC,oBAAA;;UAE5B,IAAIvE,MAAM,GAAG,IAAI,EAAE;YACjB;UACD;UAED,MAAM9J,KAAK,GAAG,IAAI,CAAC8M,KAAK;;UAGxB,IACE,EAAAsB,mBAAA,OAAI,CAACxB,MAAM,CAAC9C,MAAM,CAAC,cAAAsE,mBAAA,uBAAnBA,mBAAA,CAAqBpO,KAAK,MAAKA,KAAK,IACpC,EAAAqO,oBAAA,OAAI,CAACzB,MAAM,CAAC9C,MAAM,CAAC,cAAAuE,oBAAA,uBAAnBA,oBAAA,CAAqBja,IAAI,MAAKiL,IAAI,EAClC;;YAEA,IAAI,CAACiP,SAAS,CAAC;cACbtO,KAAK;cACLjB,IAAI,EAAE+K,MAAM;cACZ5J,EAAE,EAAE,IAAI,CAAC8M,SAAS;cAClB/M,KAAK,EAAEZ,IAAI;cACXe,QAAQ,EAAEf,IAAI;cACdc,KAAK,EAAEY,IAAI,CAACa;YACb,EAAC;YACF,MAAM2M,OAAO,GAAG,CAAC,IAAI,CAACC,eAAe,CAACxO,KAAK,CAAC;YAC5C,IAAI,CAACyO,SAAS,EAAE;;YAGhB,IAAIF,OAAO,EAAE;cACXN,QAAQ,GAAG1N,SAAS,CAAC,IAAI,CAACyM,SAAS,CAAC;cACpC;YACD;UACF;QACF;MACF;IACF;IAED,OAAO,CACLpM,GAAG,EACH,IAAI,CAACkM,KAAK,EACVkB,QAAQ,EACRC,QAAQ,EACR,IAAI,CAAChB,UAAU,EACf,IAAI,CAACC,WAAW,CACjB,CAACxZ,IAAI,CAAC,GAAG,CAAC;;EAGLgb,SAASA,CAACna,CAAS;IACzB,IAAI,CAAC,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,EAAE;MACnB,OAAO,EAAE;IACV;IAED,MAAM;MAAEyL,KAAK;MAAE5L;IAAI,CAAE,GAAG,IAAI,CAACwY,MAAM,CAACrY,CAAC,CAAC;IAEtC,MAAMoa,UAAU,GAAG;MACjB7F,CAAC,EAAE,CAAC;MACJD,CAAC,EAAE;KACJ,CAAC7I,KAAK,CAAC;IAER,MAAM4O,SAAS,GAAG;MAChBlT,CAAC,EAAE,CAAC;MACJsN,CAAC,EAAE,CAAC;MACJH,CAAC,EAAE,CAAC;MACJI,CAAC,EAAE,CAAC;MACJC,CAAC,EAAE,CAAC;MACJtX,CAAC,EAAE;KACJ,CAACwC,IAAI,CAAC;IAEP,OAAO0K,UAAU,CAAC6P,UAAU,CAAC,CAACC,SAAS,CAAC,CAACra,CAAC,CAAC;;EAGrCsa,MAAMA,CAAA;IACZ,OAAO,IAAI,CAAC7B,SAAS,KAAKxL,KAAK,GAAG,EAAE,GAAGxC,OAAO,CAAC,IAAI,CAACgO,SAAS,GAAG,CAAC,CAAC;;EAG5D8B,YAAYA,CAAA;IAClB,MAAMC,KAAK,GAAI,IAAI,CAAChC,SAAS,CAACjE,CAAC,IAAI,CAAC,GAAK,IAAI,CAACiE,SAAS,CAAClE,CAAC,IAAI,CAAE;IAC/D,OAAO5J,aAAa,CAAC8P,KAAK,CAAC;;EAGrBxB,YAAYA,CAAA;IAClB,IAAIyB,IAAI,GAAG,EAAE;IAEb,KAAK,IAAIza,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;;MAEvC,IAAIA,CAAC,GAAG,IAAI,EAAE;QACZA,CAAC,IAAI,CAAC;QACN;MACD;MAED,IAAI,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,EAAE;QAClBya,IAAI,IAAI,IAAI,CAACN,SAAS,CAACna,CAAC,CAAC;MAC1B;IACF;IAEDya,IAAI,IAAI,IAAI,CAACH,MAAM,EAAE;IACrBG,IAAI,IAAI,IAAI,CAACF,YAAY,EAAE;IAE3B,IAAI,IAAI,CAAChC,KAAK,KAAK,GAAG,EAAE;MACtBkC,IAAI,IAAI9P,QAAQ;IACjB;IAED,OAAO8P,IAAI;;EAGb;;;;;AAKG;EACKpB,YAAYA,CAAChN,GAAW;IAC9B,IAAI,IAAI,CAACuM,QAAQ,CAAC/d,MAAM,GAAG,CAAC,EAAE;IAE9B,IAAIwR,GAAG,KAAKjB,gBAAgB,EAAE;MAC5B,IAAI,CAAC0N,OAAO,CAAC,OAAO,CAAC,GAAG,GAAG;MAC3B,IAAI,CAACA,OAAO,CAAC,KAAK,CAAC,GAAGzM,GAAG;IAC1B,OAAM;MACL,IAAI,CAACyM,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI;MAC5B,IAAI,CAACA,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI;IAC3B;;EAGH4B,KAAKA,CAAA;IACH,IAAI,CAACxC,IAAI,CAAC9M,gBAAgB,CAAC;;EAG7BuP,GAAGA,CAACpF,MAAc;IAChB,OAAO,IAAI,CAAC8C,MAAM,CAACjI,IAAI,CAACmF,MAAM,CAAC,CAAC;;EAGlCqF,SAASA,CAAClP,KAAY;IACpB,MAAMkO,OAAO,GAAa,EAAE;IAC5B,KAAK,IAAI5Z,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;MAAA,IAAA6a,cAAA;;MAEvC,IAAI7a,CAAC,GAAG,IAAI,EAAE;QACZA,CAAC,IAAI,CAAC;QACN;MACD;;MAGD,IAAI,CAAC,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,IAAI,EAAA6a,cAAA,OAAI,CAACxC,MAAM,CAACrY,CAAC,CAAC,cAAA6a,cAAA,uBAAdA,cAAA,CAAgBpP,KAAK,MAAKC,KAAK,CAACD,KAAK,EAAE;QAC5D;MACD;;MAGD,IACE,IAAI,CAAC4M,MAAM,CAACrY,CAAC,CAAC,CAACyL,KAAK,KAAKC,KAAK,CAACD,KAAK,IACpC,IAAI,CAAC4M,MAAM,CAACrY,CAAC,CAAC,CAACH,IAAI,KAAK6L,KAAK,CAAC7L,IAAI,EAClC;QACA+Z,OAAO,CAACjS,IAAI,CAACqE,SAAS,CAAChM,CAAC,CAAC,CAAC;MAC3B;IACF;IAED,OAAO4Z,OAAO;;EAGhBkB,GAAGA,CAAAC,KAAA,EAEDxF,MAAc;IAAA,IADd;MAAE1V,IAAI;MAAE4L;IAAK,CAAuC,GAAAsP,KAAA;IAGpD,IAAI,IAAI,CAAC3B,IAAI,CAAC;MAAEvZ,IAAI;MAAE4L;IAAK,CAAE,EAAE8J,MAAM,CAAC,EAAE;MACtC,IAAI,CAACyF,qBAAqB,EAAE;MAC5B,IAAI,CAACC,sBAAsB,EAAE;MAC7B,IAAI,CAAC5B,YAAY,CAAC,IAAI,CAAChN,GAAG,EAAE,CAAC;MAC7B,OAAO,IAAI;IACZ;IACD,OAAO,KAAK;;EAGN6O,IAAIA,CAACC,EAAU,EAAEzP,KAAY;IACnC,IAAI,CAACqN,KAAK,IAAI,IAAI,CAACoB,SAAS,CAACgB,EAAE,CAAC;IAChC,IAAI,CAAC9C,MAAM,CAAC8C,EAAE,CAAC,GAAGzP,KAAK;IACvB,IAAI,CAACqN,KAAK,IAAI,IAAI,CAACoB,SAAS,CAACgB,EAAE,CAAC;;EAG1B/B,IAAIA,CAAAgC,KAAA,EAEV7F,MAAc;IAAA,IADd;MAAE1V,IAAI;MAAE4L;IAAK,CAAuC,GAAA2P,KAAA;;IAIpD,IAAIrG,OAAO,CAACpI,OAAO,CAAC9M,IAAI,CAACgY,WAAW,EAAE,CAAC,KAAK,EAAE,EAAE;MAC9C,OAAO,KAAK;IACb;;IAGD,IAAI,EAAEtC,MAAM,IAAInF,IAAI,CAAC,EAAE;MACrB,OAAO,KAAK;IACb;IAED,MAAM+K,EAAE,GAAG/K,IAAI,CAACmF,MAAM,CAAC;;IAGvB,IACE1V,IAAI,IAAIsL,IAAI,IACZ,EAAE,IAAI,CAACmN,MAAM,CAAC7M,KAAK,CAAC,IAAIwB,KAAK,IAAI,IAAI,CAACqL,MAAM,CAAC7M,KAAK,CAAC,IAAI0P,EAAE,CAAC,EAC1D;MACA,OAAO,KAAK;IACb;IAED,MAAME,oBAAoB,GAAG,IAAI,CAAChD,MAAM,CAAC8C,EAAE,CAAC;;IAG5C,IAAIE,oBAAoB,IAAIA,oBAAoB,CAACxb,IAAI,KAAKsL,IAAI,EAAE;MAC9D,IAAI,CAACmN,MAAM,CAAC+C,oBAAoB,CAAC5P,KAAK,CAAC,GAAGwB,KAAK;IAChD;IAED,IAAI,CAACiO,IAAI,CAACC,EAAE,EAAE;MAAEtb,IAAI,EAAEA,IAAmB;MAAE4L,KAAK,EAAEA;IAAc,CAAE,CAAC;IAEnE,IAAI5L,IAAI,KAAKsL,IAAI,EAAE;MACjB,IAAI,CAACmN,MAAM,CAAC7M,KAAK,CAAC,GAAG0P,EAAE;IACxB;IAED,OAAO,IAAI;;EAGLG,MAAMA,CAACH,EAAU;IACvB,IAAI,CAACpC,KAAK,IAAI,IAAI,CAACoB,SAAS,CAACgB,EAAE,CAAC;IAChC,OAAO,IAAI,CAAC9C,MAAM,CAAC8C,EAAE,CAAC;;EAGxBI,MAAMA,CAAChG,MAAc;IACnB,MAAM7J,KAAK,GAAG,IAAI,CAACiP,GAAG,CAACpF,MAAM,CAAC;IAC9B,IAAI,CAAC+F,MAAM,CAAClL,IAAI,CAACmF,MAAM,CAAC,CAAC;IACzB,IAAI7J,KAAK,IAAIA,KAAK,CAAC7L,IAAI,KAAKsL,IAAI,EAAE;MAChC,IAAI,CAACmN,MAAM,CAAC5M,KAAK,CAACD,KAAK,CAAC,GAAGwB,KAAK;IACjC;IAED,IAAI,CAAC+N,qBAAqB,EAAE;IAC5B,IAAI,CAACC,sBAAsB,EAAE;IAC7B,IAAI,CAAC5B,YAAY,CAAC,IAAI,CAAChN,GAAG,EAAE,CAAC;IAE7B,OAAOX,KAAK;;EAGNsP,qBAAqBA,CAAA;IAAA,IAAAQ,mBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,mBAAA,EAAAC,oBAAA,EAAAC,mBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA;IAC3B,IAAI,CAACpD,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;IAEjC,MAAM6B,gBAAgB,GACpB,EAAAZ,mBAAA,OAAI,CAACnD,MAAM,CAACjI,IAAI,CAAC6D,EAAE,CAAC,cAAAuH,mBAAA,uBAApBA,mBAAA,CAAsB3b,IAAI,MAAKsL,IAAI,IACnC,EAAAsQ,oBAAA,OAAI,CAACpD,MAAM,CAACjI,IAAI,CAAC6D,EAAE,CAAC,cAAAwH,oBAAA,uBAApBA,oBAAA,CAAsBhQ,KAAK,MAAKb,KAAK;IACvC,MAAMyR,gBAAgB,GACpB,EAAAX,oBAAA,OAAI,CAACrD,MAAM,CAACjI,IAAI,CAACK,EAAE,CAAC,cAAAiL,oBAAA,uBAApBA,oBAAA,CAAsB7b,IAAI,MAAKsL,IAAI,IACnC,EAAAwQ,oBAAA,OAAI,CAACtD,MAAM,CAACjI,IAAI,CAACK,EAAE,CAAC,cAAAkL,oBAAA,uBAApBA,oBAAA,CAAsBlQ,KAAK,MAAKZ,KAAK;IAEvC,IACE,CAACuR,gBAAgB,IACjB,EAAAR,mBAAA,OAAI,CAACvD,MAAM,CAACjI,IAAI,CAACyD,EAAE,CAAC,cAAA+H,mBAAA,uBAApBA,mBAAA,CAAsB/b,IAAI,MAAKoL,IAAI,IACnC,EAAA4Q,oBAAA,OAAI,CAACxD,MAAM,CAACjI,IAAI,CAACyD,EAAE,CAAC,cAAAgI,oBAAA,uBAApBA,oBAAA,CAAsBpQ,KAAK,MAAKb,KAAK,EACrC;MACA,IAAI,CAAC4N,SAAS,CAACjE,CAAC,IAAI,GAAkB;IACvC;IAED,IACE,CAAC6H,gBAAgB,IACjB,EAAAN,mBAAA,OAAI,CAACzD,MAAM,CAACjI,IAAI,CAACgE,EAAE,CAAC,cAAA0H,mBAAA,uBAApBA,mBAAA,CAAsBjc,IAAI,MAAKoL,IAAI,IACnC,EAAA8Q,oBAAA,OAAI,CAAC1D,MAAM,CAACjI,IAAI,CAACgE,EAAE,CAAC,cAAA2H,oBAAA,uBAApBA,oBAAA,CAAsBtQ,KAAK,MAAKb,KAAK,EACrC;MACA,IAAI,CAAC4N,SAAS,CAACjE,CAAC,IAAI,GAAkB;IACvC;IAED,IACE,CAAC8H,gBAAgB,IACjB,EAAAL,oBAAA,OAAI,CAAC3D,MAAM,CAACjI,IAAI,CAACC,EAAE,CAAC,cAAA2L,oBAAA,uBAApBA,oBAAA,CAAsBnc,IAAI,MAAKoL,IAAI,IACnC,EAAAgR,oBAAA,OAAI,CAAC5D,MAAM,CAACjI,IAAI,CAACC,EAAE,CAAC,cAAA4L,oBAAA,uBAApBA,oBAAA,CAAsBxQ,KAAK,MAAKZ,KAAK,EACrC;MACA,IAAI,CAAC2N,SAAS,CAAClE,CAAC,IAAI,GAAkB;IACvC;IAED,IACE,CAAC+H,gBAAgB,IACjB,EAAAH,oBAAA,OAAI,CAAC7D,MAAM,CAACjI,IAAI,CAACQ,EAAE,CAAC,cAAAsL,oBAAA,uBAApBA,oBAAA,CAAsBrc,IAAI,MAAKoL,IAAI,IACnC,EAAAkR,oBAAA,OAAI,CAAC9D,MAAM,CAACjI,IAAI,CAACQ,EAAE,CAAC,cAAAuL,oBAAA,uBAApBA,oBAAA,CAAsB1Q,KAAK,MAAKZ,KAAK,EACrC;MACA,IAAI,CAAC2N,SAAS,CAAClE,CAAC,IAAI,GAAkB;IACvC;IAED,IAAI,CAACyE,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;;EAG3BU,sBAAsBA,CAAA;IAAA,IAAAqB,qBAAA,EAAAC,sBAAA;IAC5B,IAAI,IAAI,CAAC9D,SAAS,KAAKxL,KAAK,EAAE;MAC5B;IACD;IAED,MAAMuP,WAAW,GAAG,IAAI,CAAC/D,SAAS,IAAI,IAAI,CAACF,KAAK,KAAK3N,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC;IACtE,MAAM6R,aAAa,GAAG,IAAI,CAAChE,SAAS,IAAI,IAAI,CAACF,KAAK,KAAK3N,KAAK,GAAG,EAAE,GAAG,GAAG,CAAC;IACxE,MAAM8R,SAAS,GAAG,CAACD,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAG,CAAC,CAAC;IAExD,IACE,IAAI,CAACpE,MAAM,CAACmE,WAAW,CAAC,KAAK,IAAI,IACjC,IAAI,CAACnE,MAAM,CAAC,IAAI,CAACI,SAAS,CAAC,KAAK,IAAI,IACpC,EAAA6D,qBAAA,OAAI,CAACjE,MAAM,CAACoE,aAAa,CAAC,cAAAH,qBAAA,uBAA1BA,qBAAA,CAA4B7Q,KAAK,MAAKsK,SAAS,CAAC,IAAI,CAACwC,KAAK,CAAC,IAC3D,EAAAgE,sBAAA,OAAI,CAAClE,MAAM,CAACoE,aAAa,CAAC,cAAAF,sBAAA,uBAA1BA,sBAAA,CAA4B1c,IAAI,MAAKiL,IAAI,EACzC;MACA,IAAI,CAACiO,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;MAC3B,IAAI,CAAC7B,SAAS,GAAGxL,KAAK;MACtB;IACD;IAED,MAAM0P,UAAU,GAAIpH,MAAc;MAAA,IAAAqH,oBAAA,EAAAC,oBAAA;MAAA,OAChC,EAAEtH,MAAM,GAAG,IAAI,CAAC,IAChB,EAAAqH,oBAAA,OAAI,CAACvE,MAAM,CAAC9C,MAAM,CAAC,cAAAqH,oBAAA,uBAAnBA,oBAAA,CAAqBnR,KAAK,MAAK,IAAI,CAAC8M,KAAK,IACzC,EAAAsE,oBAAA,OAAI,CAACxE,MAAM,CAAC9C,MAAM,CAAC,cAAAsH,oBAAA,uBAAnBA,oBAAA,CAAqBhd,IAAI,MAAKiL,IAAI;IAAA;IAEpC,IAAI,CAAC4R,SAAS,CAAC3F,IAAI,CAAC4F,UAAU,CAAC,EAAE;MAC/B,IAAI,CAAC5D,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;MAC3B,IAAI,CAAC7B,SAAS,GAAGxL,KAAK;IACvB;;EAMK6P,SAASA,CAACrR,KAAY,EAAE8J,MAAc,EAAEwH,OAAiB;IAC/D,MAAML,SAAS,GAAa,EAAE;IAC9B,KAAK,IAAI1c,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;;MAEvC,IAAIA,CAAC,GAAG,IAAI,EAAE;QACZA,CAAC,IAAI,CAAC;QACN;MACD;;MAGD,IAAI,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,KAAKpE,SAAS,IAAI,IAAI,CAACyc,MAAM,CAACrY,CAAC,CAAC,CAACyL,KAAK,KAAKA,KAAK,EAAE;QAClE;MACD;MAED,MAAMC,KAAK,GAAG,IAAI,CAAC2M,MAAM,CAACrY,CAAC,CAAC;MAC5B,MAAMgd,UAAU,GAAGhd,CAAC,GAAGuV,MAAM;;MAG7B,IAAIyH,UAAU,KAAK,CAAC,EAAE;QACpB;MACD;MAED,MAAMxC,KAAK,GAAGwC,UAAU,GAAG,GAAG;MAE9B,IAAIpI,OAAO,CAAC4F,KAAK,CAAC,GAAG1F,WAAW,CAACpJ,KAAK,CAAC7L,IAAI,CAAC,EAAE;QAC5C,IAAI6L,KAAK,CAAC7L,IAAI,KAAKiL,IAAI,EAAE;UACvB,IACGkS,UAAU,GAAG,CAAC,IAAItR,KAAK,CAACD,KAAK,KAAKb,KAAK,IACvCoS,UAAU,IAAI,CAAC,IAAItR,KAAK,CAACD,KAAK,KAAKZ,KAAM,EAC1C;YACA,IAAI,CAACkS,OAAO,EAAE;cACZ,OAAO,IAAI;YACZ,OAAM;cACLL,SAAS,CAAC/U,IAAI,CAACqE,SAAS,CAAChM,CAAC,CAAC,CAAC;YAC7B;UACF;UACD;QACD;;QAGD,IAAI0L,KAAK,CAAC7L,IAAI,KAAK,GAAG,IAAI6L,KAAK,CAAC7L,IAAI,KAAK,GAAG,EAAE;UAC5C,IAAI,CAACkd,OAAO,EAAE;YACZ,OAAO,IAAI;UACZ,OAAM;YACLL,SAAS,CAAC/U,IAAI,CAACqE,SAAS,CAAChM,CAAC,CAAC,CAAC;YAC5B;UACD;QACF;QAED,MAAMpC,MAAM,GAAGiX,IAAI,CAAC2F,KAAK,CAAC;QAC1B,IAAIva,CAAC,GAAGD,CAAC,GAAGpC,MAAM;QAElB,IAAIqf,OAAO,GAAG,KAAK;QACnB,OAAOhd,CAAC,KAAKsV,MAAM,EAAE;UACnB,IAAI,IAAI,CAAC8C,MAAM,CAACpY,CAAC,CAAC,IAAI,IAAI,EAAE;YAC1Bgd,OAAO,GAAG,IAAI;YACd;UACD;UACDhd,CAAC,IAAIrC,MAAM;QACZ;QAED,IAAI,CAACqf,OAAO,EAAE;UACZ,IAAI,CAACF,OAAO,EAAE;YACZ,OAAO,IAAI;UACZ,OAAM;YACLL,SAAS,CAAC/U,IAAI,CAACqE,SAAS,CAAChM,CAAC,CAAC,CAAC;YAC5B;UACD;QACF;MACF;IACF;IAED,IAAI+c,OAAO,EAAE;MACX,OAAOL,SAAS;IACjB,OAAM;MACL,OAAO,KAAK;IACb;;EAGHA,SAASA,CAACnH,MAAc,EAAE2H,UAAkB;IAC1C,IAAI,CAACA,UAAU,EAAE;MACf,OAAO,IAAI,CAACJ,SAAS,CAAC,IAAI,CAACvE,KAAK,EAAEnI,IAAI,CAACmF,MAAM,CAAC,EAAE,IAAI,CAAC;IACtD,OAAM;MACL,OAAO,IAAI,CAACuH,SAAS,CAACI,UAAU,EAAE9M,IAAI,CAACmF,MAAM,CAAC,EAAE,IAAI,CAAC;IACtD;;EAGK0E,eAAeA,CAACxO,KAAY;IAClC,MAAM8J,MAAM,GAAG,IAAI,CAAC+C,MAAM,CAAC7M,KAAK,CAAC;IACjC,OAAO8J,MAAM,KAAK,EAAE,GAAG,KAAK,GAAG,IAAI,CAACuH,SAAS,CAAC/G,SAAS,CAACtK,KAAK,CAAC,EAAE8J,MAAM,CAAC;;EAGzEkF,IAAIA,CAAA;IACF,OAAO,IAAI,CAAC1B,KAAK,CAAC5a,QAAQ,CAAC,EAAE,CAAC;;EAGhCgf,UAAUA,CAAC5H,MAAc,EAAE2H,UAAiB;IAC1C,OAAO,IAAI,CAACJ,SAAS,CAACI,UAAU,EAAE9M,IAAI,CAACmF,MAAM,CAAC,CAAC;;EAGjD6H,OAAOA,CAAA;IACL,OAAO,IAAI,CAACnD,eAAe,CAAC,IAAI,CAAC1B,KAAK,CAAC;;EAGzC8E,OAAOA,CAAA;IACL,OAAO,IAAI,CAACD,OAAO,EAAE;;EAGvBE,WAAWA,CAAA;IACT,OAAO,IAAI,CAACF,OAAO,EAAE,IAAI,IAAI,CAACG,MAAM,EAAE,CAAC1iB,MAAM,KAAK,CAAC;;EAGrD2iB,WAAWA,CAAA;IACT,OAAO,CAAC,IAAI,CAACJ,OAAO,EAAE,IAAI,IAAI,CAACG,MAAM,EAAE,CAAC1iB,MAAM,KAAK,CAAC;;EAGtD4iB,sBAAsBA,CAAA;IACpB;;;;;;AAMG;IACH,MAAMC,MAAM,GAAgC;MAC1CpJ,CAAC,EAAE,CAAC;MACJG,CAAC,EAAE,CAAC;MACJC,CAAC,EAAE,CAAC;MACJC,CAAC,EAAE,CAAC;MACJtX,CAAC,EAAE,CAAC;MACJ8J,CAAC,EAAE;KACJ;IACD,MAAMwW,OAAO,GAAG,EAAE;IAClB,IAAIC,SAAS,GAAG,CAAC;IACjB,IAAIC,WAAW,GAAG,CAAC;IAEnB,KAAK,IAAI7d,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;MACvC6d,WAAW,GAAG,CAACA,WAAW,GAAG,CAAC,IAAI,CAAC;MACnC,IAAI7d,CAAC,GAAG,IAAI,EAAE;QACZA,CAAC,IAAI,CAAC;QACN;MACD;MAED,MAAM0L,KAAK,GAAG,IAAI,CAAC2M,MAAM,CAACrY,CAAC,CAAC;MAC5B,IAAI0L,KAAK,EAAE;QACTgS,MAAM,CAAChS,KAAK,CAAC7L,IAAI,CAAC,GAAG6L,KAAK,CAAC7L,IAAI,IAAI6d,MAAM,GAAGA,MAAM,CAAChS,KAAK,CAAC7L,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;QACtE,IAAI6L,KAAK,CAAC7L,IAAI,KAAKmL,MAAM,EAAE;UACzB2S,OAAO,CAAChW,IAAI,CAACkW,WAAW,CAAC;QAC1B;QACDD,SAAS,EAAE;MACZ;IACF;;IAGD,IAAIA,SAAS,KAAK,CAAC,EAAE;MACnB,OAAO,IAAI;IACZ,OAAM;;IAELA,SAAS,KAAK,CAAC,KACdF,MAAM,CAAC1S,MAAM,CAAC,KAAK,CAAC,IAAI0S,MAAM,CAAC3S,MAAM,CAAC,KAAK,CAAC,CAAC,EAC9C;MACA,OAAO,IAAI;IACZ,OAAM,IAAI6S,SAAS,KAAKF,MAAM,CAAC1S,MAAM,CAAC,GAAG,CAAC,EAAE;;MAE3C,IAAI8S,GAAG,GAAG,CAAC;MACX,MAAMzG,GAAG,GAAGsG,OAAO,CAAC9iB,MAAM;MAC1B,KAAK,IAAImF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;QAC5B8d,GAAG,IAAIH,OAAO,CAAC3d,CAAC,CAAC;MAClB;MACD,IAAI8d,GAAG,KAAK,CAAC,IAAIA,GAAG,KAAKzG,GAAG,EAAE;QAC5B,OAAO,IAAI;MACZ;IACF;IAED,OAAO,KAAK;;EAGd0G,qBAAqBA,CAAA;IACnB,OAAO,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACjF,KAAK,CAAC,IAAI,CAAC;;EAGhDkF,kBAAkBA,CAAA;IAChB,OAAO,IAAI,CAACvF,UAAU,IAAI,GAAG;;EAG/BwF,MAAMA,CAAA;IACJ,OACE,IAAI,CAACD,kBAAkB,EAAE,IACzB,IAAI,CAACT,WAAW,EAAE,IAClB,IAAI,CAACC,sBAAsB,EAAE,IAC7B,IAAI,CAACM,qBAAqB,EAAE;;EAIhCI,UAAUA,CAAA;IACR,OAAO,IAAI,CAACb,WAAW,EAAE,IAAI,IAAI,CAACY,MAAM,EAAE;;EA2D5CrY,KAAKA,CAAA,EAI8D;IAAA,IAJ7D;MACJkX,OAAO,GAAG,KAAK;MACfxH,MAAM,GAAG3Z,SAAS;MAClB8P,KAAK,GAAG9P;IAAS,IAAAhB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAC8C,EAAE;IACjE,MAAMiL,KAAK,GAAG,IAAI,CAAC0X,MAAM,CAAC;MAAEhI,MAAM;MAAE7J;IAAK,CAAE,CAAC;IAE5C,IAAIqR,OAAO,EAAE;MACX,OAAOlX,KAAK,CAAC/G,GAAG,CAAEvE,IAAI,IAAK,IAAI8Q,IAAI,CAAC,IAAI,EAAE9Q,IAAI,CAAC,CAAC;IACjD,OAAM;MACL,OAAOsL,KAAK,CAAC/G,GAAG,CAAEvE,IAAI,IAAK,IAAI,CAAC6jB,UAAU,CAAC7jB,IAAI,EAAEsL,KAAK,CAAC,CAAC;IACzD;;EAGK0X,MAAMA,CAAA,EAQR;IAAA,IARS;MACbrR,KAAK,GAAG,IAAI;MACZR,KAAK,GAAG9P,SAAS;MACjB2Z,MAAM,GAAG3Z;IAAS,IAAAhB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAKhB,EAAE;IACJ,MAAMyjB,SAAS,GAAG9I,MAAM,GAAIA,MAAM,CAACsC,WAAW,EAAa,GAAGjc,SAAS;IACvE,MAAM0iB,QAAQ,GAAG5S,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEmM,WAAW,EAAE;IAErC,MAAMhS,KAAK,GAAmB,EAAE;IAChC,MAAM0Y,EAAE,GAAG,IAAI,CAAChG,KAAK;IACrB,MAAMiG,IAAI,GAAGzI,SAAS,CAACwI,EAAE,CAAC;IAE1B,IAAIE,WAAW,GAAGrO,IAAI,CAACC,EAAE;IACzB,IAAIqO,UAAU,GAAGtO,IAAI,CAACgE,EAAE;IACxB,IAAIuK,YAAY,GAAG,KAAK;;IAGxB,IAAIN,SAAS,EAAE;;MAEb,IAAI,EAAEA,SAAS,IAAIjO,IAAI,CAAC,EAAE;QACxB,OAAO,EAAE;MACV,OAAM;QACLqO,WAAW,GAAGC,UAAU,GAAGtO,IAAI,CAACiO,SAAS,CAAC;QAC1CM,YAAY,GAAG,IAAI;MACpB;IACF;IAED,KAAK,IAAInU,IAAI,GAAGiU,WAAW,EAAEjU,IAAI,IAAIkU,UAAU,EAAElU,IAAI,EAAE,EAAE;;MAEvD,IAAIA,IAAI,GAAG,IAAI,EAAE;QACfA,IAAI,IAAI,CAAC;QACT;MACD;;MAGD,IAAI,CAAC,IAAI,CAAC6N,MAAM,CAAC7N,IAAI,CAAC,IAAI,IAAI,CAAC6N,MAAM,CAAC7N,IAAI,CAAC,CAACiB,KAAK,KAAK+S,IAAI,EAAE;QAC1D;MACD;MACD,MAAM;QAAE3e;MAAI,CAAE,GAAG,IAAI,CAACwY,MAAM,CAAC7N,IAAI,CAAC;MAElC,IAAImB,EAAU;MACd,IAAI9L,IAAI,KAAKiL,IAAI,EAAE;QACjB,IAAIwT,QAAQ,IAAIA,QAAQ,KAAKze,IAAI,EAAE;;QAGnC8L,EAAE,GAAGnB,IAAI,GAAG6J,YAAY,CAACkK,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,CAAClG,MAAM,CAAC1M,EAAE,CAAC,EAAE;UACpB8L,OAAO,CAAC5R,KAAK,EAAE0Y,EAAE,EAAE/T,IAAI,EAAEmB,EAAE,EAAEb,IAAI,CAAC;;UAGlCa,EAAE,GAAGnB,IAAI,GAAG6J,YAAY,CAACkK,EAAE,CAAC,CAAC,CAAC,CAAC;UAC/B,IAAI/I,WAAW,CAAC+I,EAAE,CAAC,KAAK7I,IAAI,CAAClL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC6N,MAAM,CAAC1M,EAAE,CAAC,EAAE;YACtD8L,OAAO,CAAC5R,KAAK,EAAE0Y,EAAE,EAAE/T,IAAI,EAAEmB,EAAE,EAAEb,IAAI,EAAElP,SAAS,EAAE4Q,IAAI,CAACY,QAAQ,CAAC;UAC7D;QACF;;QAGD,KAAK,IAAInN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;UAAA,IAAA2e,eAAA;UAC1BjT,EAAE,GAAGnB,IAAI,GAAG6J,YAAY,CAACkK,EAAE,CAAC,CAACte,CAAC,CAAC;UAC/B,IAAI0L,EAAE,GAAG,IAAI,EAAE;UAEf,IAAI,EAAAiT,eAAA,OAAI,CAACvG,MAAM,CAAC1M,EAAE,CAAC,cAAAiT,eAAA,uBAAfA,eAAA,CAAiBnT,KAAK,MAAK+S,IAAI,EAAE;YACnC/G,OAAO,CACL5R,KAAK,EACL0Y,EAAE,EACF/T,IAAI,EACJmB,EAAE,EACFb,IAAI,EACJ,IAAI,CAACuN,MAAM,CAAC1M,EAAE,CAAC,CAAC9L,IAAI,EACpB2M,IAAI,CAACW,OAAO,CACb;UACF,OAAM,IAAIxB,EAAE,KAAK,IAAI,CAAC8M,SAAS,EAAE;YAChChB,OAAO,CAAC5R,KAAK,EAAE0Y,EAAE,EAAE/T,IAAI,EAAEmB,EAAE,EAAEb,IAAI,EAAEA,IAAI,EAAE0B,IAAI,CAACa,UAAU,CAAC;UAC1D;QACF;MACF,OAAM;QACL,IAAIiR,QAAQ,IAAIA,QAAQ,KAAKze,IAAI,EAAE;QAEnC,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEoX,GAAG,GAAG7C,aAAa,CAAC3U,IAAI,CAAC,CAAChF,MAAM,EAAEoF,CAAC,GAAGoX,GAAG,EAAEpX,CAAC,EAAE,EAAE;UAC9D,MAAMrC,MAAM,GAAG4W,aAAa,CAAC3U,IAAI,CAAC,CAACI,CAAC,CAAC;UACrC0L,EAAE,GAAGnB,IAAI;UAET,OAAO,IAAI,EAAE;YACXmB,EAAE,IAAI/N,MAAM;YACZ,IAAI+N,EAAE,GAAG,IAAI,EAAE;YAEf,IAAI,CAAC,IAAI,CAAC0M,MAAM,CAAC1M,EAAE,CAAC,EAAE;cACpB8L,OAAO,CAAC5R,KAAK,EAAE0Y,EAAE,EAAE/T,IAAI,EAAEmB,EAAE,EAAE9L,IAAI,CAAC;YACnC,OAAM;;cAEL,IAAI,IAAI,CAACwY,MAAM,CAAC1M,EAAE,CAAC,CAACF,KAAK,KAAK8S,EAAE,EAAE;cAElC9G,OAAO,CACL5R,KAAK,EACL0Y,EAAE,EACF/T,IAAI,EACJmB,EAAE,EACF9L,IAAI,EACJ,IAAI,CAACwY,MAAM,CAAC1M,EAAE,CAAC,CAAC9L,IAAI,EACpB2M,IAAI,CAACW,OAAO,CACb;cACD;YACD;;YAGD,IAAItN,IAAI,KAAKkL,MAAM,IAAIlL,IAAI,KAAKsL,IAAI,EAAE;UACvC;QACF;MACF;IACF;IAED;;;;AAIG;IAEH,IAAImT,QAAQ,KAAK1iB,SAAS,IAAI0iB,QAAQ,KAAKnT,IAAI,EAAE;MAC/C,IAAI,CAACwT,YAAY,IAAID,UAAU,KAAK,IAAI,CAACpG,MAAM,CAACiG,EAAE,CAAC,EAAE;;QAEnD,IAAI,IAAI,CAAC/F,SAAS,CAAC+F,EAAE,CAAC,GAAG/R,IAAI,CAACe,YAAY,EAAE;UAC1C,MAAMsR,YAAY,GAAG,IAAI,CAACvG,MAAM,CAACiG,EAAE,CAAC;UACpC,MAAMO,UAAU,GAAGD,YAAY,GAAG,CAAC;UAEnC,IACE,CAAC,IAAI,CAACxG,MAAM,CAACwG,YAAY,GAAG,CAAC,CAAC,IAC9B,CAAC,IAAI,CAACxG,MAAM,CAACyG,UAAU,CAAC,IACxB,CAAC,IAAI,CAAChC,SAAS,CAAC0B,IAAI,EAAE,IAAI,CAAClG,MAAM,CAACiG,EAAE,CAAC,CAAC,IACtC,CAAC,IAAI,CAACzB,SAAS,CAAC0B,IAAI,EAAEK,YAAY,GAAG,CAAC,CAAC,IACvC,CAAC,IAAI,CAAC/B,SAAS,CAAC0B,IAAI,EAAEM,UAAU,CAAC,EACjC;YACArH,OAAO,CACL5R,KAAK,EACL0Y,EAAE,EACF,IAAI,CAACjG,MAAM,CAACiG,EAAE,CAAC,EACfO,UAAU,EACV3T,IAAI,EACJvP,SAAS,EACT4Q,IAAI,CAACe,YAAY,CAClB;UACF;QACF;;QAGD,IAAI,IAAI,CAACiL,SAAS,CAAC+F,EAAE,CAAC,GAAG/R,IAAI,CAACgB,YAAY,EAAE;UAC1C,MAAMqR,YAAY,GAAG,IAAI,CAACvG,MAAM,CAACiG,EAAE,CAAC;UACpC,MAAMO,UAAU,GAAGD,YAAY,GAAG,CAAC;UAEnC,IACE,CAAC,IAAI,CAACxG,MAAM,CAACwG,YAAY,GAAG,CAAC,CAAC,IAC9B,CAAC,IAAI,CAACxG,MAAM,CAACwG,YAAY,GAAG,CAAC,CAAC,IAC9B,CAAC,IAAI,CAACxG,MAAM,CAACwG,YAAY,GAAG,CAAC,CAAC,IAC9B,CAAC,IAAI,CAAC/B,SAAS,CAAC0B,IAAI,EAAE,IAAI,CAAClG,MAAM,CAACiG,EAAE,CAAC,CAAC,IACtC,CAAC,IAAI,CAACzB,SAAS,CAAC0B,IAAI,EAAEK,YAAY,GAAG,CAAC,CAAC,IACvC,CAAC,IAAI,CAAC/B,SAAS,CAAC0B,IAAI,EAAEM,UAAU,CAAC,EACjC;YACArH,OAAO,CACL5R,KAAK,EACL0Y,EAAE,EACF,IAAI,CAACjG,MAAM,CAACiG,EAAE,CAAC,EACfO,UAAU,EACV3T,IAAI,EACJvP,SAAS,EACT4Q,IAAI,CAACgB,YAAY,CAClB;UACF;QACF;MACF;IACF;IAED;;;AAGG;IACH,IAAI,CAACtB,KAAK,IAAI,IAAI,CAACoM,MAAM,CAACiG,EAAE,CAAC,KAAK,EAAE,EAAE;MACpC,OAAO1Y,KAAK;IACb;;IAGD,MAAMkZ,UAAU,GAAG,EAAE;IAErB,KAAK,IAAI/e,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;MAChD,IAAI,CAAC+Z,SAAS,CAAClU,KAAK,CAAC7F,CAAC,CAAC,CAAC;MACxB,IAAI,CAAC,IAAI,CAACia,eAAe,CAACsE,EAAE,CAAC,EAAE;QAC7BQ,UAAU,CAACpX,IAAI,CAAC9B,KAAK,CAAC7F,CAAC,CAAC,CAAC;MAC1B;MACD,IAAI,CAACka,SAAS,EAAE;IACjB;IAED,OAAO6E,UAAU;;EAGnBxkB,IAAIA,CACFA,IAAsE,EACzB;IAAA,IAA7C;MAAEykB,MAAM,GAAG;IAAK,IAAApkB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAA2B,EAAE;IAE7C;;;;;;;;;;;;AAYG;IAEH,IAAIqkB,OAAO,GAAG,IAAI;IAElB,IAAI,OAAO1kB,IAAI,KAAK,QAAQ,EAAE;MAC5B0kB,OAAO,GAAG,IAAI,CAACC,YAAY,CAAC3kB,IAAI,EAAEykB,MAAM,CAAC;IAC1C,OAAM,IAAIzkB,IAAI,KAAK,IAAI,EAAE;MACxB0kB,OAAO,GAAG,IAAI,CAACC,YAAY,CAACzJ,YAAY,EAAEuJ,MAAM,CAAC;IAClD,OAAM,IAAI,OAAOzkB,IAAI,KAAK,QAAQ,EAAE;MACnC,MAAMsL,KAAK,GAAG,IAAI,CAAC0X,MAAM,EAAE;;MAG3B,KAAK,IAAIvd,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;QAChD,IACEzF,IAAI,CAACiQ,IAAI,KAAKwB,SAAS,CAACnG,KAAK,CAAC7F,CAAC,CAAC,CAACwK,IAAI,CAAC,IACtCjQ,IAAI,CAACoR,EAAE,KAAKK,SAAS,CAACnG,KAAK,CAAC7F,CAAC,CAAC,CAAC2L,EAAE,CAAC,KACjC,EAAE,WAAW,IAAI9F,KAAK,CAAC7F,CAAC,CAAC,CAAC,IAAIzF,IAAI,CAACuR,SAAS,KAAKjG,KAAK,CAAC7F,CAAC,CAAC,CAAC8L,SAAS,CAAC,EACrE;UACAmT,OAAO,GAAGpZ,KAAK,CAAC7F,CAAC,CAAC;UAClB;QACD;MACF;IACF;;IAGD,IAAI,CAACif,OAAO,EAAE;MACZ,IAAI,OAAO1kB,IAAI,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAIgC,KAAK,kBAAAsa,MAAA,CAAkBtc,IAAI,CAAE,CAAC;MACzC,OAAM;QACL,MAAM,IAAIgC,KAAK,kBAAAsa,MAAA,CAAkBsI,IAAI,CAACC,SAAS,CAAC7kB,IAAI,CAAC,CAAE,CAAC;MACzD;IACF;;IAGD,IAAI,IAAI,CAAC6iB,OAAO,EAAE,IAAI6B,OAAO,CAACrT,KAAK,GAAGY,IAAI,CAACiB,SAAS,EAAE;MACpD,MAAM,IAAIlR,KAAK,CAAC,qCAAqC,CAAC;IACvD;IAED;;;AAGG;IACH,MAAM8iB,UAAU,GAAG,IAAIhU,IAAI,CAAC,IAAI,EAAE4T,OAAO,CAAC;IAE1C,IAAI,CAAClF,SAAS,CAACkF,OAAO,CAAC;IACvB,IAAI,CAAC3F,iBAAiB,EAAE;IACxB,OAAO+F,UAAU;;EAGXC,KAAKA,CAAC/kB,IAAkB;IAC9B,IAAI,CAACqe,QAAQ,CAACjR,IAAI,CAAC;MACjBpN,IAAI;MACJoc,KAAK,EAAE;QAAErC,CAAC,EAAE,IAAI,CAACgE,MAAM,CAAChE,CAAC;QAAEC,CAAC,EAAE,IAAI,CAAC+D,MAAM,CAAC/D;MAAC,CAAE;MAC7CgL,IAAI,EAAE,IAAI,CAAChH,KAAK;MAChBkB,QAAQ,EAAE;QAAEnF,CAAC,EAAE,IAAI,CAACkE,SAAS,CAAClE,CAAC;QAAEC,CAAC,EAAE,IAAI,CAACiE,SAAS,CAACjE;MAAC,CAAE;MACtDmF,QAAQ,EAAE,IAAI,CAACjB,SAAS;MACxBlC,SAAS,EAAE,IAAI,CAACmC,UAAU;MAC1BtC,UAAU,EAAE,IAAI,CAACuC;IAClB,EAAC;;EAGI6G,UAAUA,CAAChV,IAAY,EAAEmB,EAAU;IACzC,IAAI,CAACoN,KAAK,IAAI,IAAI,CAACoB,SAAS,CAAC3P,IAAI,CAAC;IAElC,IAAI,CAAC6N,MAAM,CAAC1M,EAAE,CAAC,GAAG,IAAI,CAAC0M,MAAM,CAAC7N,IAAI,CAAC;IACnC,OAAO,IAAI,CAAC6N,MAAM,CAAC7N,IAAI,CAAC;IAExB,IAAI,CAACuO,KAAK,IAAI,IAAI,CAACoB,SAAS,CAACxO,EAAE,CAAC;;EAG1BoO,SAASA,CAACxf,IAAkB;IAClC,MAAMgkB,EAAE,GAAG,IAAI,CAAChG,KAAK;IACrB,MAAMiG,IAAI,GAAGzI,SAAS,CAACwI,EAAE,CAAC;IAC1B,IAAI,CAACe,KAAK,CAAC/kB,IAAI,CAAC;IAEhB,IAAIA,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACiB,SAAS,EAAE;MAC/B,IAAI8Q,EAAE,KAAK1T,KAAK,EAAE;QAChB,IAAI,CAAC8N,WAAW,EAAE;MACnB;MACD,IAAI,CAACD,UAAU,EAAE;MACjB,IAAI,CAACH,KAAK,GAAGiG,IAAI;MAEjB,IAAI,CAAC/F,SAAS,GAAGxL,KAAK;MAEtB;IACD;IAED,IAAI,CAAC8L,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;IAC3B,IAAI,CAACvB,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;IAEjC,IAAIhgB,IAAI,CAACsR,QAAQ,EAAE;MACjB,IAAI,CAACkN,KAAK,IAAI,IAAI,CAACoB,SAAS,CAAC5f,IAAI,CAACoR,EAAE,CAAC;IACtC;IAED,IAAI,CAAC6T,UAAU,CAACjlB,IAAI,CAACiQ,IAAI,EAAEjQ,IAAI,CAACoR,EAAE,CAAC;;IAGnC,IAAIpR,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACa,UAAU,EAAE;MAChC,IAAI,IAAI,CAACkL,KAAK,KAAK1N,KAAK,EAAE;QACxB,IAAI,CAACyQ,MAAM,CAAC/gB,IAAI,CAACoR,EAAE,GAAG,EAAE,CAAC;MAC1B,OAAM;QACL,IAAI,CAAC2P,MAAM,CAAC/gB,IAAI,CAACoR,EAAE,GAAG,EAAE,CAAC;MAC1B;IACF;;IAGD,IAAIpR,IAAI,CAACuR,SAAS,EAAE;MAClB,IAAI,CAACwP,MAAM,CAAC/gB,IAAI,CAACoR,EAAE,CAAC;MACpB,IAAI,CAACuP,IAAI,CAAC3gB,IAAI,CAACoR,EAAE,EAAE;QAAE9L,IAAI,EAAEtF,IAAI,CAACuR,SAAS;QAAEL,KAAK,EAAE8S;MAAE,CAAE,CAAC;IACxD;;IAGD,IAAI,IAAI,CAAClG,MAAM,CAAC9d,IAAI,CAACoR,EAAE,CAAC,CAAC9L,IAAI,KAAKsL,IAAI,EAAE;MACtC,IAAI,CAACmN,MAAM,CAACiG,EAAE,CAAC,GAAGhkB,IAAI,CAACoR,EAAE;;MAGzB,IAAIpR,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACe,YAAY,EAAE;QAClC,MAAMuR,UAAU,GAAGvkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QAC9B,MAAMkT,YAAY,GAAGtkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QAChC,IAAI,CAAC6T,UAAU,CAACX,YAAY,EAAEC,UAAU,CAAC;MAC1C,OAAM,IAAIvkB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACgB,YAAY,EAAE;QACzC,MAAMsR,UAAU,GAAGvkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QAC9B,MAAMkT,YAAY,GAAGtkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QAChC,IAAI,CAAC6T,UAAU,CAACX,YAAY,EAAEC,UAAU,CAAC;MAC1C;;MAGD,IAAI,CAACtG,SAAS,CAAC+F,EAAE,CAAC,GAAG,CAAC;IACvB;;IAGD,IAAI,IAAI,CAAC/F,SAAS,CAAC+F,EAAE,CAAC,EAAE;MACtB,KAAK,IAAIve,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAG/B,KAAK,CAACiJ,EAAE,CAAC,CAAC1jB,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;QACpD,IACEzF,IAAI,CAACiQ,IAAI,KAAK8K,KAAK,CAACiJ,EAAE,CAAC,CAACve,CAAC,CAAC,CAACuV,MAAM,IACjC,IAAI,CAACiD,SAAS,CAAC+F,EAAE,CAAC,GAAGjJ,KAAK,CAACiJ,EAAE,CAAC,CAACve,CAAC,CAAC,CAACuM,IAAI,EACtC;UACA,IAAI,CAACiM,SAAS,CAAC+F,EAAE,CAAC,IAAIjJ,KAAK,CAACiJ,EAAE,CAAC,CAACve,CAAC,CAAC,CAACuM,IAAI;UACvC;QACD;MACF;IACF;;IAGD,IAAI,IAAI,CAACiM,SAAS,CAACgG,IAAI,CAAC,EAAE;MACxB,KAAK,IAAIxe,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAG/B,KAAK,CAACkJ,IAAI,CAAC,CAAC3jB,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;QACtD,IACEzF,IAAI,CAACoR,EAAE,KAAK2J,KAAK,CAACkJ,IAAI,CAAC,CAACxe,CAAC,CAAC,CAACuV,MAAM,IACjC,IAAI,CAACiD,SAAS,CAACgG,IAAI,CAAC,GAAGlJ,KAAK,CAACkJ,IAAI,CAAC,CAACxe,CAAC,CAAC,CAACuM,IAAI,EAC1C;UACA,IAAI,CAACiM,SAAS,CAACgG,IAAI,CAAC,IAAIlJ,KAAK,CAACkJ,IAAI,CAAC,CAACxe,CAAC,CAAC,CAACuM,IAAI;UAC3C;QACD;MACF;IACF;IAED,IAAI,CAACwM,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;;IAGjC,IAAIhgB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACY,QAAQ,EAAE;MAAA,IAAAqS,YAAA,EAAAC,aAAA,EAAAC,aAAA,EAAAC,aAAA;MAC9B,IAAIlG,QAAQ;MAEZ,IAAI6E,EAAE,KAAK1T,KAAK,EAAE;QAChB6O,QAAQ,GAAGnf,IAAI,CAACoR,EAAE,GAAG,EAAE;MACxB,OAAM;QACL+N,QAAQ,GAAGnf,IAAI,CAACoR,EAAE,GAAG,EAAE;MACxB;MAED,IACG,EAAGpR,IAAI,CAACoR,EAAE,GAAG,CAAC,GAAI,IAAI,CAAC,IACtB,EAAA8T,YAAA,OAAI,CAACpH,MAAM,CAAC9d,IAAI,CAACoR,EAAE,GAAG,CAAC,CAAC,cAAA8T,YAAA,uBAAxBA,YAAA,CAA0B5f,IAAI,MAAKiL,IAAI,IACvC,EAAA4U,aAAA,OAAI,CAACrH,MAAM,CAAC9d,IAAI,CAACoR,EAAE,GAAG,CAAC,CAAC,cAAA+T,aAAA,uBAAxBA,aAAA,CAA0BjU,KAAK,MAAK+S,IAAI,IACzC,EAAGjkB,IAAI,CAACoR,EAAE,GAAG,CAAC,GAAI,IAAI,CAAC,IACtB,EAAAgU,aAAA,OAAI,CAACtH,MAAM,CAAC9d,IAAI,CAACoR,EAAE,GAAG,CAAC,CAAC,cAAAgU,aAAA,uBAAxBA,aAAA,CAA0B9f,IAAI,MAAKiL,IAAI,IACvC,EAAA8U,aAAA,OAAI,CAACvH,MAAM,CAAC9d,IAAI,CAACoR,EAAE,GAAG,CAAC,CAAC,cAAAiU,aAAA,uBAAxBA,aAAA,CAA0BnU,KAAK,MAAK+S,IAAK,EAC3C;QACA,IAAI,CAAC/F,SAAS,GAAGiB,QAAQ;QACzB,IAAI,CAACX,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;MAC5B,OAAM;QACL,IAAI,CAAC7B,SAAS,GAAGxL,KAAK;MACvB;IACF,OAAM;MACL,IAAI,CAACwL,SAAS,GAAGxL,KAAK;IACvB;;IAGD,IAAI1S,IAAI,CAACmR,KAAK,KAAKZ,IAAI,EAAE;MACvB,IAAI,CAAC4N,UAAU,GAAG,CAAC;IACpB,OAAM,IAAIne,IAAI,CAACqR,KAAK,IAAIY,IAAI,CAACW,OAAO,GAAGX,IAAI,CAACa,UAAU,CAAC,EAAE;MACxD,IAAI,CAACqL,UAAU,GAAG,CAAC;IACpB,OAAM;MACL,IAAI,CAACA,UAAU,EAAE;IAClB;IAED,IAAI6F,EAAE,KAAK1T,KAAK,EAAE;MAChB,IAAI,CAAC8N,WAAW,EAAE;IACnB;IAED,IAAI,CAACJ,KAAK,GAAGiG,IAAI;IACjB,IAAI,CAACzF,KAAK,IAAIpO,QAAQ;;EAGxBkV,IAAIA,CAAA;IACF,MAAMpF,IAAI,GAAG,IAAI,CAAC1B,KAAK;IACvB,MAAMxe,IAAI,GAAG,IAAI,CAAC2f,SAAS,EAAE;IAC7B,IAAI3f,IAAI,EAAE;MACR,MAAM8kB,UAAU,GAAG,IAAIhU,IAAI,CAAC,IAAI,EAAE9Q,IAAI,CAAC;MACvC,IAAI,CAACulB,iBAAiB,CAACrF,IAAI,CAAC;MAC5B,OAAO4E,UAAU;IAClB;IACD,OAAO,IAAI;;EAGLnF,SAASA,CAAA;IACf,MAAM6F,GAAG,GAAG,IAAI,CAACnH,QAAQ,CAACoH,GAAG,EAAE;IAC/B,IAAID,GAAG,KAAKnkB,SAAS,EAAE;MACrB,OAAO,IAAI;IACZ;IAED,IAAI,CAACmd,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;IAC3B,IAAI,CAACvB,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;IAEjC,MAAMhgB,IAAI,GAAGwlB,GAAG,CAACxlB,IAAI;IAErB,IAAI,CAAC+d,MAAM,GAAGyH,GAAG,CAACpJ,KAAK;IACvB,IAAI,CAAC4B,KAAK,GAAGwH,GAAG,CAACR,IAAI;IACrB,IAAI,CAAC/G,SAAS,GAAGuH,GAAG,CAACtG,QAAQ;IAC7B,IAAI,CAAChB,SAAS,GAAGsH,GAAG,CAACrG,QAAQ;IAC7B,IAAI,CAAChB,UAAU,GAAGqH,GAAG,CAACxJ,SAAS;IAC/B,IAAI,CAACoC,WAAW,GAAGoH,GAAG,CAAC3J,UAAU;IAEjC,IAAI,CAAC2C,KAAK,IAAI,IAAI,CAACuB,MAAM,EAAE;IAC3B,IAAI,CAACvB,KAAK,IAAI,IAAI,CAACwB,YAAY,EAAE;IACjC,IAAI,CAACxB,KAAK,IAAIpO,QAAQ;IAEtB,MAAM4T,EAAE,GAAG,IAAI,CAAChG,KAAK;IACrB,MAAMiG,IAAI,GAAGzI,SAAS,CAACwI,EAAE,CAAC;IAE1B,IAAIhkB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACiB,SAAS,EAAE;MAC/B,OAAOlT,IAAI;IACZ;IAED,IAAI,CAACilB,UAAU,CAACjlB,IAAI,CAACoR,EAAE,EAAEpR,IAAI,CAACiQ,IAAI,CAAC;;IAGnC,IAAIjQ,IAAI,CAACmR,KAAK,EAAE;MACd,IAAI,CAAC4P,MAAM,CAAC/gB,IAAI,CAACiQ,IAAI,CAAC;MACtB,IAAI,CAAC0Q,IAAI,CAAC3gB,IAAI,CAACiQ,IAAI,EAAE;QAAE3K,IAAI,EAAEtF,IAAI,CAACmR,KAAK;QAAED,KAAK,EAAE8S;MAAE,CAAE,CAAC;IACtD;IAED,IAAIhkB,IAAI,CAACsR,QAAQ,EAAE;MACjB,IAAItR,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACa,UAAU,EAAE;;QAEhC,IAAImN,KAAa;QACjB,IAAI+D,EAAE,KAAK1T,KAAK,EAAE;UAChB2P,KAAK,GAAGjgB,IAAI,CAACoR,EAAE,GAAG,EAAE;QACrB,OAAM;UACL6O,KAAK,GAAGjgB,IAAI,CAACoR,EAAE,GAAG,EAAE;QACrB;QACD,IAAI,CAACuP,IAAI,CAACV,KAAK,EAAE;UAAE3a,IAAI,EAAEiL,IAAI;UAAEW,KAAK,EAAE+S;QAAI,CAAE,CAAC;MAC9C,OAAM;;QAEL,IAAI,CAACtD,IAAI,CAAC3gB,IAAI,CAACoR,EAAE,EAAE;UAAE9L,IAAI,EAAEtF,IAAI,CAACsR,QAAQ;UAAEJ,KAAK,EAAE+S;QAAI,CAAE,CAAC;MACzD;IACF;IAED,IAAIjkB,IAAI,CAACqR,KAAK,IAAIY,IAAI,CAACe,YAAY,GAAGf,IAAI,CAACgB,YAAY,CAAC,EAAE;MACxD,IAAIsR,UAAkB,EAAED,YAAoB;MAC5C,IAAItkB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACe,YAAY,EAAE;QAClCuR,UAAU,GAAGvkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QACxBkT,YAAY,GAAGtkB,IAAI,CAACoR,EAAE,GAAG,CAAC;MAC3B,OAAM;QACLmT,UAAU,GAAGvkB,IAAI,CAACoR,EAAE,GAAG,CAAC;QACxBkT,YAAY,GAAGtkB,IAAI,CAACoR,EAAE,GAAG,CAAC;MAC3B;MACD,IAAI,CAAC6T,UAAU,CAACX,YAAY,EAAEC,UAAU,CAAC;IAC1C;IAED,OAAOvkB,IAAI;;EAGbc,GAAGA,CAAA,EAG4C;IAAA,IAH3C;MACF4kB,OAAO,GAAG,IAAI;MACdC,QAAQ,GAAG;IAAC,IAAAtlB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAC+B,EAAE;IAC7C;;;AAGG;IAEH,MAAMe,MAAM,GAAa,EAAE;IAC3B,IAAIwkB,YAAY,GAAG,KAAK;;IAGxB,KAAK,MAAMngB,CAAC,IAAI,IAAI,CAAC8Y,OAAO,EAAE;MAC5B;;;;;;AAMG;MACH,MAAMsH,SAAS,GAAG,IAAI,CAACtH,OAAO,CAAC9Y,CAAC,CAAC;MACjC,IAAIogB,SAAS,EAAEzkB,MAAM,CAACgM,IAAI,CAAC,IAAAkP,MAAA,CAAI7W,CAAC,SAAA6W,MAAA,CAAK,IAAI,CAACiC,OAAO,CAAC9Y,CAAC,CAAC,WAAOigB,OAAO,CAAC;MACnEE,YAAY,GAAG,IAAI;IACpB;IAED,IAAIA,YAAY,IAAI,IAAI,CAACvH,QAAQ,CAAC/d,MAAM,EAAE;MACxCc,MAAM,CAACgM,IAAI,CAACsY,OAAO,CAAC;IACrB;IAED,MAAMI,aAAa,GAAIC,UAAkB,IAAI;MAC3C,MAAMlmB,OAAO,GAAG,IAAI,CAACye,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC;MAC1C,IAAI,OAAOjS,OAAO,KAAK,WAAW,EAAE;QAClC,MAAMmmB,SAAS,GAAGD,UAAU,CAACzlB,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE;QAClDylB,UAAU,MAAAzJ,MAAA,CAAMyJ,UAAU,EAAAzJ,MAAA,CAAG0J,SAAS,OAAA1J,MAAA,CAAIzc,OAAO,MAAG;MACrD;MACD,OAAOkmB,UAAU;IACnB,CAAC;;IAGD,MAAME,eAAe,GAAG,EAAE;IAC1B,OAAO,IAAI,CAAC5H,QAAQ,CAAC/d,MAAM,GAAG,CAAC,EAAE;MAC/B2lB,eAAe,CAAC7Y,IAAI,CAAC,IAAI,CAACuS,SAAS,EAAE,CAAC;IACvC;IAED,MAAMrU,KAAK,GAAG,EAAE;IAChB,IAAIya,UAAU,GAAG,EAAE;;IAGnB,IAAIE,eAAe,CAAC3lB,MAAM,KAAK,CAAC,EAAE;MAChCgL,KAAK,CAAC8B,IAAI,CAAC0Y,aAAa,CAAC,EAAE,CAAC,CAAC;IAC9B;;IAGD,OAAOG,eAAe,CAAC3lB,MAAM,GAAG,CAAC,EAAE;MACjCylB,UAAU,GAAGD,aAAa,CAACC,UAAU,CAAC;MACtC,MAAM/lB,IAAI,GAAGimB,eAAe,CAACR,GAAG,EAAE;;MAGlC,IAAI,CAACzlB,IAAI,EAAE;QACT;MACD;;MAGD,IAAI,CAAC,IAAI,CAACqe,QAAQ,CAAC/d,MAAM,IAAIN,IAAI,CAACkR,KAAK,KAAK,GAAG,EAAE;QAC/C,MAAMgV,MAAM,MAAA5J,MAAA,CAAM,IAAI,CAAC8B,WAAW,UAAO;;QAEzC2H,UAAU,GAAGA,UAAU,MAAAzJ,MAAA,CAAMyJ,UAAU,OAAAzJ,MAAA,CAAI4J,MAAM,IAAKA,MAAM;MAC7D,OAAM,IAAIlmB,IAAI,CAACkR,KAAK,KAAK,GAAG,EAAE;;QAE7B,IAAI6U,UAAU,CAACzlB,MAAM,EAAE;UACrBgL,KAAK,CAAC8B,IAAI,CAAC2Y,UAAU,CAAC;QACvB;QACDA,UAAU,GAAG,IAAI,CAAC3H,WAAW,GAAG,GAAG;MACpC;MAED2H,UAAU,GACRA,UAAU,GAAG,GAAG,GAAG,IAAI,CAAClC,UAAU,CAAC7jB,IAAI,EAAE,IAAI,CAACgjB,MAAM,CAAC;QAAErR,KAAK,EAAE;MAAI,CAAE,CAAC,CAAC;MACxE,IAAI,CAAC6N,SAAS,CAACxf,IAAI,CAAC;IACrB;;IAGD,IAAI+lB,UAAU,CAACzlB,MAAM,EAAE;MACrBgL,KAAK,CAAC8B,IAAI,CAAC0Y,aAAa,CAACC,UAAU,CAAC,CAAC;IACtC;;IAGDza,KAAK,CAAC8B,IAAI,CAAC,IAAI,CAACmR,OAAO,CAAC5K,MAAM,IAAI,GAAG,CAAC;IAEtC;;;AAGG;IACH,IAAIgS,QAAQ,KAAK,CAAC,EAAE;MAClB,OAAOvkB,MAAM,CAACwD,IAAI,CAAC,EAAE,CAAC,GAAG0G,KAAK,CAAC1G,IAAI,CAAC,GAAG,CAAC;IACzC;;IAGD,MAAMuhB,KAAK,GAAG,SAAAA,CAAA;MACZ,IAAI/kB,MAAM,CAACd,MAAM,GAAG,CAAC,IAAIc,MAAM,CAACA,MAAM,CAACd,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;QAC1Dc,MAAM,CAACqkB,GAAG,EAAE;QACZ,OAAO,IAAI;MACZ;MACD,OAAO,KAAK;IACd,CAAC;;IAGD,MAAMW,WAAW,GAAG,SAAAA,CAAUC,KAAa,EAAErmB,IAAY;MACvD,KAAK,MAAMsmB,KAAK,IAAItmB,IAAI,CAACiD,KAAK,CAAC,GAAG,CAAC,EAAE;QACnC,IAAI,CAACqjB,KAAK,EAAE;UACV;QACD;QACD,IAAID,KAAK,GAAGC,KAAK,CAAChmB,MAAM,GAAGqlB,QAAQ,EAAE;UACnC,OAAOQ,KAAK,EAAE,EAAE;YACdE,KAAK,EAAE;UACR;UACDjlB,MAAM,CAACgM,IAAI,CAACsY,OAAO,CAAC;UACpBW,KAAK,GAAG,CAAC;QACV;QACDjlB,MAAM,CAACgM,IAAI,CAACkZ,KAAK,CAAC;QAClBD,KAAK,IAAIC,KAAK,CAAChmB,MAAM;QACrBc,MAAM,CAACgM,IAAI,CAAC,GAAG,CAAC;QAChBiZ,KAAK,EAAE;MACR;MACD,IAAIF,KAAK,EAAE,EAAE;QACXE,KAAK,EAAE;MACR;MACD,OAAOA,KAAK;IACd,CAAC;;IAGD,IAAIE,YAAY,GAAG,CAAC;IACpB,KAAK,IAAI9gB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6F,KAAK,CAAChL,MAAM,EAAEmF,CAAC,EAAE,EAAE;MACrC,IAAI8gB,YAAY,GAAGjb,KAAK,CAAC7F,CAAC,CAAC,CAACnF,MAAM,GAAGqlB,QAAQ,EAAE;QAC7C,IAAIra,KAAK,CAAC7F,CAAC,CAAC,CAAC+gB,QAAQ,CAAC,GAAG,CAAC,EAAE;UAC1BD,YAAY,GAAGH,WAAW,CAACG,YAAY,EAAEjb,KAAK,CAAC7F,CAAC,CAAC,CAAC;UAClD;QACD;MACF;;MAED,IAAI8gB,YAAY,GAAGjb,KAAK,CAAC7F,CAAC,CAAC,CAACnF,MAAM,GAAGqlB,QAAQ,IAAIlgB,CAAC,KAAK,CAAC,EAAE;;QAExD,IAAIrE,MAAM,CAACA,MAAM,CAACd,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;UACrCc,MAAM,CAACqkB,GAAG,EAAE;QACb;QAEDrkB,MAAM,CAACgM,IAAI,CAACsY,OAAO,CAAC;QACpBa,YAAY,GAAG,CAAC;MACjB,OAAM,IAAI9gB,CAAC,KAAK,CAAC,EAAE;QAClBrE,MAAM,CAACgM,IAAI,CAAC,GAAG,CAAC;QAChBmZ,YAAY,EAAE;MACf;MACDnlB,MAAM,CAACgM,IAAI,CAAC9B,KAAK,CAAC7F,CAAC,CAAC,CAAC;MACrB8gB,YAAY,IAAIjb,KAAK,CAAC7F,CAAC,CAAC,CAACnF,MAAM;IAChC;IAED,OAAOc,MAAM,CAACwD,IAAI,CAAC,EAAE,CAAC;;EAGxB;;AAEG;EACH6hB,MAAMA,CAAA,EAAkB;IAAA,SAAAC,KAAA,GAAArmB,SAAA,CAAAC,MAAA,EAAdqmB,IAAc,OAAAnmB,KAAA,CAAAkmB,KAAA,GAAAE,KAAA,MAAAA,KAAA,GAAAF,KAAA,EAAAE,KAAA;MAAdD,IAAc,CAAAC,KAAA,IAAAvmB,SAAA,CAAAumB,KAAA;IAAA;IACtB,KAAK,IAAInhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkhB,IAAI,CAACrmB,MAAM,EAAEmF,CAAC,IAAI,CAAC,EAAE;MACvC,IAAI,OAAOkhB,IAAI,CAAClhB,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAOkhB,IAAI,CAAClhB,CAAC,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;QAClE,IAAI,CAAC8Y,OAAO,CAACoI,IAAI,CAAClhB,CAAC,CAAC,CAAC,GAAGkhB,IAAI,CAAClhB,CAAC,GAAG,CAAC,CAAC;MACpC;IACF;IACD,OAAO,IAAI,CAAC8Y,OAAO;;;EAIrBsI,SAASA,CAACC,GAAW,EAAEC,KAAa;IAAA,IAAAC,KAAA;IAClC,IAAI,CAACzI,OAAO,CAACuI,GAAG,CAAC,IAAAE,KAAA,GAAGD,KAAK,aAALA,KAAK,cAALA,KAAK,GAAI3T,gBAAgB,CAAC0T,GAAG,CAAC,cAAAE,KAAA,cAAAA,KAAA,GAAI,IAAI;IAC1D,OAAO,IAAI,CAACC,UAAU,EAAE;;EAG1BC,YAAYA,CAACJ,GAAW;IACtB,IAAIA,GAAG,IAAI,IAAI,CAACvI,OAAO,EAAE;MACvB,IAAI,CAACA,OAAO,CAACuI,GAAG,CAAC,GAAG1T,gBAAgB,CAAC0T,GAAG,CAAC,IAAI,IAAI;MACjD,OAAO,IAAI;IACZ;IACD,OAAO,KAAK;;;EAIdG,UAAUA,CAAA;IACR,MAAME,cAAc,GAA2B,EAAE;IACjD,KAAK,MAAM,CAACL,GAAG,EAAEC,KAAK,CAAC,IAAI7kB,MAAM,CAACklB,OAAO,CAAC,IAAI,CAAC7I,OAAO,CAAC,EAAE;MACvD,IAAIwI,KAAK,KAAK,IAAI,EAAE;QAClBI,cAAc,CAACL,GAAG,CAAC,GAAGC,KAAK;MAC5B;IACF;IACD,OAAOI,cAAc;;EAGvBE,OAAOA,CACLvmB,GAAW,EAIuC;IAAA,IAHlD;MACE2jB,MAAM,GAAG,KAAK;MACd6C,WAAW,GAAG;IAAO,IAAAjnB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MACyB,EAAE;;IAGlD,IAAIinB,WAAW,KAAK,OAAO,EAAE;MAC3BxmB,GAAG,GAAGA,GAAG,CAACsE,OAAO,CAAC,IAAImiB,MAAM,CAACD,WAAW,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;IACtD;IAED,MAAME,SAAS,GAAG3hB,SAAK,CAAC/E,GAAG,CAAC;;IAG5B,IAAI,CAACqf,KAAK,EAAE;;IAGZ,MAAMpf,OAAO,GAAGymB,SAAS,CAACzmB,OAAO;IACjC,IAAI+Q,GAAG,GAAG,EAAE;IAEZ,KAAK,MAAMgV,GAAG,IAAI/lB,OAAO,EAAE;;MAEzB,IAAI+lB,GAAG,CAACxJ,WAAW,EAAE,KAAK,KAAK,EAAE;QAC/BxL,GAAG,GAAG/Q,OAAO,CAAC+lB,GAAG,CAAC;MACnB;MAED,IAAI,CAACL,MAAM,CAACK,GAAG,EAAE/lB,OAAO,CAAC+lB,GAAG,CAAC,CAAC;IAC/B;IAED;;;AAGG;IACH,IAAI,CAACrC,MAAM,EAAE;MACX,IAAI3S,GAAG,EAAE;QACP,IAAI,CAAC6L,IAAI,CAAC7L,GAAG,EAAE;UAAE+L,eAAe,EAAE;QAAI,CAAE,CAAC;MAC1C;IACF,OAAM;MACL;;;AAGG;MACH,IAAI9c,OAAO,CAAC,OAAO,CAAC,KAAK,GAAG,EAAE;QAC5B,IAAI,EAAE,KAAK,IAAIA,OAAO,CAAC,EAAE;UACvB,MAAM,IAAIiB,KAAK,CACb,sDAAsD,CACvD;QACF;;QAED,IAAI,CAAC2b,IAAI,CAAC5c,OAAO,CAAC,KAAK,CAAC,EAAE;UAAE8c,eAAe,EAAE;QAAI,CAAE,CAAC;MACrD;IACF;IAED,IAAI9d,IAAI,GAAGynB,SAAS,CAAC9mB,IAAI;IAEzB,OAAOX,IAAI,EAAE;MACX,IAAIA,IAAI,CAACC,IAAI,EAAE;QACb,MAAMA,IAAI,GAAG,IAAI,CAAC2kB,YAAY,CAAC5kB,IAAI,CAACC,IAAI,EAAEykB,MAAM,CAAC;QAEjD,IAAIzkB,IAAI,IAAI,IAAI,EAAE;UAChB,MAAM,IAAIgC,KAAK,yBAAAsa,MAAA,CAAyBvc,IAAI,CAACC,IAAI,CAAE,CAAC;QACrD,OAAM;UACL,IAAI,CAACwf,SAAS,CAACxf,IAAI,CAAC;UACpB,IAAI,CAAC+e,iBAAiB,EAAE;QACzB;MACF;MAED,IAAIhf,IAAI,CAACF,OAAO,KAAKwB,SAAS,EAAE;QAC9B,IAAI,CAACid,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC,GAAG/R,IAAI,CAACF,OAAO;MAC1C;MAEDE,IAAI,GAAGA,IAAI,CAACD,UAAU,CAAC,CAAC,CAAC;IAC1B;IAED;;;;AAIG;IAEH,MAAMsB,MAAM,GAAGomB,SAAS,CAACpmB,MAAM;IAC/B,IACEA,MAAM,IACNc,MAAM,CAACulB,IAAI,CAAC,IAAI,CAAClJ,OAAO,CAAC,CAACje,MAAM,IAChC,IAAI,CAACie,OAAO,CAAC,QAAQ,CAAC,KAAKnd,MAAM,EACjC;MACA,IAAI,CAACylB,SAAS,CAAC,QAAQ,EAAEzlB,MAAM,CAAC;IACjC;;EAGH;;;;;;;;;;AAUG;EAEKyiB,UAAUA,CAAC7jB,IAAkB,EAAEsL,KAAqB;IAC1D,IAAIoc,MAAM,GAAG,EAAE;IAEf,IAAI1nB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACe,YAAY,EAAE;MAClC0U,MAAM,GAAG,KAAK;IACf,OAAM,IAAI1nB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACgB,YAAY,EAAE;MACzCyU,MAAM,GAAG,OAAO;IACjB,OAAM,IAAI1nB,IAAI,CAACqR,KAAK,GAAGY,IAAI,CAACiB,SAAS,EAAE;MACtC,OAAOgI,YAAY;IACpB,OAAM;MACL,IAAIlb,IAAI,CAACmR,KAAK,KAAKZ,IAAI,EAAE;QACvB,MAAMoX,aAAa,GAAGjL,gBAAgB,CAAC1c,IAAI,EAAEsL,KAAK,CAAC;QACnDoc,MAAM,IAAI1nB,IAAI,CAACmR,KAAK,CAAChM,WAAW,EAAE,GAAGwiB,aAAa;MACnD;MAED,IAAI3nB,IAAI,CAACqR,KAAK,IAAIY,IAAI,CAACW,OAAO,GAAGX,IAAI,CAACa,UAAU,CAAC,EAAE;QACjD,IAAI9S,IAAI,CAACmR,KAAK,KAAKZ,IAAI,EAAE;UACvBmX,MAAM,IAAIjW,SAAS,CAACzR,IAAI,CAACiQ,IAAI,CAAC,CAAC,CAAC,CAAC;QAClC;QACDyX,MAAM,IAAI,GAAG;MACd;MAEDA,MAAM,IAAIjW,SAAS,CAACzR,IAAI,CAACoR,EAAE,CAAC;MAE5B,IAAIpR,IAAI,CAACuR,SAAS,EAAE;QAClBmW,MAAM,IAAI,GAAG,GAAG1nB,IAAI,CAACuR,SAAS,CAACpM,WAAW,EAAE;MAC7C;IACF;IAED,IAAI,CAACqa,SAAS,CAACxf,IAAI,CAAC;IACpB,IAAI,IAAI,CAAC6iB,OAAO,EAAE,EAAE;MAClB,IAAI,IAAI,CAACE,WAAW,EAAE,EAAE;QACtB2E,MAAM,IAAI,GAAG;MACd,OAAM;QACLA,MAAM,IAAI,GAAG;MACd;IACF;IACD,IAAI,CAAC/H,SAAS,EAAE;IAEhB,OAAO+H,MAAM;;;EAIP/C,YAAYA,CAAC3kB,IAAY,EAAgB;IAAA,IAAdykB,MAAM,GAAApkB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAAG,KAAK;;IAE/C,IAAIunB,SAAS,GAAGrK,WAAW,CAACvd,IAAI,CAAC;IAEjC,IAAI,CAACykB,MAAM,EAAE;MACX,IAAImD,SAAS,KAAK,KAAK,EAAE;QACvBA,SAAS,GAAG,KAAK;MAClB,OAAM,IAAIA,SAAS,KAAK,OAAO,EAAE;QAChCA,SAAS,GAAG,OAAO;MACpB;IACF;;IAGD,IAAIA,SAAS,IAAI1M,YAAY,EAAE;MAC7B,MAAMhO,GAAG,GAAiB;QACxBgE,KAAK,EAAE,IAAI,CAAC8M,KAAK;QACjB/N,IAAI,EAAE,CAAC;QACPmB,EAAE,EAAE,CAAC;QACLD,KAAK,EAAE,GAAG;QACVE,KAAK,EAAEY,IAAI,CAACiB;OACb;MACD,OAAOhG,GAAG;IACX;IAED,IAAIkQ,SAAS,GAAGD,cAAc,CAACyK,SAAS,CAAC;IACzC,IAAItc,KAAK,GAAG,IAAI,CAAC0X,MAAM,CAAC;MAAErR,KAAK,EAAE,IAAI;MAAER,KAAK,EAAEiM;IAAS,CAAE,CAAC;;IAG1D,KAAK,IAAI3X,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;MAChD,IAAImiB,SAAS,KAAKrK,WAAW,CAAC,IAAI,CAACsG,UAAU,CAACvY,KAAK,CAAC7F,CAAC,CAAC,EAAE6F,KAAK,CAAC,CAAC,EAAE;QAC/D,OAAOA,KAAK,CAAC7F,CAAC,CAAC;MAChB;IACF;;IAGD,IAAIgf,MAAM,EAAE;MACV,OAAO,IAAI;IACZ;IAED,IAAItT,KAAK,GAAG9P,SAAS;IACrB,IAAIgc,OAAO,GAAGhc,SAAS;IACvB,IAAI4O,IAAI,GAAG5O,SAAS;IACpB,IAAI+P,EAAE,GAAG/P,SAAS;IAClB,IAAIkQ,SAAS,GAAGlQ,SAAS;IAEzB;;;;;;;;;;;;;;;AAeG;IAEH,IAAIwmB,mBAAmB,GAAG,KAAK;IAE/BxK,OAAO,GAAGuK,SAAS,CAACrL,KAAK,CACvB,4DAA4D,CAE7D;IAED,IAAIc,OAAO,EAAE;MACXlM,KAAK,GAAGkM,OAAO,CAAC,CAAC,CAAC;MAClBpN,IAAI,GAAGoN,OAAO,CAAC,CAAC,CAAW;MAC3BjM,EAAE,GAAGiM,OAAO,CAAC,CAAC,CAAW;MACzB9L,SAAS,GAAG8L,OAAO,CAAC,CAAC,CAAC;MAEtB,IAAIpN,IAAI,CAAC3P,MAAM,IAAI,CAAC,EAAE;QACpBunB,mBAAmB,GAAG,IAAI;MAC3B;IACF,OAAM;MACL;;;;;AAKG;MAEHxK,OAAO,GAAGuK,SAAS,CAACrL,KAAK,CACvB,8DAA8D,CAC/D;MAED,IAAIc,OAAO,EAAE;QACXlM,KAAK,GAAGkM,OAAO,CAAC,CAAC,CAAC;QAClBpN,IAAI,GAAGoN,OAAO,CAAC,CAAC,CAAW;QAC3BjM,EAAE,GAAGiM,OAAO,CAAC,CAAC,CAAW;QACzB9L,SAAS,GAAG8L,OAAO,CAAC,CAAC,CAAC;QAEtB,IAAIpN,IAAI,CAAC3P,MAAM,IAAI,CAAC,EAAE;UACpBunB,mBAAmB,GAAG,IAAI;QAC3B;MACF;IACF;IAEDzK,SAAS,GAAGD,cAAc,CAACyK,SAAS,CAAC;IACrCtc,KAAK,GAAG,IAAI,CAAC0X,MAAM,CAAC;MAClBrR,KAAK,EAAE,IAAI;MACXR,KAAK,EAAEA,KAAK,GAAIA,KAAqB,GAAGiM;IACzC,EAAC;IAEF,IAAI,CAAChM,EAAE,EAAE;MACP,OAAO,IAAI;IACZ;IAED,KAAK,IAAI3L,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;MAChD,IAAI,CAACwK,IAAI,EAAE;;QAET,IACE2X,SAAS,KACTrK,WAAW,CAAC,IAAI,CAACsG,UAAU,CAACvY,KAAK,CAAC7F,CAAC,CAAC,EAAE6F,KAAK,CAAC,CAAC,CAAClG,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAC9D;UACA,OAAOkG,KAAK,CAAC7F,CAAC,CAAC;QAChB;;MAEF,OAAM,IACL,CAAC,CAAC0L,KAAK,IAAIA,KAAK,CAACmM,WAAW,EAAE,IAAIhS,KAAK,CAAC7F,CAAC,CAAC,CAAC0L,KAAK,KAChD0E,IAAI,CAAC5F,IAAI,CAAC,IAAI3E,KAAK,CAAC7F,CAAC,CAAC,CAACwK,IAAI,IAC3B4F,IAAI,CAACzE,EAAE,CAAC,IAAI9F,KAAK,CAAC7F,CAAC,CAAC,CAAC2L,EAAE,KACtB,CAACG,SAAS,IAAIA,SAAS,CAAC+L,WAAW,EAAE,IAAIhS,KAAK,CAAC7F,CAAC,CAAC,CAAC8L,SAAS,CAAC,EAC7D;QACA,OAAOjG,KAAK,CAAC7F,CAAC,CAAC;MAChB,OAAM,IAAIoiB,mBAAmB,EAAE;QAC9B;;;AAGG;QAEH,MAAM7M,MAAM,GAAGvJ,SAAS,CAACnG,KAAK,CAAC7F,CAAC,CAAC,CAACwK,IAAI,CAAC;QACvC,IACE,CAAC,CAACkB,KAAK,IAAIA,KAAK,CAACmM,WAAW,EAAE,IAAIhS,KAAK,CAAC7F,CAAC,CAAC,CAAC0L,KAAK,KAChD0E,IAAI,CAACzE,EAAE,CAAC,IAAI9F,KAAK,CAAC7F,CAAC,CAAC,CAAC2L,EAAE,KACtBnB,IAAI,IAAI+K,MAAM,CAAC,CAAC,CAAC,IAAI/K,IAAI,IAAI+K,MAAM,CAAC,CAAC,CAAC,CAAC,KACvC,CAACzJ,SAAS,IAAIA,SAAS,CAAC+L,WAAW,EAAE,IAAIhS,KAAK,CAAC7F,CAAC,CAAC,CAAC8L,SAAS,CAAC,EAC7D;UACA,OAAOjG,KAAK,CAAC7F,CAAC,CAAC;QAChB;MACF;IACF;IAED,OAAO,IAAI;;EAGbqiB,KAAKA,CAAA;IACH,IAAI5kB,CAAC,GAAG,iCAAiC;IACzC,KAAK,IAAIuC,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;;MAEvC,IAAI2V,IAAI,CAAC3V,CAAC,CAAC,KAAK,CAAC,EAAE;QACjBvC,CAAC,IAAI,GAAG,GAAG,UAAU,CAACiY,IAAI,CAAC1V,CAAC,CAAC,CAAC,GAAG,IAAI;MACtC;MAED,IAAI,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,EAAE;QAClB,MAAM0L,KAAK,GAAG,IAAI,CAAC2M,MAAM,CAACrY,CAAC,CAAC,CAACH,IAAI;QACjC,MAAM4L,KAAK,GAAG,IAAI,CAAC4M,MAAM,CAACrY,CAAC,CAAC,CAACyL,KAAK;QAClC,MAAM6W,MAAM,GACV7W,KAAK,KAAKb,KAAK,GAAGc,KAAK,CAAChM,WAAW,EAAE,GAAGgM,KAAK,CAACmM,WAAW,EAAE;QAC7Dpa,CAAC,IAAI,GAAG,GAAG6kB,MAAM,GAAG,GAAG;MACxB,OAAM;QACL7kB,CAAC,IAAI,KAAK;MACX;MAED,IAAKuC,CAAC,GAAG,CAAC,GAAI,IAAI,EAAE;QAClBvC,CAAC,IAAI,KAAK;QACVuC,CAAC,IAAI,CAAC;MACP;IACF;IACDvC,CAAC,IAAI,iCAAiC;IACtCA,CAAC,IAAI,6BAA6B;IAElC,OAAOA,CAAC;;EAGV8kB,KAAKA,CAACC,KAAa;IACjB,MAAM3c,KAAK,GAAG,IAAI,CAAC0X,MAAM,CAAC;MAAErR,KAAK,EAAE;IAAK,CAAE,CAAC;IAC3C,IAAIpR,KAAK,GAAG,CAAC;IACb,MAAM2Q,KAAK,GAAG,IAAI,CAAC8M,KAAK;IAExB,KAAK,IAAIvY,CAAC,GAAG,CAAC,EAAEqX,GAAG,GAAGxR,KAAK,CAAChL,MAAM,EAAEmF,CAAC,GAAGqX,GAAG,EAAErX,CAAC,EAAE,EAAE;MAChD,IAAI,CAAC+Z,SAAS,CAAClU,KAAK,CAAC7F,CAAC,CAAC,CAAC;MACxB,IAAI,CAAC,IAAI,CAACia,eAAe,CAACxO,KAAK,CAAC,EAAE;QAChC,IAAI+W,KAAK,GAAG,CAAC,GAAG,CAAC,EAAE;UACjB1nB,KAAK,IAAI,IAAI,CAACynB,KAAK,CAACC,KAAK,GAAG,CAAC,CAAC;QAC/B,OAAM;UACL1nB,KAAK,EAAE;QACR;MACF;MACD,IAAI,CAACof,SAAS,EAAE;IACjB;IAED,OAAOpf,KAAK;;EAGd2nB,OAAOA,CAAChX,KAAY;IAClB,IAAI,IAAI,CAAC8M,KAAK,IAAI9M,KAAK,EAAE;MACvB,OAAO,KAAK;IACb;IAED,IAAI,CAAClR,IAAI,CAAC,IAAI,CAAC;IACf,OAAO,IAAI;;EAGbglB,IAAIA,CAAA;IACF,OAAO,IAAI,CAAChH,KAAK;;EAGnBmK,KAAKA,CAAA;IACH,MAAMT,MAAM,GAAG,EAAE;IACjB,IAAIU,GAAG,GAAG,EAAE;IAEZ,KAAK,IAAI3iB,CAAC,GAAGoQ,IAAI,CAACC,EAAE,EAAErQ,CAAC,IAAIoQ,IAAI,CAACgE,EAAE,EAAEpU,CAAC,EAAE,EAAE;MACvC,IAAI,IAAI,CAACqY,MAAM,CAACrY,CAAC,CAAC,IAAI,IAAI,EAAE;QAC1B2iB,GAAG,CAAChb,IAAI,CAAC,IAAI,CAAC;MACf,OAAM;QACLgb,GAAG,CAAChb,IAAI,CAAC;UACP4N,MAAM,EAAEvJ,SAAS,CAAChM,CAAC,CAAC;UACpBH,IAAI,EAAE,IAAI,CAACwY,MAAM,CAACrY,CAAC,CAAC,CAACH,IAAI;UACzB4L,KAAK,EAAE,IAAI,CAAC4M,MAAM,CAACrY,CAAC,CAAC,CAACyL;QACvB,EAAC;MACH;MACD,IAAKzL,CAAC,GAAG,CAAC,GAAI,IAAI,EAAE;QAClBiiB,MAAM,CAACta,IAAI,CAACgb,GAAG,CAAC;QAChBA,GAAG,GAAG,EAAE;QACR3iB,CAAC,IAAI,CAAC;MACP;IACF;IAED,OAAOiiB,MAAM;;EAGfpE,WAAWA,CAACtI,MAAc;IACxB,IAAIA,MAAM,IAAInF,IAAI,EAAE;MAClB,MAAM+K,EAAE,GAAG/K,IAAI,CAACmF,MAAM,CAAC;MACvB,OAAO,CAACG,IAAI,CAACyF,EAAE,CAAC,GAAGxF,IAAI,CAACwF,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,MAAM;IAC1D;IAED,OAAO,IAAI;;EAObyH,OAAOA,CAAA,EAAgD;IAAA,IAA/C;MAAE7F,OAAO,GAAG;IAAK,IAAAniB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAgB,SAAA,GAAAhB,SAAA,MAA4B,EAAE;IACrD,MAAM4lB,eAAe,GAAG,EAAE;IAC1B,MAAMqC,WAAW,GAAG,EAAE;IAEtB,OAAO,IAAI,CAACjK,QAAQ,CAAC/d,MAAM,GAAG,CAAC,EAAE;MAC/B2lB,eAAe,CAAC7Y,IAAI,CAAC,IAAI,CAACuS,SAAS,EAAE,CAAC;IACvC;IAED,OAAO,IAAI,EAAE;MACX,MAAM3f,IAAI,GAAGimB,eAAe,CAACR,GAAG,EAAE;MAClC,IAAI,CAACzlB,IAAI,EAAE;QACT;MACD;MAED,IAAIwiB,OAAO,EAAE;QACX8F,WAAW,CAAClb,IAAI,CAAC,IAAI0D,IAAI,CAAC,IAAI,EAAE9Q,IAAI,CAAC,CAAC;MACvC,OAAM;QACLsoB,WAAW,CAAClb,IAAI,CAAC,IAAI,CAACyW,UAAU,CAAC7jB,IAAI,EAAE,IAAI,CAACgjB,MAAM,EAAE,CAAC,CAAC;MACvD;MACD,IAAI,CAACxD,SAAS,CAACxf,IAAI,CAAC;IACrB;IAED,OAAOsoB,WAAW;;EAGpB;;;AAGG;EACK7E,iBAAiBA,CAACvD,IAAY;IAAA,IAAAqI,qBAAA;IACpC,QAAAA,qBAAA,GAAO,IAAI,CAAC7J,cAAc,CAAC0B,GAAG,CAACF,IAAI,CAAC,cAAAqI,qBAAA,cAAAA,qBAAA,GAAI,CAAC;;EAGnCxJ,iBAAiBA,CAAA;IAAA,IAAAyJ,sBAAA;IACvB,IAAI,CAAC9J,cAAc,CAAC+J,GAAG,CACrB,IAAI,CAACjK,KAAK,EACV,EAAAgK,sBAAA,GAAC,IAAI,CAAC9J,cAAc,CAAC0B,GAAG,CAAC,IAAI,CAAC5B,KAAK,CAAC,cAAAgK,sBAAA,cAAAA,sBAAA,GAAI,CAAC,IAAI,CAAC,CAC/C;;EAGKjD,iBAAiBA,CAACrF,IAAY;IAAA,IAAAwI,sBAAA;IACpC,MAAMC,YAAY,IAAAD,sBAAA,GAAG,IAAI,CAAChK,cAAc,CAAC0B,GAAG,CAACF,IAAI,CAAC,cAAAwI,sBAAA,cAAAA,sBAAA,GAAI,CAAC;IAEvD,IAAIC,YAAY,KAAK,CAAC,EAAE;MACtB,IAAI,CAACjK,cAAc,CAACkK,MAAM,CAAC1I,IAAI,CAAC;IACjC,OAAM;MACL,IAAI,CAACxB,cAAc,CAAC+J,GAAG,CAACvI,IAAI,EAAEyI,YAAY,GAAG,CAAC,CAAC;IAChD;;EAGKE,cAAcA,CAAA;IACpB,MAAM5C,eAAe,GAAG,EAAE;IAC1B,MAAM6C,eAAe,GAA2B,EAAE;IAElD,MAAMC,WAAW,GAAIjX,GAAW,IAAI;MAClC,IAAIA,GAAG,IAAI,IAAI,CAACwM,SAAS,EAAE;QACzBwK,eAAe,CAAChX,GAAG,CAAC,GAAG,IAAI,CAACwM,SAAS,CAACxM,GAAG,CAAC;MAC3C;IACH,CAAC;IAED,OAAO,IAAI,CAACuM,QAAQ,CAAC/d,MAAM,GAAG,CAAC,EAAE;MAC/B2lB,eAAe,CAAC7Y,IAAI,CAAC,IAAI,CAACuS,SAAS,EAAE,CAAC;IACvC;IAEDoJ,WAAW,CAAC,IAAI,CAACjX,GAAG,EAAE,CAAC;IAEvB,OAAO,IAAI,EAAE;MACX,MAAM9R,IAAI,GAAGimB,eAAe,CAACR,GAAG,EAAE;MAClC,IAAI,CAACzlB,IAAI,EAAE;QACT;MACD;MACD,IAAI,CAACwf,SAAS,CAACxf,IAAI,CAAC;MACpB+oB,WAAW,CAAC,IAAI,CAACjX,GAAG,EAAE,CAAC;IACxB;IACD,IAAI,CAACwM,SAAS,GAAGwK,eAAe;;EAGlCE,UAAUA,CAAA;IACR,OAAO,IAAI,CAAC1K,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC;;EAGnCmX,UAAUA,CAACppB,OAAe;IACxB,IAAI,CAACye,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC,GAAGjS,OAAO,CAACuF,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;;EAG1E;;AAEG;EACH8jB,aAAaA,CAAA;IACX,OAAO,IAAI,CAACC,aAAa,EAAE;;EAG7BA,aAAaA,CAAA;IACX,MAAMtpB,OAAO,GAAG,IAAI,CAACye,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC;IAC1C,OAAO,IAAI,CAACwM,SAAS,CAAC,IAAI,CAACxM,GAAG,EAAE,CAAC;IACjC,OAAOjS,OAAO;;EAGhBupB,WAAWA,CAAA;IACT,IAAI,CAACP,cAAc,EAAE;IACrB,OAAO3mB,MAAM,CAACulB,IAAI,CAAC,IAAI,CAACnJ,SAAS,CAAC,CAAC/Z,GAAG,CAAEuN,GAAW,IAAI;MACrD,OAAO;QAAEA,GAAG,EAAEA,GAAG;QAAEjS,OAAO,EAAE,IAAI,CAACye,SAAS,CAACxM,GAAG;MAAC,CAAE;IACnD,CAAC,CAAC;;EAGJ;;AAEG;EACHuX,cAAcA,CAAA;IACZ,OAAO,IAAI,CAACC,cAAc,EAAE;;EAG9BA,cAAcA,CAAA;IACZ,IAAI,CAACT,cAAc,EAAE;IACrB,OAAO3mB,MAAM,CAACulB,IAAI,CAAC,IAAI,CAACnJ,SAAS,CAAC,CAAC/Z,GAAG,CAAEuN,GAAG,IAAI;MAC7C,MAAMjS,OAAO,GAAG,IAAI,CAACye,SAAS,CAACxM,GAAG,CAAC;MACnC,OAAO,IAAI,CAACwM,SAAS,CAACxM,GAAG,CAAC;MAC1B,OAAO;QAAEA,GAAG,EAAEA,GAAG;QAAEjS,OAAO,EAAEA;MAAO,CAAE;IACvC,CAAC,CAAC;;EAGJ0pB,iBAAiBA,CACfrY,KAAY,EACZsY,MAA4D;IAE5D,KAAK,MAAMC,IAAI,IAAI,CAAC7Y,IAAI,EAAED,KAAK,CAAU,EAAE;MACzC,IAAI6Y,MAAM,CAACC,IAAI,CAAC,KAAKpoB,SAAS,EAAE;QAC9B,IAAImoB,MAAM,CAACC,IAAI,CAAC,EAAE;UAChB,IAAI,CAACxL,SAAS,CAAC/M,KAAK,CAAC,IAAI4J,KAAK,CAAC2O,IAAI,CAAC;QACrC,OAAM;UACL,IAAI,CAACxL,SAAS,CAAC/M,KAAK,CAAC,IAAI,CAAC4J,KAAK,CAAC2O,IAAI,CAAC;QACtC;MACF;IACF;IAED,IAAI,CAAChJ,qBAAqB,EAAE;IAC5B,MAAMrf,MAAM,GAAG,IAAI,CAACsoB,iBAAiB,CAACxY,KAAK,CAAC;IAE5C,OACE,CAACsY,MAAM,CAAC5Y,IAAI,CAAC,KAAKvP,SAAS,IAAImoB,MAAM,CAAC5Y,IAAI,CAAC,KAAKxP,MAAM,CAACwP,IAAI,CAAC,MAC3D4Y,MAAM,CAAC7Y,KAAK,CAAC,KAAKtP,SAAS,IAAImoB,MAAM,CAAC7Y,KAAK,CAAC,KAAKvP,MAAM,CAACuP,KAAK,CAAC,CAAC;;EAIpE+Y,iBAAiBA,CAACxY,KAAY;IAC5B,OAAO;MACL,CAACN,IAAI,GAAG,CAAC,IAAI,CAACqN,SAAS,CAAC/M,KAAK,CAAC,GAAG4J,KAAK,CAAClK,IAAI,CAAC,MAAM,CAAC;MACnD,CAACD,KAAK,GAAG,CAAC,IAAI,CAACsN,SAAS,CAAC/M,KAAK,CAAC,GAAG4J,KAAK,CAACnK,KAAK,CAAC,MAAM;KACrD;;EAGHkL,UAAUA,CAAA;IACR,OAAO,IAAI,CAACuC,WAAW;;AAE1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}