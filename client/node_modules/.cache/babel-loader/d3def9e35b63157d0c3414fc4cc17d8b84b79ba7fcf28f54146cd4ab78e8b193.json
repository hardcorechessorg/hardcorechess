{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Chessboard}from'react-chessboard';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SinglePlayerGame=()=>{const navigate=useNavigate();const[fen,setFen]=useState(\"\");const[isGameOver,setIsGameOver]=useState(false);const[result,setResult]=useState(null);useEffect(()=>{startNewGame();},[]);async function startNewGame(){try{// Сервер на Render, клиент на hardcorechess.org\nconst res=await fetch(\"https://hardcorechess.onrender.com/new-game\",{method:\"POST\"});const data=await res.json();setFen(data.fen);setIsGameOver(false);setResult(null);}catch(error){console.error('Ошибка при создании новой игры:',error);}}async function handleMove(sourceSquare,targetSquare){if(isGameOver)return false;try{const res=await fetch(\"https://hardcorechess.onrender.com/move\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({from:sourceSquare,to:targetSquare})});const data=await res.json();if(data.error)return false;setFen(data.fen);setIsGameOver(data.isGameOver);setResult(data.result);return true;}catch(error){console.error('Ошибка при выполнении хода:',error);return false;}}return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"button\",style:{marginBottom:12},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041E\\u0434\\u0438\\u043D\\u043E\\u0447\\u043D\\u0430\\u044F \\u0438\\u0433\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startNewGame,className:\"button\",style:{marginBottom:16},children:\"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0438\\u0433\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"board-wrap\",children:/*#__PURE__*/_jsx(Chessboard,{position:fen,onPieceDrop:handleMove,boardWidth:600})}),isGameOver&&/*#__PURE__*/_jsx(\"div\",{className:\"panel\",style:{marginTop:16,color:'#ff8a80',fontWeight:'bold'},children:result})]});};export default SinglePlayerGame;","map":{"version":3,"names":["React","useState","useEffect","Chessboard","useNavigate","jsx","_jsx","jsxs","_jsxs","SinglePlayerGame","navigate","fen","setFen","isGameOver","setIsGameOver","result","setResult","startNewGame","res","fetch","method","data","json","error","console","handleMove","sourceSquare","targetSquare","headers","body","JSON","stringify","from","to","className","children","onClick","style","marginBottom","position","onPieceDrop","boardWidth","marginTop","color","fontWeight"],"sources":["/home/kirtan-rasa/hardcorechess/client/src/components/SinglePlayerGame.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Chessboard } from 'react-chessboard';\nimport { useNavigate } from 'react-router-dom';\n\nconst SinglePlayerGame = () => {\n  const navigate = useNavigate();\n  const [fen, setFen] = useState(\"\");\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [result, setResult] = useState(null);\n\n  useEffect(() => {\n    startNewGame();\n  }, []);\n\n  async function startNewGame() {\n    try {\n      // Сервер на Render, клиент на hardcorechess.org\n      const res = await fetch(\"https://hardcorechess.onrender.com/new-game\", { method: \"POST\" });\n      const data = await res.json();\n      setFen(data.fen);\n      setIsGameOver(false);\n      setResult(null);\n    } catch (error) {\n      console.error('Ошибка при создании новой игры:', error);\n    }\n  }\n\n  async function handleMove(sourceSquare, targetSquare) {\n    if (isGameOver) return false;\n\n    try {\n      const res = await fetch(\"https://hardcorechess.onrender.com/move\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ from: sourceSquare, to: targetSquare })\n      });\n\n      const data = await res.json();\n\n      if (data.error) return false;\n\n      setFen(data.fen);\n      setIsGameOver(data.isGameOver);\n      setResult(data.result);\n\n      return true;\n    } catch (error) {\n      console.error('Ошибка при выполнении хода:', error);\n      return false;\n    }\n  }\n\n  return (\n    <div className=\"section\">\n      <button \n        onClick={() => navigate('/')}\n        className=\"button\"\n        style={{ marginBottom: 12 }}\n      >\n        Назад\n      </button>\n      \n      <h2>Одиночная игра</h2>\n      \n      <button \n        onClick={startNewGame}\n        className=\"button\"\n        style={{ marginBottom: 16 }}\n      >\n        Новая игра\n      </button>\n\n      <div className=\"board-wrap\">\n        <Chessboard\n          position={fen}\n          onPieceDrop={handleMove}\n          boardWidth={600}\n        />\n      </div>\n\n      {isGameOver && (\n        <div className=\"panel\" style={{ marginTop: 16, color: '#ff8a80', fontWeight: 'bold' }}>\n          {result}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SinglePlayerGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}