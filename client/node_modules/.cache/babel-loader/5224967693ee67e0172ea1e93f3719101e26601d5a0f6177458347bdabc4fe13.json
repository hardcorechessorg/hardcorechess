{"ast":null,"code":"import React,{useState,useEffect,useMemo,useRef}from'react';import{Chessboard}from'react-chessboard';import{Chess}from'chess.js';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const formatMs=ms=>{const s=Math.max(0,Math.floor(ms/1000));const m=Math.floor(s/60);const sec=s%60;return\"\".concat(m,\":\").concat(sec.toString().padStart(2,'0'));};const pairMoves=sans=>{const rows=[];for(let i=0;i<sans.length;i+=2){rows.push({no:Math.floor(i/2)+1,w:sans[i]||'',b:sans[i+1]||''});}return rows;};const ComputerGame=()=>{const navigate=useNavigate();const[game,setGame]=useState(new Chess());const[difficulty,setDifficulty]=useState(5);const[isGameOver,setIsGameOver]=useState(false);const[result,setResult]=useState(null);const[isThinking,setIsThinking]=useState(false);const[playerColor,setPlayerColor]=useState('w');// w - белые, b - черные\nconst[isStockfishReady,setIsStockfishReady]=useState(false);const[isLoadingStockfish,setIsLoadingStockfish]=useState(true);const stockfishRef=useRef(null);// Контроль времени\nconst[minutes,setMinutes]=useState(5);const[increment,setIncrement]=useState(0);const[clock,setClock]=useState({wMs:minutes*60000,bMs:minutes*60000});const[lastTurnStartAt,setLastTurnStartAt]=useState(null);const[tick,setTick]=useState(0);// История ходов (SAN)\nconst[movesSan,setMovesSan]=useState([]);// Инициализация Stockfish (максимально простой подход как на Lichess)\nuseEffect(()=>{const initStockfish=()=>{setIsLoadingStockfish(true);// Проверяем, не загружен ли уже Stockfish\nif(window.Stockfish){console.log('Stockfish уже загружен');startStockfish();return;}// Создаем скрипт для загрузки\nconst script=document.createElement('script');script.src='/stockfish-nnue-16-single.js';script.onload=()=>{console.log('Stockfish скрипт загружен');// Ждем немного и запускаем\nsetTimeout(startStockfish,500);};script.onerror=()=>{console.log('Не удалось загрузить Stockfish');setIsLoadingStockfish(false);};document.head.appendChild(script);};const startStockfish=()=>{try{if(!window.Stockfish){console.log('Stockfish не найден в window');setIsLoadingStockfish(false);return;}const stockfish=new window.Stockfish();stockfishRef.current=stockfish;let uciReceived=false;stockfish.onmessage=event=>{const message=event.data||event;console.log('Stockfish:',message);if(message.includes('uciok')){uciReceived=true;console.log('Stockfish готов!');setIsStockfishReady(true);setIsLoadingStockfish(false);}};stockfish.postMessage('uci');// Таймаут на случай если uciok не придет\nsetTimeout(()=>{if(!uciReceived){console.log('Stockfish не ответил на uci');setIsLoadingStockfish(false);}},5000);}catch(error){console.error('Ошибка создания Stockfish:',error);setIsLoadingStockfish(false);}};initStockfish();return()=>{if(stockfishRef.current){stockfishRef.current.terminate();}};},[]);useEffect(()=>{if(isStockfishReady){startNewGame();}},[isStockfishReady]);useEffect(()=>{if(!isGameOver&&playerColor==='b'&&game.turn()==='w'){makeComputerMove();}},[playerColor]);useEffect(()=>{const id=setInterval(()=>setTick(t=>t+1),200);return()=>clearInterval(id);},[]);const displayedClock=useMemo(()=>{if(isGameOver||lastTurnStartAt==null)return clock;const now=Date.now();const elapsed=Math.max(0,now-lastTurnStartAt);if(game.turn()==='w'){return{wMs:Math.max(0,clock.wMs-elapsed),bMs:clock.bMs};}else{return{wMs:clock.wMs,bMs:Math.max(0,clock.bMs-elapsed)};}},[clock,lastTurnStartAt,isGameOver,game,tick]);const resetClocks=(mins,inc)=>{const ms=mins*60000;setClock({wMs:ms,bMs:ms});setLastTurnStartAt(Date.now());};const startNewGame=()=>{const newGame=new Chess();setGame(newGame);setIsGameOver(false);setResult(null);setIsThinking(false);setMovesSan([]);resetClocks(minutes,increment);if(playerColor==='b'){setTimeout(()=>makeComputerMove(),50);}};const finishOnTime=loser=>{setIsGameOver(true);setResult(loser==='w'?'Поражение по времени (белые)':'Поражение по времени (чёрные)');};const settleTimeAfterMove=movedColor=>{const now=Date.now();if(lastTurnStartAt!=null){const elapsed=now-lastTurnStartAt;if(movedColor==='w'){const newW=Math.max(0,clock.wMs-elapsed)+increment*1000;if(newW<=0){finishOnTime('w');return false;}setClock({wMs:newW,bMs:clock.bMs});}else{const newB=Math.max(0,clock.bMs-elapsed)+increment*1000;if(newB<=0){finishOnTime('b');return false;}setClock({wMs:clock.wMs,bMs:newB});}}setLastTurnStartAt(now);return true;};const makeSimpleComputerMove=()=>{if(isGameOver||game.isGameOver())return;setIsThinking(true);setTimeout(()=>{try{const moves=game.moves();if(moves.length>0){// Простой алгоритм: случайный ход с небольшим приоритетом для взятий\nconst captures=moves.filter(move=>{const testGame=new Chess(game.fen());const moveObj=testGame.move(move);return moveObj&&moveObj.captured;});const moveToPlay=captures.length>0&&Math.random()<0.7?captures[Math.floor(Math.random()*captures.length)]:moves[Math.floor(Math.random()*moves.length)];const move=game.move(moveToPlay);if(move){setMovesSan(prev=>[...prev,move.san]);setGame(new Chess(game.fen()));const compColor=move.color;if(!settleTimeAfterMove(compColor)){setIsThinking(false);return;}if(game.isGameOver()){setIsGameOver(true);if(game.isCheckmate()){setResult(playerColor==='w'?'Победа чёрных!':'Победа белых!');}else if(game.isDraw()){setResult('Ничья!');}}}}}catch(error){console.error('Ошибка простого хода:',error);}finally{setIsThinking(false);}},500+Math.random()*1000);// Имитация размышления\n};const makeComputerMove=async()=>{try{if(isGameOver||game.isGameOver())return;// Если Stockfish не готов, используем простой алгоритм\nif(!isStockfishReady||!stockfishRef.current){makeSimpleComputerMove();return;}if(game.turn()!==playerColor){const now=Date.now();if(lastTurnStartAt!=null){const elapsed=now-lastTurnStartAt;const compColor=playerColor==='w'?'b':'w';const compMs=compColor==='w'?clock.wMs:clock.bMs;if(compMs-elapsed<=0){finishOnTime(compColor);return;}}}setIsThinking(true);const stockfish=stockfishRef.current;// Простая реализация как на Lichess\nreturn new Promise(resolve=>{let completed=false;const timeout=setTimeout(()=>{if(!completed){console.log('Stockfish таймаут, используем простой алгоритм');makeSimpleComputerMove();resolve();}},2000);// Быстрый таймаут как на Lichess\nstockfish.onmessage=event=>{const message=event.data||event;if(message.includes('bestmove')){if(completed)return;completed=true;clearTimeout(timeout);const move=message.split(' ')[1];if(move&&move!=='null'){try{const gameMove=game.move(move);if(gameMove){setMovesSan(prev=>[...prev,gameMove.san]);setGame(new Chess(game.fen()));if(!settleTimeAfterMove(gameMove.color)){setIsThinking(false);resolve();return;}if(game.isGameOver()){setIsGameOver(true);if(game.isCheckmate()){setResult(playerColor==='w'?'Победа чёрных!':'Победа белых!');}else if(game.isDraw()){setResult('Ничья!');}}}}catch(error){console.error('Ошибка хода:',error);}}setIsThinking(false);resolve();}};// Простые настройки как на Lichess\nstockfish.postMessage('position fen '+game.fen());stockfish.postMessage('go depth '+(difficulty>=5?6:4));});}catch(error){console.error('Ошибка в makeComputerMove:',error);setIsThinking(false);}};const handleMove=async(sourceSquare,targetSquare)=>{try{if(isGameOver||isThinking)return false;if(game.turn()!==playerColor)return false;const move=game.move({from:sourceSquare,to:targetSquare});if(!move)return false;setMovesSan(prev=>[...prev,move.san]);setGame(new Chess(game.fen()));if(!settleTimeAfterMove(move.color))return true;if(game.isGameOver()){setIsGameOver(true);if(game.isCheckmate()){setResult(playerColor==='w'?'Победа белых!':'Победа чёрных!');}else if(game.isDraw()){setResult('Ничья!');}return true;}setTimeout(()=>{makeComputerMove();},200);return true;}catch(error){// Просто возвращаем false, фигура вернется на место\nconsole.log('Неправильный ход:',error.message);return false;}};const changeDifficulty=newDifficulty=>{setDifficulty(newDifficulty);startNewGame();};const changePlayerColor=color=>{setPlayerColor(color);startNewGame();};const rows=useMemo(()=>pairMoves(movesSan),[movesSan]);return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"button\",style:{marginBottom:12},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0433\\u0440\\u0430 \\u043F\\u0440\\u043E\\u0442\\u0438\\u0432 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u0430\"}),isLoadingStockfish&&/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",style:{marginBottom:16,color:'#8ab4f8'},children:[\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043B\\u0435\\u0433\\u043A\\u043E\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 Stockfish...\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440: hardcorechess.onrender.com | \\u041A\\u043B\\u0438\\u0435\\u043D\\u0442: hardcorechess.org\"})]}),isStockfishReady&&/*#__PURE__*/_jsx(\"div\",{className:\"panel\",style:{marginBottom:16,color:'#4caf50'},children:\"\\u2705 Stockfish \\u0433\\u043E\\u0442\\u043E\\u0432! \\u041A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044C \\u043D\\u0430 \\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u043C \\u0443\\u0440\\u043E\\u0432\\u043D\\u0435.\"}),!isStockfishReady&&!isLoadingStockfish&&/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",style:{marginBottom:16,color:'#ffa726'},children:[\"\\u26A0\\uFE0F Stockfish \\u043D\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D. \\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u0435\\u0442\\u0441\\u044F \\u0443\\u043F\\u0440\\u043E\\u0449\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0418\\u0418.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u0418\\u0433\\u0440\\u0430 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u0442\\u044C, \\u043D\\u043E \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0438\\u0433\\u0440\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0449\\u0435.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u041E\\u0442\\u043A\\u0440\\u043E\\u0439\\u0442\\u0435 \\u043A\\u043E\\u043D\\u0441\\u043E\\u043B\\u044C \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440\\u0430 (F12) \\u0434\\u043B\\u044F \\u0434\\u0438\\u0430\\u0433\\u043D\\u043E\\u0441\\u0442\\u0438\\u043A\\u0438.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u041D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0430\\u043A\\u0448\\u043D \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\\u0435 Stockfish \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u0442\\u044C \\u043B\\u0443\\u0447\\u0448\\u0435.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-board\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',gap:16,marginBottom:16,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:6,fontWeight:'bold'},children:[\"\\u0421\\u043B\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C: \",difficulty,\"/10\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"10\",value:difficulty,onChange:e=>changeDifficulty(parseInt(e.target.value)),style:{width:180}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:6,fontWeight:'bold'},children:\"\\u0426\\u0432\\u0435\\u0442 \\u0444\\u0438\\u0433\\u0443\\u0440:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePlayerColor('w'),className:\"button \".concat(playerColor==='w'?'primary':''),children:\"\\u0411\\u0435\\u043B\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePlayerColor('b'),className:\"button \".concat(playerColor==='b'?'primary':''),children:\"\\u0427\\u0451\\u0440\\u043D\\u044B\\u0435\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:6,fontWeight:'bold'},children:\"\\u041A\\u043E\\u043D\\u0442\\u0440\\u043E\\u043B\\u044C \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,max:180,value:minutes,onChange:e=>{setMinutes(Number(e.target.value));resetClocks(Number(e.target.value),increment);},style:{width:80,padding:'8px',borderRadius:6,border:'1px solid #3a3a3a',background:'#2a2a2a',color:'#e6e6e6'}}),/*#__PURE__*/_jsx(\"span\",{className:\"kicker\",children:\"+\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:0,max:60,value:increment,onChange:e=>{setIncrement(Number(e.target.value));},style:{width:100,padding:'8px',borderRadius:6,border:'1px solid #3a3a3a',background:'#2a2a2a',color:'#e6e6e6'}}),/*#__PURE__*/_jsx(\"span\",{className:\"kicker\",children:\"\\u0441\\u0435\\u043A\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:startNewGame,className:\"button\",style:{marginBottom:12},children:\"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0438\\u0433\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"board-responsive\",children:/*#__PURE__*/_jsx(Chessboard,{position:game.fen(),onPieceDrop:handleMove,boardWidth:650,boardOrientation:playerColor==='w'?'white':'black'})}),isGameOver&&/*#__PURE__*/_jsx(\"div\",{className:\"panel\",style:{marginTop:12,color:'#ff8a80',fontWeight:'bold'},children:result}),isThinking&&/*#__PURE__*/_jsx(\"div\",{className:\"panel\",style:{marginTop:12,color:'#8ab4f8'},children:\"\\u041A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440 \\u0430\\u043D\\u0430\\u043B\\u0438\\u0437\\u0438\\u0440\\u0443\\u0435\\u0442 \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044E\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel game-clock\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"\\u0427\\u0430\\u0441\\u044B\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0411\\u0435\\u043B\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"strong\",{children:formatMs(displayedClock.wMs)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0427\\u0451\\u0440\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"strong\",{children:formatMs(displayedClock.bMs)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel game-history\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0445\\u043E\\u0434\\u043E\\u0432\"}),rows.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"kicker\",children:\"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u0445\\u043E\\u0434\\u043E\\u0432\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',width:40},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\"\\u0411\\u0435\\u043B\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left'},children:\"\\u0427\\u0451\\u0440\\u043D\\u044B\\u0435\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[r.no,\".\"]}),/*#__PURE__*/_jsx(\"td\",{children:r.w}),/*#__PURE__*/_jsx(\"td\",{children:r.b})]},r.no))})]})]})]})]})]});};export default ComputerGame;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","Chessboard","Chess","useNavigate","jsx","_jsx","jsxs","_jsxs","formatMs","ms","s","Math","max","floor","m","sec","concat","toString","padStart","pairMoves","sans","rows","i","length","push","no","w","b","ComputerGame","navigate","game","setGame","difficulty","setDifficulty","isGameOver","setIsGameOver","result","setResult","isThinking","setIsThinking","playerColor","setPlayerColor","isStockfishReady","setIsStockfishReady","isLoadingStockfish","setIsLoadingStockfish","stockfishRef","minutes","setMinutes","increment","setIncrement","clock","setClock","wMs","bMs","lastTurnStartAt","setLastTurnStartAt","tick","setTick","movesSan","setMovesSan","initStockfish","window","Stockfish","console","log","startStockfish","script","document","createElement","src","onload","setTimeout","onerror","head","appendChild","stockfish","current","uciReceived","onmessage","event","message","data","includes","postMessage","error","terminate","startNewGame","turn","makeComputerMove","id","setInterval","t","clearInterval","displayedClock","now","Date","elapsed","resetClocks","mins","inc","newGame","finishOnTime","loser","settleTimeAfterMove","movedColor","newW","newB","makeSimpleComputerMove","moves","captures","filter","move","testGame","fen","moveObj","captured","moveToPlay","random","prev","san","compColor","color","isCheckmate","isDraw","compMs","Promise","resolve","completed","timeout","clearTimeout","split","gameMove","handleMove","sourceSquare","targetSquare","from","to","changeDifficulty","newDifficulty","changePlayerColor","className","children","onClick","style","marginBottom","display","justifyContent","gap","flexWrap","fontWeight","type","min","value","onChange","e","parseInt","target","width","alignItems","Number","padding","borderRadius","border","background","position","onPieceDrop","boardWidth","boardOrientation","marginTop","flexDirection","borderCollapse","textAlign","map","r"],"sources":["/home/kirtan-rasa/hardcorechess/client/src/components/ComputerGame.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { Chessboard } from 'react-chessboard';\nimport { Chess } from 'chess.js';\nimport { useNavigate } from 'react-router-dom';\n\nconst formatMs = (ms) => {\n  const s = Math.max(0, Math.floor(ms / 1000));\n  const m = Math.floor(s / 60);\n  const sec = s % 60;\n  return `${m}:${sec.toString().padStart(2, '0')}`;\n};\n\nconst pairMoves = (sans) => {\n  const rows = [];\n  for (let i = 0; i < sans.length; i += 2) {\n    rows.push({ no: Math.floor(i / 2) + 1, w: sans[i] || '', b: sans[i + 1] || '' });\n  }\n  return rows;\n};\n\nconst ComputerGame = () => {\n  const navigate = useNavigate();\n  const [game, setGame] = useState(new Chess());\n  const [difficulty, setDifficulty] = useState(5);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [result, setResult] = useState(null);\n  const [isThinking, setIsThinking] = useState(false);\n  const [playerColor, setPlayerColor] = useState('w'); // w - белые, b - черные\n  const [isStockfishReady, setIsStockfishReady] = useState(false);\n  const [isLoadingStockfish, setIsLoadingStockfish] = useState(true);\n  const stockfishRef = useRef(null);\n\n  // Контроль времени\n  const [minutes, setMinutes] = useState(5);\n  const [increment, setIncrement] = useState(0);\n  const [clock, setClock] = useState({ wMs: minutes * 60000, bMs: minutes * 60000 });\n  const [lastTurnStartAt, setLastTurnStartAt] = useState(null);\n  const [tick, setTick] = useState(0);\n\n  // История ходов (SAN)\n  const [movesSan, setMovesSan] = useState([]);\n\n  // Инициализация Stockfish (максимально простой подход как на Lichess)\n  useEffect(() => {\n    const initStockfish = () => {\n      setIsLoadingStockfish(true);\n      \n      // Проверяем, не загружен ли уже Stockfish\n      if (window.Stockfish) {\n        console.log('Stockfish уже загружен');\n        startStockfish();\n        return;\n      }\n\n      // Создаем скрипт для загрузки\n      const script = document.createElement('script');\n      script.src = '/stockfish-nnue-16-single.js';\n      \n      script.onload = () => {\n        console.log('Stockfish скрипт загружен');\n        // Ждем немного и запускаем\n        setTimeout(startStockfish, 500);\n      };\n      \n      script.onerror = () => {\n        console.log('Не удалось загрузить Stockfish');\n        setIsLoadingStockfish(false);\n      };\n      \n      document.head.appendChild(script);\n    };\n\n    const startStockfish = () => {\n      try {\n        if (!window.Stockfish) {\n          console.log('Stockfish не найден в window');\n          setIsLoadingStockfish(false);\n          return;\n        }\n\n        const stockfish = new window.Stockfish();\n        stockfishRef.current = stockfish;\n        \n        let uciReceived = false;\n        \n        stockfish.onmessage = (event) => {\n          const message = event.data || event;\n          console.log('Stockfish:', message);\n          \n          if (message.includes('uciok')) {\n            uciReceived = true;\n            console.log('Stockfish готов!');\n            setIsStockfishReady(true);\n            setIsLoadingStockfish(false);\n          }\n        };\n        \n        stockfish.postMessage('uci');\n        \n        // Таймаут на случай если uciok не придет\n        setTimeout(() => {\n          if (!uciReceived) {\n            console.log('Stockfish не ответил на uci');\n            setIsLoadingStockfish(false);\n          }\n        }, 5000);\n        \n      } catch (error) {\n        console.error('Ошибка создания Stockfish:', error);\n        setIsLoadingStockfish(false);\n      }\n    };\n    \n    initStockfish();\n    \n    return () => {\n      if (stockfishRef.current) {\n        stockfishRef.current.terminate();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isStockfishReady) {\n      startNewGame();\n    }\n  }, [isStockfishReady]);\n\n  useEffect(() => {\n    if (!isGameOver && playerColor === 'b' && game.turn() === 'w') {\n      makeComputerMove();\n    }\n  }, [playerColor]);\n\n  useEffect(() => {\n    const id = setInterval(() => setTick((t) => t + 1), 200);\n    return () => clearInterval(id);\n  }, []);\n\n  const displayedClock = useMemo(() => {\n    if (isGameOver || lastTurnStartAt == null) return clock;\n    const now = Date.now();\n    const elapsed = Math.max(0, now - lastTurnStartAt);\n    if (game.turn() === 'w') {\n      return { wMs: Math.max(0, clock.wMs - elapsed), bMs: clock.bMs };\n    } else {\n      return { wMs: clock.wMs, bMs: Math.max(0, clock.bMs - elapsed) };\n    }\n  }, [clock, lastTurnStartAt, isGameOver, game, tick]);\n\n  const resetClocks = (mins, inc) => {\n    const ms = mins * 60000;\n    setClock({ wMs: ms, bMs: ms });\n    setLastTurnStartAt(Date.now());\n  };\n\n  const startNewGame = () => {\n    const newGame = new Chess();\n    setGame(newGame);\n    setIsGameOver(false);\n    setResult(null);\n    setIsThinking(false);\n    setMovesSan([]);\n    resetClocks(minutes, increment);\n    if (playerColor === 'b') {\n      setTimeout(() => makeComputerMove(), 50);\n    }\n  };\n\n  const finishOnTime = (loser) => {\n    setIsGameOver(true);\n    setResult(loser === 'w' ? 'Поражение по времени (белые)' : 'Поражение по времени (чёрные)');\n  };\n\n  const settleTimeAfterMove = (movedColor) => {\n    const now = Date.now();\n    if (lastTurnStartAt != null) {\n      const elapsed = now - lastTurnStartAt;\n      if (movedColor === 'w') {\n        const newW = Math.max(0, clock.wMs - elapsed) + increment * 1000;\n        if (newW <= 0) { finishOnTime('w'); return false; }\n        setClock({ wMs: newW, bMs: clock.bMs });\n      } else {\n        const newB = Math.max(0, clock.bMs - elapsed) + increment * 1000;\n        if (newB <= 0) { finishOnTime('b'); return false; }\n        setClock({ wMs: clock.wMs, bMs: newB });\n      }\n    }\n    setLastTurnStartAt(now);\n    return true;\n  };\n\n  const makeSimpleComputerMove = () => {\n    if (isGameOver || game.isGameOver()) return;\n    \n    setIsThinking(true);\n    \n    setTimeout(() => {\n      try {\n        const moves = game.moves();\n        if (moves.length > 0) {\n          // Простой алгоритм: случайный ход с небольшим приоритетом для взятий\n          const captures = moves.filter(move => {\n            const testGame = new Chess(game.fen());\n            const moveObj = testGame.move(move);\n            return moveObj && moveObj.captured;\n          });\n          \n          const moveToPlay = captures.length > 0 && Math.random() < 0.7 \n            ? captures[Math.floor(Math.random() * captures.length)]\n            : moves[Math.floor(Math.random() * moves.length)];\n          \n          const move = game.move(moveToPlay);\n          if (move) {\n            setMovesSan(prev => [...prev, move.san]);\n            setGame(new Chess(game.fen()));\n            const compColor = move.color;\n            if (!settleTimeAfterMove(compColor)) {\n              setIsThinking(false);\n              return;\n            }\n\n            if (game.isGameOver()) {\n              setIsGameOver(true);\n              if (game.isCheckmate()) {\n                setResult(playerColor === 'w' ? 'Победа чёрных!' : 'Победа белых!');\n              } else if (game.isDraw()) {\n                setResult('Ничья!');\n              }\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Ошибка простого хода:', error);\n      } finally {\n        setIsThinking(false);\n      }\n    }, 500 + Math.random() * 1000); // Имитация размышления\n  };\n\n  const makeComputerMove = async () => {\n    try {\n      if (isGameOver || game.isGameOver()) return;\n      \n      // Если Stockfish не готов, используем простой алгоритм\n      if (!isStockfishReady || !stockfishRef.current) {\n        makeSimpleComputerMove();\n        return;\n      }\n\n      if (game.turn() !== playerColor) {\n        const now = Date.now();\n        if (lastTurnStartAt != null) {\n          const elapsed = now - lastTurnStartAt;\n          const compColor = playerColor === 'w' ? 'b' : 'w';\n          const compMs = compColor === 'w' ? clock.wMs : clock.bMs;\n          if (compMs - elapsed <= 0) {\n            finishOnTime(compColor);\n            return;\n          }\n        }\n      }\n\n      setIsThinking(true);\n      \n      const stockfish = stockfishRef.current;\n      \n      // Простая реализация как на Lichess\n      return new Promise((resolve) => {\n        let completed = false;\n        \n        const timeout = setTimeout(() => {\n          if (!completed) {\n            console.log('Stockfish таймаут, используем простой алгоритм');\n            makeSimpleComputerMove();\n            resolve();\n          }\n        }, 2000); // Быстрый таймаут как на Lichess\n        \n        stockfish.onmessage = (event) => {\n          const message = event.data || event;\n          \n          if (message.includes('bestmove')) {\n            if (completed) return;\n            completed = true;\n            clearTimeout(timeout);\n            \n            const move = message.split(' ')[1];\n            \n            if (move && move !== 'null') {\n              try {\n                const gameMove = game.move(move);\n                if (gameMove) {\n                  setMovesSan(prev => [...prev, gameMove.san]);\n                  setGame(new Chess(game.fen()));\n                  \n                  if (!settleTimeAfterMove(gameMove.color)) {\n                    setIsThinking(false);\n                    resolve();\n                    return;\n                  }\n\n                  if (game.isGameOver()) {\n                    setIsGameOver(true);\n                    if (game.isCheckmate()) {\n                      setResult(playerColor === 'w' ? 'Победа чёрных!' : 'Победа белых!');\n                    } else if (game.isDraw()) {\n                      setResult('Ничья!');\n                    }\n                  }\n                }\n              } catch (error) {\n                console.error('Ошибка хода:', error);\n              }\n            }\n            \n            setIsThinking(false);\n            resolve();\n          }\n        };\n        \n        // Простые настройки как на Lichess\n        stockfish.postMessage('position fen ' + game.fen());\n        stockfish.postMessage('go depth ' + (difficulty >= 5 ? 6 : 4));\n      });\n    } catch (error) {\n      console.error('Ошибка в makeComputerMove:', error);\n      setIsThinking(false);\n    }\n  };\n\n  const handleMove = async (sourceSquare, targetSquare) => {\n    try {\n      if (isGameOver || isThinking) return false;\n      if (game.turn() !== playerColor) return false;\n\n      const move = game.move({ from: sourceSquare, to: targetSquare });\n      if (!move) return false;\n\n      setMovesSan(prev => [...prev, move.san]);\n      setGame(new Chess(game.fen()));\n\n      if (!settleTimeAfterMove(move.color)) return true;\n\n      if (game.isGameOver()) {\n        setIsGameOver(true);\n        if (game.isCheckmate()) {\n          setResult(playerColor === 'w' ? 'Победа белых!' : 'Победа чёрных!');\n        } else if (game.isDraw()) {\n          setResult('Ничья!');\n        }\n        return true;\n      }\n\n      setTimeout(() => { makeComputerMove(); }, 200);\n      return true;\n    } catch (error) {\n      // Просто возвращаем false, фигура вернется на место\n      console.log('Неправильный ход:', error.message);\n      return false;\n    }\n  };\n\n  const changeDifficulty = (newDifficulty) => {\n    setDifficulty(newDifficulty);\n    startNewGame();\n  };\n\n  const changePlayerColor = (color) => {\n    setPlayerColor(color);\n    startNewGame();\n  };\n\n  const rows = useMemo(() => pairMoves(movesSan), [movesSan]);\n\n  return (\n    <div className=\"section\">\n      <button \n        onClick={() => navigate('/')}\n        className=\"button\"\n        style={{ marginBottom: 12 }}\n      >\n        Назад\n      </button>\n      \n      <h2>Игра против компьютера</h2>\n\n      {isLoadingStockfish && (\n        <div className=\"panel\" style={{ marginBottom: 16, color: '#8ab4f8' }}>\n          Загрузка легкой версии Stockfish...\n          <br />\n          <small>Сервер: hardcorechess.onrender.com | Клиент: hardcorechess.org</small>\n        </div>\n      )}\n\n      {isStockfishReady && (\n        <div className=\"panel\" style={{ marginBottom: 16, color: '#4caf50' }}>\n          ✅ Stockfish готов! Компьютер будет играть на максимальном уровне.\n        </div>\n      )}\n\n      {!isStockfishReady && !isLoadingStockfish && (\n        <div className=\"panel\" style={{ marginBottom: 16, color: '#ffa726' }}>\n          ⚠️ Stockfish не загружен. Используется упрощенный ИИ.\n          <br />\n          <small>Игра будет работать, но компьютер будет играть проще.</small>\n          <br />\n          <small>Откройте консоль браузера (F12) для диагностики.</small>\n          <br />\n          <small>На продакшн сервере Stockfish должен работать лучше.</small>\n        </div>\n      )}\n\n      <div className=\"game-layout\">\n        <div className=\"game-board\">\n          <div style={{ display: 'flex', justifyContent: 'center', gap: 16, marginBottom: 16, flexWrap: 'wrap' }}>\n            <div className=\"panel\">\n              <label style={{ display: 'block', marginBottom: 6, fontWeight: 'bold' }}>\n                Сложность: {difficulty}/10\n              </label>\n              <input\n                type=\"range\"\n                min=\"1\"\n                max=\"10\"\n                value={difficulty}\n                onChange={(e) => changeDifficulty(parseInt(e.target.value))}\n                style={{ width: 180 }}\n              />\n            </div>\n            \n            <div className=\"panel\">\n              <label style={{ display: 'block', marginBottom: 6, fontWeight: 'bold' }}>\n                Цвет фигур:\n              </label>\n              <div style={{ display: 'flex', gap: 8 }}>\n                <button\n                  onClick={() => changePlayerColor('w')}\n                  className={`button ${playerColor === 'w' ? 'primary' : ''}`}\n                >\n                  Белые\n                </button>\n                <button\n                  onClick={() => changePlayerColor('b')}\n                  className={`button ${playerColor === 'b' ? 'primary' : ''}`}\n                >\n                  Чёрные\n                </button>\n              </div>\n            </div>\n\n            <div className=\"panel\">\n              <label style={{ display: 'block', marginBottom: 6, fontWeight: 'bold' }}>Контроль времени</label>\n              <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n                <input type=\"number\" min={1} max={180} value={minutes}\n                  onChange={(e) => { setMinutes(Number(e.target.value)); resetClocks(Number(e.target.value), increment); }}\n                  style={{ width: 80, padding: '8px', borderRadius: 6, border: '1px solid #3a3a3a', background: '#2a2a2a', color: '#e6e6e6' }} />\n                <span className=\"kicker\">+</span>\n                <input type=\"number\" min={0} max={60} value={increment}\n                  onChange={(e) => { setIncrement(Number(e.target.value)); }}\n                  style={{ width: 100, padding: '8px', borderRadius: 6, border: '1px solid #3a3a3a', background: '#2a2a2a', color: '#e6e6e6' }} />\n                <span className=\"kicker\">сек</span>\n              </div>\n            </div>\n          </div>\n          \n          <button onClick={startNewGame} className=\"button\" style={{ marginBottom: 12 }}>\n            Новая игра\n          </button>\n          \n          <div className=\"board-responsive\">\n            <Chessboard\n              position={game.fen()}\n              onPieceDrop={handleMove}\n              boardWidth={650}\n              boardOrientation={playerColor === 'w' ? 'white' : 'black'}\n            />\n          </div>\n\n          {isGameOver && (\n            <div className=\"panel\" style={{ marginTop: 12, color: '#ff8a80', fontWeight: 'bold' }}>\n              {result}\n            </div>\n          )}\n          \n          {isThinking && (\n            <div className=\"panel\" style={{ marginTop: 12, color: '#8ab4f8' }}>\n              Компьютер анализирует позицию…\n            </div>\n          )}\n        </div>\n\n        <div className=\"game-sidebar\">\n          <div className=\"panel game-clock\">\n            <h3 style={{ marginTop: 0 }}>Часы</h3>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <span>Белые</span>\n                <strong>{formatMs(displayedClock.wMs)}</strong>\n              </div>\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <span>Чёрные</span>\n                <strong>{formatMs(displayedClock.bMs)}</strong>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"panel game-history\">\n            <h3 style={{ marginTop: 0 }}>История ходов</h3>\n            {rows.length === 0 ? (\n              <p className=\"kicker\">Пока нет ходов</p>\n            ) : (\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                <thead>\n                  <tr>\n                    <th style={{ textAlign: 'left', width: 40 }}>#</th>\n                    <th style={{ textAlign: 'left' }}>Белые</th>\n                    <th style={{ textAlign: 'left' }}>Чёрные</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {rows.map((r) => (\n                    <tr key={r.no}>\n                      <td>{r.no}.</td>\n                      <td>{r.w}</td>\n                      <td>{r.b}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComputerGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}